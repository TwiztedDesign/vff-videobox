{"version":3,"sources":["webpack:///webpack/bootstrap 8da26c394897a2dae36c","webpack:///./src/index.js","webpack:///./src/videobox.js","webpack:///./src/simplewebrtc.bundle.js","webpack:///(webpack)/buildin/global.js"],"names":["window","vff","define","VideoBox","WebRTC","require","_src","_reconnectInterval","html","innerHTML","controllerPreview","useCanvas","src","mode","initStream","clearInterval","canvasDrawTimeout","video","self","console","info","setAttribute","muted","videoEl","startDraw","hasChildNodes","removeChild","lastChild","appendChild","webrtc","stopLocalVideo","play","canvases","Array","prototype","slice","call","document","querySelectorAll","contexts","map","canvas","ctx","getContext","name","getAttribute","forEach","context","width","offsetWidth","height","offsetHeight","addEventListener","draw","isArray","paused","ended","isVisible","drawImage","setTimeout","offsetParent","str","pattern","RegExp","test","_reconnectTimeout","reconnect","clearTimeout","url","log","signalingServer","room","split","targetId","leaveRoom","connection","disconnect","target","socketio","stunServer","urls","username","credential","localVideoEl","remoteVideosEl","autoRequestMedia","debug","detectSpeakingEvents","autoAdjustMic","on","setInfo","id","joinRoom","startReconnectionInterval","peer","label","data","initVideo","stopReconnectionInterval","clearVideo","Src","_streamId","value","isURL","parts","server","length","join","HTMLElement","f","exports","module","g","global","adapter","e","t","n","r","s","o","u","a","i","Error","code","l","SDPUtils","generateIdentifier","Math","random","toString","substr","localCName","splitLines","blob","trim","line","splitSections","part","index","matchPrefix","prefix","filter","indexOf","parseCandidate","substring","candidate","foundation","component","parseInt","protocol","toLowerCase","priority","ip","port","type","relatedAddress","relatedPort","tcpType","writeCandidate","sdp","push","toUpperCase","parseIceOptions","parseRtpMap","parsed","payloadType","shift","clockRate","numChannels","writeRtpMap","codec","pt","preferredPayloadType","undefined","parseExtmap","direction","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","j","writeFmtp","parameters","Object","keys","params","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","getIceParameters","concat","iceParameters","usernameFragment","password","writeIceParameters","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","kind","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","ssrcs","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","JSON","parse","stringify","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","cname","remoteSsrc","obj","rsize","reducedSize","compound","mux","parseMsid","spec","stream","track","planB","writeSessionBoilerplate","writeMediaSection","transceiver","iceGatherer","getLocalParameters","dtlsTransport","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","getKind","isRejected","adapterFactory","dependencies","utils","logging","browserDetails","detectBrowser","extractVersion","disableLog","chromeShim","edgeShim","firefoxShim","safariShim","browser","shimPeerConnection","browserShim","shimGetUserMedia","shimMediaStream","shimCreateObjectURL","shimSourceObject","shimOnTrack","shimGetSendersWithDtmf","shimReplaceTrack","shimCallbacksAPI","shimAddStream","shimOnAddStream","MediaStream","webkitMediaStream","RTCPeerConnection","defineProperty","get","_ontrack","set","removeEventListener","_ontrackpoly","te","receiver","getReceivers","find","event","Event","streams","dispatchEvent","getTracks","bind","getSenders","_senders","origAddStream","addStream","origRemoveStream","removeStream","addTrack","pc","signalingState","DOMException","arguments","alreadyExists","_streams","oldStream","newStream","sender","dtmf","_dtmf","createDTMFSender","apply","splice","URL","HTMLMediaElement","_srcObject","revokeObjectURL","createObjectURL","pcConfig","pcConstraints","iceTransportPolicy","iceTransports","webkitRTCPeerConnection","generateCertificate","OrigPeerConnection","iceServers","newIceServers","hasOwnProperty","warn","origGetStats","getStats","selector","successCallback","errorCallback","args","fixChromeStats_","response","standardReport","reports","result","report","standardStats","timestamp","localcandidate","remotecandidate","names","stat","makeMapStats","stats","Map","key","successCallbackWrapper_","Promise","resolve","reject","then","version","method","nativeMethod","promise","err","opts","RTCIceCandidate","RTCSessionDescription","nativeAddIceCandidate","addIceCandidate","navigator","constraintsToChrome_","c","mandatory","optional","cc","ideal","exact","min","max","oldname_","charAt","oc","mix","advanced","shimConstraints_","constraints","func","audio","remap","b","face","facingMode","getSupportedFacingModeLies","mediaDevices","getSupportedConstraints","matches","enumerateDevices","devices","d","dev","some","match","deviceId","shimError_","PermissionDeniedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","message","constraint","constraintName","getUserMedia_","onSuccess","onError","webkitGetUserMedia","getUserMedia","getUserMediaPromise_","kinds","MediaStreamTrack","getSources","device","groupId","echoCancellation","frameRate","origGetUserMedia","cs","getAudioTracks","getVideoTracks","stop","shimRTCPeerConnection","RTCIceGatherer","origMSTEnabled","getOwnPropertyDescriptor","ev","enabled","RTCRtpSender","replaceTrack","setTrack","catch","sortTracks","tracks","audioTracks","videoTracks","filterIceServers","edgeVersion","hasTurn","isString","validTurn","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","findCodecByPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","rCodec","lHeaderExtension","rHeaderExtension","isActionAllowedInSignalingState","action","offer","setLocalDescription","setRemoteDescription","answer","config","_eventTarget","createDocumentFragment","needNegotiation","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","canTrickleIceCandidates","localStreams","remoteStreams","getLocalStreams","getRemoteStreams","localDescription","remoteDescription","iceConnectionState","iceGatheringState","iceOptions","gatherPolicy","usingBundle","bundlePolicy","_config","transceivers","_localIceCandidatesBuffer","_emitGatheringStateChange","_emitBufferedCandidates","sections","end","sdpMLineIndex","complete","every","state","iceGatheringStateChange","getConfiguration","_createTransceiver","hasBundleTransport","iceTransport","recvEncodingParameters","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","idx","clonedTrack","_createIceGatherer","onlocalcandidate","evt","sdpMid","cand","_pendingOffer","RTCIceTransport","onicestatechange","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","writable","_disposeIceAndDtlsTransports","ondtlssttatechange","_transceive","send","recv","encodings","p","receive","isIceLite","rejected","isDatachannel","remoteIceParameters","remoteDtlsParameters","start","_updateSignalingState","TypeError","hasCallback","cb","receiverList","remoteMsid","isComplete","cands","setTransport","setRemoteCandidates","RTCRtpReceiver","getCapabilities","default","sid","item","trackEvent","getRemoteCandidates","addRemoteCandidate","close","newState","states","closed","connecting","checking","connected","completed","disconnected","failed","new","createOffer","offerOptions","numAudioTracks","numVideoTracks","offerToReceiveAudio","offerToReceiveVideo","desc","createAnswer","localTrack","hasRtx","mLineIndex","promises","fixStatsType","inboundrtp","outboundrtp","candidatepair","results","all","res","mozSrcObject","mozRTCPeerConnection","newServer","mozRTCSessionDescription","mozRTCIceCandidate","modernStatsTypes","nativeGetStats","onSucc","onErr","assign","InternalError","NotSupportedError","SecurityError","constraintsToFF37_","mozGetUserMedia","infos","orgEnumerateDevices","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","_onaddstream","_onaddstreampoly","failureCallback","options","withCallback","errcb","logDisabled_","bool","uastring","expr","pos","userAgent","nativeCreateObjectURL","nativeRevokeObjectURL","newId","delete","dsc","srcObject","nativeSetAttribute","SimpleWebRTC","after","count","callback","err_cb","bail","noop","proxy","arraybuffer","bytes","byteLength","ArrayBuffer","abv","Uint8Array","ii","buffer","el","element","autoplay","mirror","disableContextMenu","createElement","tagName","oncontextmenu","preventDefault","styleName","style","legacyStats","back","_getCommonCapabilities","Backoff","ms","factor","jitter","attempts","duration","pow","rand","deviation","floor","reset","setMin","setMax","setJitter","chars","encode","len","base64","decode","bufferLength","encoded1","encoded2","encoded3","encoded4","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","Blob","size","blobSupportsArrayBufferView","blobBuilderSupported","append","getBlob","mapArrayBufferViews","ary","chunk","buf","copy","byteOffset","BlobBuilderConstructor","bb","BlobConstructor","fn","Emitter","mixin","_callbacks","once","off","removeListener","removeAllListeners","callbacks","emit","listeners","hasListeners","constructor","fmt","coerce","curr","Date","humanize","Function","skips","enable","localStorage","replace","disable","sec","hour","toFixed","val","stack","parser","parseuri","parsejson","parseqs","Socket","host","secure","query","location","pieces","hostname","pop","agent","upgrade","path","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","readyState","writeBuffer","callbackBuffer","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","open","priorWebsocketSuccess","Transport","createTransport","EIO","transport","socket","onDrain","packet","onPacket","onClose","probe","onTransportOpen","upgradeLosesBinary","supportsBinary","msg","upgrading","pause","cleanup","flush","freezeTransport","error","onTransportClose","onclose","onupgrade","to","onOpen","upgrades","onHandshake","setPing","filterUpgrades","pingInterval","pingTimeout","onHeartbeat","timeout","pingTimeoutTimer","pingIntervalTimer","ping","sendPacket","prevBufferLen","write","cleanupAndClose","waitForUpgrade","reason","filteredUpgrades","timestamps","doOpen","doClose","packets","onData","decodePacket","XMLHttpRequest","XHR","JSONP","websocket","polling","xhr","xd","xs","isSSL","xdomain","xscheme","Polling","inherit","JSONPPolling","rNewline","rEscapedNewline","empty","___eio","script","parentNode","form","iframe","doPoll","async","insertAt","getElementsByTagName","insertBefore","isUAgecko","body","doWrite","area","iframeId","className","position","top","left","initIframe","submit","attachEvent","onreadystatechange","onload","Request","request","isBinary","req","sendXhr","pollXhr","create","responseType","setRequestHeader","withCredentials","hasXDR","onLoad","responseText","status","requestsCount","requests","fromError","abort","contentType","getResponseHeader","XDomainRequest","unloadHandler","hasXHR2","poll","onPause","pending","total","decodePayload","callbackfn","encodePayload","schema","b64","WebSocket","WS","check","protocols","ws","addEventListeners","onopen","onmessage","encodePacket","ondrain","hasCORS","ActiveXObject","formatArgs","save","load","useColors","colors","documentElement","firebug","exception","table","$1","formatters","v","namespace","diff","color","lastC","namespaces","removeItem","prevColor","prevTime","selectColor","disabled","prev","format","formatter","logFn","re","m","exec","source","authority","ipv6uri","hasBinary","sliceBuffer","base64encoder","utf8","isAndroid","isPhantomJS","dontSendBlobs","pong","packetslist","utf8encode","encodeArrayBuffer","encodeBlob","encodeBase64Object","encoded","String","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","FileReader","readAsArrayBuffer","readAsDataURL","b64data","fromCharCode","typed","basic","btoa","utf8decode","decodeBase64Packet","Number","asArray","rest","encodePayloadAsBlob","encodePayloadAsArrayBuffer","setLengthHeader","encodeOne","doneCallback","each","done","next","eachWithIndex","decodePayloadAsBinary","chr","ret","encodedPackets","totalLength","reduce","acc","resultArray","bufferIndex","ab","view","charCodeAt","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","numberTooLong","tailArray","msgLength","arr","has","WildEmitter","util","Sender","chunksize","pacing","file","channel","inherits","usePoll","bufferedAmountLowThreshold","offset","sliceFile","reader","bufferedAmount","Receiver","receiveBuffer","received","metadata","support","File","cache","hasConstraints","chromever","maxver","isCef","chrome","webstore","sessionStorage","getScreenMediaJSExtensionId","runtime","sendMessage","sourceId","chromeMediaSource","maxWidth","screen","maxHeight","maxFrameRate","chromeMediaSourceId","cefGetScreenMedia","googLeakyBucket","googTemporalLayeredScreencast","postMessage","ffver","mozMediaSource","mediaSource","lastTime","currentTime","polly","setInterval","onended","origin","getMaxVolume","analyser","fftBins","maxVolume","Infinity","getFloatFrequencyData","audioContextType","AudioContext","webkitAudioContext","audioContext","harker","smoothing","interval","threshold","history","running","sourceNode","createAnalyser","fftSize","smoothingTimeConstant","Float32Array","frequencyBinCount","jquery","HTMLAudioElement","HTMLVideoElement","createMediaElementSource","createMediaStreamSource","connect","destination","speaking","setThreshold","speakingHistory","looper","currentVolume","_hasBinary","Buffer","isBuffer","toJSON","getClass","isProperty","undef","isLoader","amd","nativeJSON","JSON3","nodeType","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","isSupported","serialized","stringifySupported","parseSupported","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","Months","getDay","year","month","property","members","__proto__","original","parent","PrimitiveTypes","isHostType","object","Properties","valueOf","isFunction","hasProperty","isConstructor","Escapes","leadingZeroes","toPaddedString","unicodePrefix","quote","isLarge","symbols","charCode","serialize","properties","whitespace","indentation","date","time","hours","minutes","seconds","milliseconds","Unescapes","Index","Source","SyntaxError","lex","begin","isSigned","hasMembers","update","walk","hark","getScreenMedia","mockconsole","isAllTracksEnded","shouldWorkAroundFirefoxStopStream","LocalMedia","audioFallback","media","harkOptions","logger","_log","_logerror","localScreens","_audioMonitors","_stopAudioMonitor","mediaConstraints","_setupAudioMonitor","_removeStream","stopStream","stopScreenShare","startScreenShare","mute","_audioEnabled","unmute","pauseVideo","_videoEnabled","resumeVideo","resume","isAudioEnabled","isVideoEnabled","volume","monitors","LARGE_ARRAY_SIZE","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reRegExpChar","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","root","freeExports","freeModule","moduleExports","addMapEntry","pair","addSetEntry","add","arrayEach","array","iteratee","arrayPush","values","arrayReduce","accumulator","initAccum","baseTimes","getValue","isHostObject","mapToArray","overArg","transform","arg","setToArray","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","uid","IE_PROTO","funcToString","objectToString","reIsNative","Symbol","getPrototype","getPrototypeOf","objectCreate","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","nativeKeys","DataView","getNative","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","entries","clear","entry","hashClear","__data__","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","pairs","arrayLikeKeys","inherited","isArguments","skipIndexes","isIndex","assignValue","objValue","eq","baseAssign","copyObject","baseClone","isDeep","isFull","customizer","isObject","isArr","initCloneArray","copyArray","tag","getTag","isFunc","cloneBuffer","initCloneObject","copySymbols","initCloneByTag","stacked","props","getAllKeys","subValue","baseCreate","proto","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","baseIsNative","isMasked","baseKeys","isPrototype","cloneArrayBuffer","arrayBuffer","cloneDataView","dataView","cloneMap","cloneFunc","cloneRegExp","regexp","cloneSet","cloneSymbol","symbol","cloneTypedArray","typedArray","newValue","getSymbols","isKeyable","stubArray","Ctor","ctorString","input","cloneDeep","other","isArrayLikeObject","isArrayLike","isLength","isObjectLike","stubFalse","methods","h","y","long","short","parseFloat","round","plural","ceil","vals","merge","isEmpty","rvalidchars","rvalidescape","rvalidtokens","rvalidbraces","rtrimLeft","rtrimRight","encodeURIComponent","qs","qry","decodeURIComponent","process","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","run","nextTick","Item","title","env","argv","versions","addListener","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","SJJ","PeerConnection","enableChromeNativeSimulcast","appVersion","enableMultiStreamHacks","restrictBandwidth","andyetRestrictBandwidth","batchIceCandidates","andyetBatchIce","batchedIceCandidates","andyetFasterICE","eliminateDuplicateCandidates","andyetDontSignalCandidates","dontSignalCandidates","assumeSetLocalSuccess","andyetAssumeSetLocalSuccess","wtFirefox","andyetFirefoxMakesMeSad","firefoxcandidatebuffer","vidEncoder","vidBitrate","audEncode","audEncoder","audBitrate","removeTrack","onremovetrack","_onIce","_onDataChannel","contents","isInitiator","sdpSessionID","now","useJingle","iceCredentials","local","remote","hadLocalStunCandidate","hadRemoteStunCandidate","hadLocalRelayCandidate","hadRemoteRelayCandidate","hadLocalIPv6Candidate","hadRemoteIPv6Candidate","_remoteDataChannels","_localDataChannels","_candidateBuffer","_role","localStream","_checkLocalCandidate","toCandidateJSON","_checkRemoteCandidate","processIce","jingle","contentNames","content","candidates","remoteContent","processCandidates","iceCandidate","toCandidateSDP","ufrag","pwd","toSessionSDP","ua","addTransceiver","expandedOffer","toSessionJSON","strCodecId","nFound","strBegin","strSDP","strEnd","strSAVPF","includes","handleOffer","application","googConferenceFlag","sources","unshift","hasBw","answerAudioOnly","OfferToReceiveAudio","OfferToReceiveVideo","_answer","answerBroadcastOnly","handleAnswer","z","sim","groups","sourceGroups","hasSim","group","semantics","newssrc","rtxssrc","expandedAnswer","ice","expandedCandidate","already","address","rtcpMuxPolicy","creator","transportType","newCand","createDataChannel","toSDP","toIncomingSDPOffer","session","toOutgoingSDPOffer","toIncomingSDPAnswer","toOutgoingSDPAnswer","toIncomingMediaSDPOffer","toMediaSDP","toOutgoingMediaSDPOffer","toIncomingMediaSDPAnswer","toOutgoingMediaSDPAnswer","toIncomingJSONOffer","creators","toOutgoingJSONOffer","toIncomingJSONAnswer","toOutgoingJSONAnswer","toIncomingMediaJSONOffer","toMediaJSON","toOutgoingMediaJSONOffer","toIncomingMediaJSONAnswer","toOutgoingMediaJSONAnswer","findLine","mediaLines","sessionLines","prefixLength","findLines","formats","rtpmap","clockrate","channels","sctpmap","number","fmtp","crypto","cipherSuite","keyParams","sessionParams","fingerprint","hash","extmap","idpart","senders","rtcpfb","subtype","generation","relAddr","relPort","network","mslabel","initiator","incoming","responder","both","none","recvonly","sendonly","sendrecv","inactive","outgoing","SENDERS","parsers","idCounter","_setIdCounter","counter","groupLines","applicationType","payloads","encryption","feedback","sctp","trans","rtpmapLines","payload","fmtpLines","fbLines","cryptoLines","extLines","ext","ssrcGroupLines","ssrcLines","msidLine","found","fingerprintLines","setup","ufragLine","pwdLine","candidateLines","sctpmapLines","hasSources","pushedSetup","hdrExts","hdr","ssrcGroups","ssrcGroup","Manager","lookup","managers","io","forceNew","multiplex","eio","nsps","subs","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","encoding","packetBuffer","encoder","Encoder","decoder","Decoder","autoConnect","emitAll","nsp","updateSocketIds","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","reconnecting","skipReconnect","openSub","errorSub","timer","destroy","ondata","ondecoded","processPacketQueue","pack","sub","delay","onreconnect","attempt","toArray","hasBin","events","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","json","ids","acks","sendBuffer","subEvents","parserType","EVENT","BINARY_EVENT","CONNECT","onpacket","onconnect","onevent","ACK","onack","BINARY_ACK","DISCONNECT","ondisconnect","ERROR","ack","sent","emitBuffered","loc","href","isBuf","deconstructPacket","packetData","_deconstructPacket","placeholder","_placeholder","num","newData","attachments","reconstructPacket","curPlaceHolder","_reconstructPacket","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","bloblessData","binary","types","encodeAsBinary","encodeAsString","writeEncoding","deconstruction","reconstructor","decodeString","BinaryReconstructor","reconPack","takeBinaryData","finishedReconstruction","binData","list","stringFromCharCode","ucs2decode","string","output","extra","ucs2encode","checkScalarValue","codePoint","createByte","encodeCodePoint","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","tmp","ctor","superCtor","super_","enumerable","configurable","TempCtor","fill","readUInt8","formatRegExp","objects","inspect","x","_","isNull","deprecate","isUndefined","noDeprecation","warned","deprecated","throwDeprecation","traceDeprecation","trace","debugs","debugEnviron","debuglog","NODE_DEBUG","pid","seen","stylize","stylizeNoColor","depth","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styles","styleType","arrayToHash","recurseTimes","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","formatError","isRegExp","isDate","base","braces","toUTCString","formatArray","formatProperty","reduceToSingleString","simple","isNumber","numLinesEst","cur","ar","isNullOrUndefined","isSymbol","isPrimitive","pad","months","getHours","getMinutes","getSeconds","getDate","getMonth","prop","PC","IceCandidate","SessionDescription","screenSharing","supportVp8","canPlayType","msGetUserMedia","browserVersion","supportRTCPeerConnection","supportGetUserMedia","supportDataChannel","supportWebAudio","supportMediaStream","supportScreenSharing","isWildEmitter","groupName","hasGroup","_groupName","releaseGroup","handlers","specialCallbacks","getWildcardCallbacks","eventName","MozWebSocket","instance","webrtcSupport","FileTransfer","INBAND_FILETRANSFER_V1","Peer","chunkedMessages","nickName","oneway","sharemyscreen","browserPrefix","enableDataChannels","receiveMedia","peerConnectionConfig","peerConnectionConstraints","onIceCandidate","nick","handleRemoteStreamAdded","handleDataChannelAdded","handleStreamRemoved","broadcaster","handleMessage","sessionDescription","from","mLines","mLine","messageType","roomType","sendDirectly","dc","getDataChannel","splitted","guid","s4","messageId","chunksCount","_observeDataChannel","nChunksCount","nChunk","temp","icerestart","IceRestart","success","peerIndex","peers","sendFile","getTime","attachMediaStream","SocketIoConnection","autoRemoveVideos","adjustPeerVolume","peerVolumeWhenSpeaking","localVideo","capabilities","getSessionid","sessionReady","testReadiness","getPeers","createPeer","fromNickName","removePeers","handlePeerStreamAdded","handlePeerStreamRemoved","setVolumeForAll","sendToAll","container","getRemoteVideoContainer","existingPeer","getLocalScreen","startLocalVideo","roomName","sendDataChannelMessageToAll","sendDirectlyToAll","sendDataChannelMessageToPeer","peerId","foundId","getDomId","roomDescription","client","clients","multicastType","janusLisnterMsg","toName","getEl","idOrEl","getElementById","getLocalVideoContainer","shareScreen","createRoom","dataChannel","getNickName","setNickName","strongId","multicast","sId","mod","mc","localMedia","iceServersiceServers","hardMuted","treshold","val1","val2","sessionId"],"mappings":"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","file":"vff-ext.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8da26c394897a2dae36c","import VideoBox from './videobox';\n\nif(window.vff){\n    window.vff.define(\"vff-videobox\" , VideoBox);\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const WebRTC = require('./simplewebrtc.bundle');\n\nexport default class VideoBox extends HTMLElement {\n    constructor() {\n        super();\n        this._src = '';\n        this._reconnectInterval = 3000;\n    }\n\n    connectedCallback() {\n        var html =\n            '<div style=\"width: 100%; height: 100%;\">'+\n            '   <canvas class=\"canvas\" style=\"width: 100%; height: 100%;\"></canvas>'+\n            '</div>';\n\n        this.innerHTML = html;\n        this.controllerPreview = false;\n        this.useCanvas = false;\n\n\n        if(this.src && (this.controllerPreview || window.vff.mode !== 'controller-preview')){\n            this.initStream(this.src);\n        }\n    }\n\n    disconnectedCallback() {\n        clearInterval(this.canvasDrawTimeout);\n    }\n\n    static get observedAttributes() {\n        return [];\n    }\n\n    attributeChangedCallback() {\n\n    }\n\n    initVideo(video /*,peer*/) {\n\n        let self = this;\n\n        console.info('Initialize RTC Video'); // eslint-disable-line no-console\n\n        video.setAttribute('loop', '');\n        video.muted = true;\n        video.setAttribute('autoplay', 'true');\n        // video.setAttribute('controls', '');\n\n\n        self.videoEl = video;\n\n        if(this.useCanvas){\n            self.startDraw();\n        } else {\n            video.setAttribute('width', '100%');\n            video.setAttribute('height', '100%');\n            while (self.hasChildNodes()){\n                self.removeChild(self.lastChild);\n            }\n            self.appendChild(video);\n        }\n\n\n        self.webrtc.stopLocalVideo();\n        video.play();\n    }\n\n    clearVideo (/*video, peer*/) { //DOSENT WORK\n        // let self = this;\n        // console.log('video removed ', peer);\n        // let container = document.getElementById('videoContainer');\n        // if (peer !== undefined) {\n        //     if (peer.id == targetId || peer.strongId == targetId || peer.nickName == targetId) {\n        //         self.videoEl = null;\n        //         while (container.hasChildNodes())\n        //             container.removeChild(container.lastChild);\n        //\n        //         var videoStub = document.createElement('video');\n        //         container.appendChild(videoStub);\n        //     }\n        // }\n    }\n\n    startDraw(){\n        let self = this;\n        var video  = self.videoEl;\n        var canvases = Array.prototype.slice.call(document.querySelectorAll('.canvas'));\n        var contexts = canvases.map(function(canvas){\n            var ctx = canvas.getContext('2d');\n            ctx.name = canvas.getAttribute('name');\n            return ctx;\n        });\n\n        contexts.forEach(function(context) {\n            context.canvas.width  = context.canvas.offsetWidth;\n            context.canvas.height = context.canvas.offsetHeight;\n        });\n\n        video.addEventListener('play', function(){\n            self.draw(video, contexts);\n        },false);\n    }\n\n\n    draw(video, contexts) {\n        let self = this;\n        contexts = Array.isArray(contexts)? contexts : [contexts];\n        if(video.paused || video.ended) return false;\n        contexts.forEach(function(context) {\n            if(self.isVisible()){\n                context.drawImage(video, 0, 0, context.canvas.width, context.canvas.height);\n            }\n        });\n        self.canvasDrawTimeout = setTimeout(\n            function(){\n                self.draw(video, contexts);\n            }, 20);\n    }\n\n    isVisible() {\n        return (this.offsetParent !== null);\n    }\n\n\n    isURL(str){\n        let pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\n            '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.?)+[a-z]{2,}|'+ // domain name\n            '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\n            '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\n            '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\n            '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\n        return pattern.test(str);\n    }\n\n    reconnect(){\n        this.initStream(this.src);\n    }\n    startReconnectionInterval(){\n        this._reconnectTimeout = setTimeout(() => {this.reconnect()}, this._reconnectInterval);\n    }\n    stopReconnectionInterval(){\n        clearTimeout(this._reconnectTimeout);\n    }\n\n    initStream(url) {\n        let self = this;\n\n        console.log('Initialize RTC Connection:', url); // eslint-disable-line no-console\n        // if(inController) return;\n        // var signalingServer = self.signalingServer || \"https://rtc.medialooks.com:8889\";\n        var signalingServer = self.signalingServer || \"https://rtc.videoflow.io\";\n        var room = url.split(\"/\")[0];\n        var targetId = url.split(\"/\")[1];\n        if(!targetId || !room) return;\n\n        // create webrtc connection\n        if(self.webrtc){\n            self.webrtc.leaveRoom();\n            self.webrtc.connection.disconnect();\n            self.webrtc.disconnect();\n            delete self.webrtc;\n        }\n        self.webrtc = new WebRTC({\n            target: targetId,\n            url: signalingServer,\n            socketio: {'force new connection':true},\n            stunServer: [{urls: 'stun:stun.l.google.com:19302'}, {\n                username: 'user',\n                credential: 'pass',\n                urls: 'turn:54.198.120.75:3478'\n            }],\n            localVideoEl: '',\n            remoteVideosEl: '',\n            autoRequestMedia: false,\n            debug: false,\n            detectSpeakingEvents: true,\n            autoAdjustMic: false\n        });\n\n        // when it's ready, join if we got a room from the URL\n        self.webrtc.on('readyToCall', () => {\n            self.webrtc.setInfo('videobox', self.webrtc.connection.connection.id, ''); // Store strongId\n\n            if (room) {\n                self.webrtc.joinRoom(room);\n            }\n        });\n        self.webrtc.on('joinedRoom', (room) => {\n            self.startReconnectionInterval();\n            window.console.log('WebRTC - Joined Room: ' + room);\n        });\n        self.webrtc.on('createdPeer', (peer) => {\n            // window.console.log('WebRTC - Peer Created');\n        });\n\n        self.webrtc.on('channelMessage', (peer, label, data) => {\n            // window.console.log('WebRTC - Channel message');\n        });\n\n        //Handle incoming video from target peer\n        // window.console.log('Adding RTC video handler'); // eslint-disable-line no-console\n        self.webrtc.on('videoAdded',  (video, peer) => {\n            // window.console.log('videobox - video added');  // eslint-disable-line no-console\n            self.initVideo(video, peer);\n            self.stopReconnectionInterval();\n        });\n\n        //Handle removing video by target peer\n        self.webrtc.on('videoRemoved',  (video, peer) => {\n            window.console.log('videobox - video removed');  // eslint-disable-line no-console\n            self.clearVideo(video, peer);\n            self.startReconnectionInterval();\n        });\n    }\n\n    get group() {\n        return this.getAttribute(\"group\");\n    }\n    get stream() {\n        return this._streamId;\n    }\n    get src() {\n        return this.getAttribute(\"src\") || \"\";\n    }\n    get signalingServer() {\n        return this.getAttribute(\"signaling-server\") || \"\";\n    }\n    set signalingServer(value) {\n        return this.setAttribute(\"signaling-server\", value);\n    }\n    set src(value) {\n        if(this.isURL(value)){\n            let parts = value.split(\"/\");\n            let server = parts.slice(0,parts.length-2).join('/');\n            this.signalingServer = server;\n            value = parts.slice(parts.length-2).join('/');\n        }\n        this.setAttribute('src', value);\n\n        if (value &&\n            // value !== this._src &&\n            (this.controllerPreview || window.vff.mode !== 'controller-preview')) {\n            clearInterval(this.canvasDrawTimeout);\n            this._src = value;\n            this.initStream(value);\n        }\n    }\n\n\n    expose(){\n        return {\n            Src  : 'src'\n        };\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/videobox.js","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress); // was: relAddr\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort); // was: relPort\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n}\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      params.push(param + '=' + codec.parameters[param]);\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n}\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  caps.headerExtensions.forEach(function(extension) {\n    sdp += SDPUtils.writeExtmap(extension);\n  });\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.split(' ');\n    parts.shift();\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(5), 10);\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  var cname;\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines an returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\nSDPUtils.writeSessionBoilerplate = function() {\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\n// Expose public methods.\nmodule.exports = SDPUtils;\n\n},{}],2:[function(require,module,exports){\n(function (global){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar adapterFactory = require('./adapter_factory.js');\nmodule.exports = adapterFactory({window: global.window});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./adapter_factory.js\":3}],3:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\n// Shimming starts here.\nmodule.exports = function(dependencies) {\n  var window = dependencies && dependencies.window;\n\n  // Utils.\n  var utils = require('./utils');\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  // Export to the adapter global object visible in the browser.\n  var adapter = {\n    browserDetails: browserDetails,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog\n  };\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      utils.shimCreateObjectURL(window);\n      chromeShim.shimSourceObject(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      utils.shimCreateObjectURL(window);\n      firefoxShim.shimSourceObject(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      utils.shimCreateObjectURL(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n      break;\n    case 'safari':\n      if (!safariShim) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimAddStream(window);\n      safariShim.shimOnAddStream(window);\n      safariShim.shimGetUserMedia(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n};\n\n},{\"./chrome/chrome_shim\":4,\"./edge/edge_shim\":6,\"./firefox/firefox_shim\":9,\"./safari/safari_shim\":11,\"./utils\":12}],4:[function(require,module,exports){\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\nvar chromeShim = {\n  shimMediaStream: function(window) {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  },\n\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          var self = this;\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = self.getReceivers().find(function(r) {\n                  return r.track.id === te.track.id;\n                });\n              } else {\n                receiver = {track: te.track};\n              }\n\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.streams = [e.stream];\n              self.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = self.getReceivers().find(function(r) {\n                  return r.track.id === track.id;\n                });\n              } else {\n                receiver = {track: track};\n              }\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimGetSendersWithDtmf: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('getSenders' in window.RTCPeerConnection.prototype) &&\n        'createDTMFSender' in window.RTCPeerConnection.prototype) {\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        return this._senders || [];\n      };\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\n      if (!window.RTCPeerConnection.prototype.addTrack) {\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n          var pc = this;\n          if (pc.signalingState === 'closed') {\n            throw new DOMException(\n              'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n              'InvalidStateError');\n          }\n          var streams = [].slice.call(arguments, 1);\n          if (streams.length !== 1 ||\n              !streams[0].getTracks().find(function(t) {\n                return t === track;\n              })) {\n            // this is not fully correct but all we can manage without\n            // [[associated MediaStreams]] internal slot.\n            throw new DOMException(\n              'The adapter.js addTrack polyfill only supports a single ' +\n              ' stream which is associated with the specified track.',\n              'NotSupportedError');\n          }\n\n          pc._senders = pc._senders || [];\n          var alreadyExists = pc._senders.find(function(t) {\n            return t.track === track;\n          });\n          if (alreadyExists) {\n            throw new DOMException('Track already exists.',\n                'InvalidAccessError');\n          }\n\n          pc._streams = pc._streams || {};\n          var oldStream = pc._streams[stream.id];\n          if (oldStream) {\n            oldStream.addTrack(track);\n            pc.removeStream(oldStream);\n            pc.addStream(oldStream);\n          } else {\n            var newStream = new window.MediaStream([track]);\n            pc._streams[stream.id] = newStream;\n            pc.addStream(newStream);\n          }\n\n          var sender = {\n            track: track,\n            get dtmf() {\n              if (this._dtmf === undefined) {\n                if (track.kind === 'audio') {\n                  this._dtmf = pc.createDTMFSender(track);\n                } else {\n                  this._dtmf = null;\n                }\n              }\n              return this._dtmf;\n            }\n          };\n          pc._senders.push(sender);\n          return sender;\n        };\n      }\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origAddStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          pc._senders.push({\n            track: track,\n            get dtmf() {\n              if (this._dtmf === undefined) {\n                if (track.kind === 'audio') {\n                  this._dtmf = pc.createDTMFSender(track);\n                } else {\n                  this._dtmf = null;\n                }\n              }\n              return this._dtmf;\n            }\n          });\n        });\n      };\n\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origRemoveStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          var sender = pc._senders.find(function(s) {\n            return s.track === track;\n          });\n          if (sender) {\n            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n          }\n        });\n      };\n    }\n  },\n\n  shimSourceObject: function(window) {\n    var URL = window && window.URL;\n\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return undefined;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        // Translate iceTransportPolicy to iceTransports,\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n        logging('PeerConnection');\n        if (pcConfig && pcConfig.iceTransportPolicy) {\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n        }\n\n        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.webkitRTCPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      if (window.webkitRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.webkitRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n    } else {\n      // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n      var OrigPeerConnection = window.RTCPeerConnection;\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (pcConfig && pcConfig.iceServers) {\n          var newIceServers = [];\n          for (var i = 0; i < pcConfig.iceServers.length; i++) {\n            var server = pcConfig.iceServers[i];\n            if (!server.hasOwnProperty('urls') &&\n                server.hasOwnProperty('url')) {\n              console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n              server = JSON.parse(JSON.stringify(server));\n              server.urls = server.url;\n              newIceServers.push(server);\n            } else {\n              newIceServers.push(pcConfig.iceServers[i]);\n            }\n          }\n          pcConfig.iceServers = newIceServers;\n        }\n        return new OrigPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(selector,\n        successCallback, errorCallback) {\n      var self = this;\n      var args = arguments;\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 ||\n          typeof arguments[0] !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function(report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function(name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        return new Map(Object.keys(stats).map(function(key) {\n          return [key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function(response) {\n          args[1](makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_,\n          arguments[0]]);\n      }\n\n      // promise-support\n      return new Promise(function(resolve, reject) {\n        origGetStats.apply(self, [\n          function(response) {\n            resolve(makeMapStats(fixChromeStats_(response)));\n          }, reject]);\n      }).then(successCallback, errorCallback);\n    };\n\n    // add promise support -- natively available in Chrome 51\n    if (browserDetails.version < 51) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = window.RTCPeerConnection.prototype[method];\n            window.RTCPeerConnection.prototype[method] = function() {\n              var args = arguments;\n              var self = this;\n              var promise = new Promise(function(resolve, reject) {\n                nativeMethod.apply(self, [args[0], resolve, reject]);\n              });\n              if (args.length < 2) {\n                return promise;\n              }\n              return promise.then(function() {\n                args[1].apply(null, []);\n              },\n              function(err) {\n                if (args.length >= 3) {\n                  args[2].apply(null, [err]);\n                }\n              });\n            };\n          });\n    }\n\n    // promise support for createOffer and createAnswer. Available (without\n    // bugs) since M52: crbug/619289\n    if (browserDetails.version < 52) {\n      ['createOffer', 'createAnswer'].forEach(function(method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          var self = this;\n          if (arguments.length < 1 || (arguments.length === 1 &&\n              typeof arguments[0] === 'object')) {\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [resolve, reject, opts]);\n            });\n          }\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimMediaStream: chromeShim.shimMediaStream,\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimGetSendersWithDtmf: chromeShim.shimGetSendersWithDtmf,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n},{\"../utils.js\":12,\"./getusermedia\":5}],5:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function(constraints, func) {\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      var remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      var getSupportedFacingModeLies = browserDetails.version < 61;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(function(devices) {\n            devices = devices.filter(function(d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function(d) {\n              return matches.some(function(match) {\n                return d.label.toLowerCase().indexOf(match) !== -1;\n              });\n            });\n            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        InvalidStateError: 'NotReadableError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotReadableError',\n        MediaDeviceKillSwitchOn: 'NotReadableError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraintName,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function(c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n        onError(shimError_(e));\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return window.MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                kind: kinds[device.kind],\n                deviceId: device.id,\n                groupId: ''};\n            }));\n          });\n        });\n      },\n      getSupportedConstraints: function() {\n        return {\n          deviceId: true, echoCancellation: true, facingMode: true,\n          frameRate: true, height: true, width: true\n        };\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, function(c) {\n        return origGetUserMedia(c).then(function(stream) {\n          if (c.audio && !stream.getAudioTracks().length ||\n              c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function(track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n\n},{\"../utils.js\":12}],6:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar shimRTCPeerConnection = require('./rtcpeerconnection_shim');\n\nmodule.exports = {\n  shimGetUserMedia: require('./getusermedia'),\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n      // this adds an additional event listener to MediaStrackTrack that signals\n      // when a tracks enabled property was changed. Workaround for a bug in\n      // addStream, see below. No longer required in 15025+\n      if (browserDetails.version < 15025) {\n        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n            window.MediaStreamTrack.prototype, 'enabled');\n        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n          set: function(value) {\n            origMSTEnabled.set.call(this, value);\n            var ev = new Event('enabled');\n            ev.enabled = value;\n            this.dispatchEvent(ev);\n          }\n        });\n      }\n    }\n    window.RTCPeerConnection =\n        shimRTCPeerConnection(window, browserDetails.version);\n  },\n  shimReplaceTrack: function(window) {\n    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n    if (window.RTCRtpSender &&\n        !('replaceTrack' in window.RTCRtpSender.prototype)) {\n      window.RTCRtpSender.prototype.replaceTrack =\n          window.RTCRtpSender.prototype.setTrack;\n    }\n  }\n};\n\n},{\"../utils\":12,\"./getusermedia\":7,\"./rtcpeerconnection_shim\":8}],7:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var navigator = window && window.navigator;\n\n  var shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(function(e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n};\n\n},{}],8:[function(require,module,exports){\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\n// sort tracks such that they follow an a-v-a-v...\n// pattern.\nfunction sortTracks(tracks) {\n  var audioTracks = tracks.filter(function(track) {\n    return track.kind === 'audio';\n  });\n  var videoTracks = tracks.filter(function(track) {\n    return track.kind === 'video';\n  });\n  tracks = [];\n  while (audioTracks.length || videoTracks.length) {\n    if (audioTracks.length) {\n      tracks.push(audioTracks.shift());\n    }\n    if (videoTracks.length) {\n      tracks.push(videoTracks.shift());\n    }\n  }\n  return tracks;\n}\n\n// Edge does not like\n// 1) stun:\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n    return false;\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  var RTCPeerConnection = function(config) {\n    var self = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          self[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.needNegotiation = false;\n\n    this.onicecandidate = null;\n    this.onaddstream = null;\n    this.ontrack = null;\n    this.onremovestream = null;\n    this.onsignalingstatechange = null;\n    this.oniceconnectionstatechange = null;\n    this.onicegatheringstatechange = null;\n    this.onnegotiationneeded = null;\n    this.ondatachannel = null;\n    this.canTrickleIceCandidates = null;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n    this.getLocalStreams = function() {\n      return self.localStreams;\n    };\n    this.getRemoteStreams = function() {\n      return self.remoteStreams;\n    };\n\n    this.localDescription = new window.RTCSessionDescription({\n      type: '',\n      sdp: ''\n    });\n    this.remoteDescription = new window.RTCSessionDescription({\n      type: '',\n      sdp: ''\n    });\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    this.iceOptions = {\n      gatherPolicy: 'all',\n      iceServers: []\n    };\n    if (config && config.iceTransportPolicy) {\n      switch (config.iceTransportPolicy) {\n        case 'all':\n        case 'relay':\n          this.iceOptions.gatherPolicy = config.iceTransportPolicy;\n          break;\n        default:\n          // don't set iceTransportPolicy.\n          break;\n      }\n    }\n    this.usingBundle = config && config.bundlePolicy === 'max-bundle';\n\n    if (config && config.iceServers) {\n      this.iceOptions.iceServers = filterIceServers(config.iceServers,\n          edgeVersion);\n    }\n    this._config = config || {};\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    // since the iceGatherer is currently created in createOffer but we\n    // must not emit candidates until after setLocalDescription we buffer\n    // them in this array.\n    this._localIceCandidatesBuffer = [];\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this.dispatchEvent(event);\n    if (this.onicegatheringstatechange !== null) {\n      this.onicegatheringstatechange(event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitBufferedCandidates = function() {\n    var self = this;\n    var sections = SDPUtils.splitSections(self.localDescription.sdp);\n    // FIXME: need to apply ice candidates in a way which is async but\n    // in-order\n    this._localIceCandidatesBuffer.forEach(function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      if (end) {\n        for (var j = 1; j < sections.length; j++) {\n          if (sections[j].indexOf('\\r\\na=end-of-candidates\\r\\n') === -1) {\n            sections[j] += 'a=end-of-candidates\\r\\n';\n          }\n        }\n      } else {\n        sections[event.candidate.sdpMLineIndex + 1] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      }\n      self.localDescription.sdp = sections.join('');\n      self.dispatchEvent(event);\n      if (self.onicecandidate !== null) {\n        self.onicecandidate(event);\n      }\n      if (!event.candidate && self.iceGatheringState !== 'complete') {\n        var complete = self.transceivers.every(function(transceiver) {\n          return transceiver.iceGatherer &&\n              transceiver.iceGatherer.state === 'completed';\n        });\n        if (complete && self.iceGatheringStateChange !== 'complete') {\n          self.iceGatheringState = 'complete';\n          self._emitGatheringStateChange();\n        }\n      }\n    });\n    this._localIceCandidatesBuffer = [];\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  // internal helper to create a transceiver object.\n  // (whih is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    this.transceivers.push(transceiver);\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n\n    this._maybeFireNegotiationNeeded();\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var self = this;\n    if (edgeVersion >= 15025) {\n      this.localStreams.push(stream);\n      stream.getTracks().forEach(function(track) {\n        self.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        self.addTrack(track, clonedStream);\n      });\n      this.localStreams.push(clonedStream);\n    }\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var idx = this.localStreams.indexOf(stream);\n    if (idx > -1) {\n      this.localStreams.splice(idx, 1);\n      this._maybeFireNegotiationNeeded();\n    }\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n  // Create ICE gatherer and hook it up.\n  RTCPeerConnection.prototype._createIceGatherer = function(mid,\n      sdpMLineIndex) {\n    var self = this;\n    var iceGatherer = new window.RTCIceGatherer(self.iceOptions);\n    iceGatherer.onlocalcandidate = function(evt) {\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      var end = !cand || Object.keys(cand).length === 0;\n      // Edge emits an empty object for RTCIceCandidateComplete\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === undefined) {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        event.candidate.candidate = SDPUtils.writeCandidate(cand);\n      }\n\n      // update local description.\n      var sections = SDPUtils.splitSections(self.localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex + 1] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex + 1] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      self.localDescription.sdp = sections.join('');\n      var transceivers = self._pendingOffer ? self._pendingOffer :\n          self.transceivers;\n      var complete = transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      // Emit candidate if localDescription is set.\n      // Also emits null candidate when all gatherers are complete.\n      switch (self.iceGatheringState) {\n        case 'new':\n          if (!end) {\n            self._localIceCandidatesBuffer.push(event);\n          }\n          if (end && complete) {\n            self._localIceCandidatesBuffer.push(\n                new Event('icecandidate'));\n          }\n          break;\n        case 'gathering':\n          self._emitBufferedCandidates();\n          if (!end) {\n            self.dispatchEvent(event);\n            if (self.onicecandidate !== null) {\n              self.onicecandidate(event);\n            }\n          }\n          if (complete) {\n            self.dispatchEvent(new Event('icecandidate'));\n            if (self.onicecandidate !== null) {\n              self.onicecandidate(new Event('icecandidate'));\n            }\n            self.iceGatheringState = 'complete';\n            self._emitGatheringStateChange();\n          }\n          break;\n        case 'complete':\n          // should not happen... currently!\n          break;\n        default: // no-op.\n          break;\n      }\n    };\n    return iceGatherer;\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var self = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      self._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      self._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      self._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlssttatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      params.encodings = transceiver.recvEncodingParameters;\n      params.rtcp = {\n        cname: transceiver.rtcpParameters.cname,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var self = this;\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, this.signalingState)) {\n      var e = new Error('Can not set local ' + description.type +\n          ' in state ' + this.signalingState);\n      e.name = 'InvalidStateError';\n      if (arguments.length > 2 && typeof arguments[2] === 'function') {\n        window.setTimeout(arguments[2], 0, e);\n      }\n      return Promise.reject(e);\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // FIXME: What was the purpose of this empty if statement?\n      // if (!this._pendingOffer) {\n      // } else {\n      if (this._pendingOffer) {\n        // VERY limited support for SDP munging. Limited to:\n        // * changing the order of codecs\n        sections = SDPUtils.splitSections(description.sdp);\n        sessionpart = sections.shift();\n        sections.forEach(function(mediaSection, sdpMLineIndex) {\n          var caps = SDPUtils.parseRtpParameters(mediaSection);\n          self._pendingOffer[sdpMLineIndex].localCapabilities = caps;\n        });\n        this.transceivers = this._pendingOffer;\n        delete this._pendingOffer;\n      }\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = self.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        var rejected = SDPUtils.isRejected(mediaSection);\n\n        if (!rejected && !transceiver.isDatachannel) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!self.usingBundle || sdpMLineIndex === 0) {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                isIceLite ? 'controlling' : 'controlled');\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          self._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    this.localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    switch (description.type) {\n      case 'offer':\n        this._updateSignalingState('have-local-offer');\n        break;\n      case 'answer':\n        this._updateSignalingState('stable');\n        break;\n      default:\n        throw new TypeError('unsupported type \"' + description.type +\n            '\"');\n    }\n\n    // If a success callback was provided, emit ICE candidates after it\n    // has been executed. Otherwise, emit callback after the Promise is\n    // resolved.\n    var hasCallback = arguments.length > 1 &&\n      typeof arguments[1] === 'function';\n    if (hasCallback) {\n      var cb = arguments[1];\n      window.setTimeout(function() {\n        cb();\n        if (self.iceGatheringState === 'new') {\n          self.iceGatheringState = 'gathering';\n          self._emitGatheringStateChange();\n        }\n        self._emitBufferedCandidates();\n      }, 0);\n    }\n    var p = Promise.resolve();\n    p.then(function() {\n      if (!hasCallback) {\n        if (self.iceGatheringState === 'new') {\n          self.iceGatheringState = 'gathering';\n          self._emitGatheringStateChange();\n        }\n        // Usually candidates will be emitted earlier.\n        window.setTimeout(self._emitBufferedCandidates.bind(self), 500);\n      }\n    });\n    return p;\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var self = this;\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, this.signalingState)) {\n      var e = new Error('Can not set remote ' + description.type +\n          ' in state ' + this.signalingState);\n      e.name = 'InvalidStateError';\n      if (arguments.length > 2 && typeof arguments[2] === 'function') {\n        window.setTimeout(arguments[2], 0, e);\n      }\n      return Promise.reject(e);\n    }\n\n    var streams = {};\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    this.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      this.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      this.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      var rejected = SDPUtils.isRejected(mediaSection);\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (kind === 'application' && protocol === 'DTLS/SCTP') {\n        self.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          isDatachannel: true\n        };\n        return;\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === '1' || cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          self.transceivers[sdpMLineIndex]) {\n        self._disposeIceAndDtlsTransports(sdpMLineIndex);\n        self.transceivers[sdpMLineIndex].iceGatherer =\n            self.transceivers[0].iceGatherer;\n        self.transceivers[sdpMLineIndex].iceTransport =\n            self.transceivers[0].iceTransport;\n        self.transceivers[sdpMLineIndex].dtlsTransport =\n            self.transceivers[0].dtlsTransport;\n        if (self.transceivers[sdpMLineIndex].rtpSender) {\n          self.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              self.transceivers[0].dtlsTransport);\n        }\n        if (self.transceivers[sdpMLineIndex].rtpReceiver) {\n          self.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              self.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = self.transceivers[sdpMLineIndex] ||\n            self._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = usingBundle && sdpMLineIndex > 0 ?\n              self.transceivers[0].iceGatherer :\n              self._createIceGatherer(mid, sdpMLineIndex);\n        }\n\n        if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n          transceiver.iceTransport.setRemoteCandidates(cands);\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          rtpReceiver = new window.RTCRtpReceiver(transceiver.dtlsTransport,\n              kind);\n\n          track = rtpReceiver.track;\n          // FIXME: does not work with Plan B.\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n              Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                get: function() {\n                  return remoteMsid.stream;\n                }\n              });\n            }\n            Object.defineProperty(track, 'id', {\n              get: function() {\n                return remoteMsid.track;\n              }\n            });\n            streams[remoteMsid.stream].addTrack(track);\n            receiverList.push([track, rtpReceiver,\n              streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            streams.default.addTrack(track);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        self._transceive(self.transceivers[sdpMLineIndex],\n            false,\n            direction === 'sendrecv' || direction === 'sendonly');\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = self.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        self.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        self.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        self.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if ((isIceLite || isComplete) && cands.length) {\n          iceTransport.setRemoteCandidates(cands);\n        }\n        if (!usingBundle || sdpMLineIndex === 0) {\n          iceTransport.start(iceGatherer, remoteIceParameters,\n              'controlling');\n          dtlsTransport.start(remoteDtlsParameters);\n        }\n\n        self._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            streams[remoteMsid.stream].addTrack(track);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            streams.default.addTrack(track);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    this.remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    switch (description.type) {\n      case 'offer':\n        this._updateSignalingState('have-remote-offer');\n        break;\n      case 'answer':\n        this._updateSignalingState('stable');\n        break;\n      default:\n        throw new TypeError('unsupported type \"' + description.type +\n            '\"');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        self.remoteStreams.push(stream);\n        var event = new Event('addstream');\n        event.stream = stream;\n        self.dispatchEvent(event);\n        if (self.onaddstream !== null) {\n          window.setTimeout(function() {\n            self.onaddstream(event);\n          }, 0);\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          var trackEvent = new Event('track');\n          trackEvent.track = track;\n          trackEvent.receiver = receiver;\n          trackEvent.streams = [stream];\n          self.dispatchEvent(trackEvent);\n          if (self.ontrack !== null) {\n            window.setTimeout(function() {\n              self.ontrack(trackEvent);\n            }, 0);\n          }\n        });\n      }\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(self && self.transceivers)) {\n        return;\n      }\n      self.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    if (arguments.length > 1 && typeof arguments[1] === 'function') {\n      window.setTimeout(arguments[1], 0);\n    }\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this.dispatchEvent(event);\n    if (this.onsignalingstatechange !== null) {\n      this.onsignalingstatechange(event);\n    }\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var self = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (self.needNegotiation === false) {\n        return;\n      }\n      self.needNegotiation = false;\n      var event = new Event('negotiationneeded');\n      self.dispatchEvent(event);\n      if (self.onnegotiationneeded !== null) {\n        self.onnegotiationneeded(event);\n      }\n    }, 0);\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var self = this;\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      states[transceiver.iceTransport.state]++;\n      states[transceiver.dtlsTransport.state]++;\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0 || states.checking > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0 || states.completed > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== self.iceConnectionState) {\n      self.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this.dispatchEvent(event);\n      if (this.oniceconnectionstatechange !== null) {\n        this.oniceconnectionstatechange(event);\n      }\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var self = this;\n    if (this._pendingOffer) {\n      throw new Error('createOffer called while there is a pending offer.');\n    }\n    var offerOptions;\n    if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n      offerOptions = arguments[0];\n    } else if (arguments.length === 3) {\n      offerOptions = arguments[2];\n    }\n\n    var numAudioTracks = this.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = this.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        this._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        this._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n    // reorder tracks\n    var transceivers = sortTracks(this.transceivers);\n\n    var sdp = SDPUtils.writeSessionBoilerplate();\n    transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = self.usingBundle && sdpMLineIndex > 0 ?\n            transceivers[0].iceGatherer :\n            self._createIceGatherer(mid, sdpMLineIndex);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video') {\n          sendEncodingParameters[0].rtx = {\n            ssrc: (2 * sdpMLineIndex + 1) * 1001 + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n          transceiver.dtlsTransport,\n          kind\n        );\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (this._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += SDPUtils.writeMediaSection(transceiver,\n          transceiver.localCapabilities, 'offer', transceiver.stream);\n      sdp += 'a=rtcp-rsize\\r\\n';\n    });\n\n    this._pendingOffer = transceivers;\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    if (arguments.length && typeof arguments[0] === 'function') {\n      window.setTimeout(arguments[0], 0, desc);\n    }\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var sdp = SDPUtils.writeSessionBoilerplate();\n    if (this.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (transceiver.isDatachannel) {\n        sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n' +\n            'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video') {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: (2 * sdpMLineIndex + 2) * 1001 + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += SDPUtils.writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    if (arguments.length && typeof arguments[0] === 'function') {\n      window.setTimeout(arguments[0], 0, desc);\n    }\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    if (!candidate) {\n      for (var j = 0; j < this.transceivers.length; j++) {\n        this.transceivers[j].iceTransport.addRemoteCandidate({});\n        if (this.usingBundle) {\n          return Promise.resolve();\n        }\n      }\n    } else {\n      var mLineIndex = candidate.sdpMLineIndex;\n      if (candidate.sdpMid) {\n        for (var i = 0; i < this.transceivers.length; i++) {\n          if (this.transceivers[i].mid === candidate.sdpMid) {\n            mLineIndex = i;\n            break;\n          }\n        }\n      }\n      var transceiver = this.transceivers[mLineIndex];\n      if (transceiver) {\n        var cand = Object.keys(candidate.candidate).length > 0 ?\n            SDPUtils.parseCandidate(candidate.candidate) : {};\n        // Ignore Chrome's invalid candidates since Edge does not like them.\n        if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n          return Promise.resolve();\n        }\n        // Ignore RTCP candidates, we assume RTCP-MUX.\n        if (cand.component &&\n            !(cand.component === '1' || cand.component === 1)) {\n          return Promise.resolve();\n        }\n        transceiver.iceTransport.addRemoteCandidate(cand);\n\n        // update the remoteDescription.\n        var sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n        sections[mLineIndex + 1] += (cand.type ? candidate.candidate.trim()\n            : 'a=end-of-candidates') + '\\r\\n';\n        this.remoteDescription.sdp = sections.join('');\n      }\n    }\n    if (arguments.length > 1 && typeof arguments[1] === 'function') {\n      window.setTimeout(arguments[1], 0);\n    }\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.getStats = function() {\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n        'dtlsTransport'].forEach(function(method) {\n          if (transceiver[method]) {\n            promises.push(transceiver[method].getStats());\n          }\n        });\n    });\n    var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n        arguments[1];\n    var fixStatsType = function(stat) {\n      return {\n        inboundrtp: 'inbound-rtp',\n        outboundrtp: 'outbound-rtp',\n        candidatepair: 'candidate-pair',\n        localcandidate: 'local-candidate',\n        remotecandidate: 'remote-candidate'\n      }[stat.type] || stat.type;\n    };\n    return new Promise(function(resolve) {\n      // shim getStats with maplike support\n      var results = new Map();\n      Promise.all(promises).then(function(res) {\n        res.forEach(function(result) {\n          Object.keys(result).forEach(function(id) {\n            result[id].type = fixStatsType(result[id]);\n            results.set(id, result[id]);\n          });\n        });\n        if (cb) {\n          window.setTimeout(cb, 0, results);\n        }\n        resolve(results);\n      });\n    });\n  };\n  return RTCPeerConnection;\n};\n\n},{\"sdp\":1}],9:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\n\nvar firefoxShim = {\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n        window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (window.mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = window.mozRTCSessionDescription;\n      window.RTCIceCandidate = window.mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function(stats) {\n      var map = new Map();\n      Object.keys(stats).forEach(function(key) {\n        map.set(key, stats[key]);\n        map[key] = stats[key];\n      });\n      return map;\n    };\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(\n      selector,\n      onSucc,\n      onErr\n    ) {\n      return nativeGetStats.apply(this, [selector || null])\n        .then(function(stats) {\n          if (browserDetails.version < 48) {\n            stats = makeMapStats(stats);\n          }\n          if (browserDetails.version < 53 && !onSucc) {\n            // Shim only promise getStats with spec-hyphens in type names\n            // Leave callback version alone; misc old uses of forEach before Map\n            try {\n              stats.forEach(function(stat) {\n                stat.type = modernStatsTypes[stat.type] || stat.type;\n              });\n            } catch (e) {\n              if (e.name !== 'TypeError') {\n                throw e;\n              }\n              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n              stats.forEach(function(stat, i) {\n                stats.set(i, Object.assign({}, stat, {\n                  type: modernStatsTypes[stat.type] || stat.type\n                }));\n              });\n            }\n          }\n          return stats;\n        })\n        .then(onSucc, onErr);\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n},{\"../utils\":12,\"./getusermedia\":10}],10:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        InternalError: 'NotReadableError',\n        NotSupportedError: 'TypeError',\n        PermissionDeniedError: 'NotAllowedError',\n        SecurityError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: {\n        'The operation is insecure.': 'The request is not allowed by the ' +\n        'user agent or the platform in the current context.'\n      }[e.message] || e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n      onError(shimError_(e));\n    });\n  };\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      getUserMedia_(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n  if (browserDetails.version < 49) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).then(function(stream) {\n        // Work around https://bugzil.la/802326\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(function(track) {\n            track.stop();\n          });\n          throw new DOMException('The object can not be found here.',\n                                 'NotFoundError');\n        }\n        return stream;\n      }, function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  }\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    if (browserDetails.version < 44) {\n      return getUserMedia_(constraints, onSuccess, onError);\n    }\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    console.warn('navigator.getUserMedia has been replaced by ' +\n                 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n};\n\n},{\"../utils\":12}],11:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimAddStream: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('addStream' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        var self = this;\n        stream.getTracks().forEach(function(track) {\n          self.addTrack(track, stream);\n        });\n      };\n    }\n  },\n  shimOnAddStream: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function() {\n          return this._onaddstream;\n        },\n        set: function(f) {\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n            this.removeEventListener('track', this._onaddstreampoly);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            var stream = e.streams[0];\n            if (!this._streams) {\n              this._streams = [];\n            }\n            if (this._streams.indexOf(stream) >= 0) {\n              return;\n            }\n            this._streams.push(stream);\n            var event = new Event('addstream');\n            event.stream = e.streams[0];\n            this.dispatchEvent(event);\n          }.bind(this));\n        }\n      });\n    }\n  },\n  shimCallbacksAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    var prototype = window.RTCPeerConnection.prototype;\n    var createOffer = prototype.createOffer;\n    var createAnswer = prototype.createAnswer;\n    var setLocalDescription = prototype.setLocalDescription;\n    var setRemoteDescription = prototype.setRemoteDescription;\n    var addIceCandidate = prototype.addIceCandidate;\n\n    prototype.createOffer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    prototype.createAnswer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    var withCallback = function(description, successCallback, failureCallback) {\n      var promise = setLocalDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setLocalDescription = withCallback;\n\n    withCallback = function(description, successCallback, failureCallback) {\n      var promise = setRemoteDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setRemoteDescription = withCallback;\n\n    withCallback = function(candidate, successCallback, failureCallback) {\n      var promise = addIceCandidate.apply(this, [candidate]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.addIceCandidate = withCallback;\n  },\n  shimGetUserMedia: function(window) {\n    var navigator = window && window.navigator;\n\n    if (!navigator.getUserMedia) {\n      if (navigator.webkitGetUserMedia) {\n        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n      } else if (navigator.mediaDevices &&\n          navigator.mediaDevices.getUserMedia) {\n        navigator.getUserMedia = function(constraints, cb, errcb) {\n          navigator.mediaDevices.getUserMedia(constraints)\n          .then(cb, errcb);\n        }.bind(navigator);\n      }\n    }\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimCallbacksAPI: safariShim.shimCallbacksAPI,\n  shimAddStream: safariShim.shimAddStream,\n  shimOnAddStream: safariShim.shimOnAddStream,\n  shimGetUserMedia: safariShim.shimGetUserMedia\n  // TODO\n  // shimPeerConnection: safariShim.shimPeerConnection\n};\n\n},{}],12:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  detectBrowser: function(window) {\n    var navigator = window && window.navigator;\n\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/(\\d+)\\./, 2);\n      } else { // Safari (in an unpublished version) or unknown webkit-based.\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/(\\d+)\\./, 1);\n        } else { // unknown webkit-based browser.\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n        // Safari, with webkitGetUserMedia removed.\n      result.browser = 'safari';\n      result.version = this.extractVersion(navigator.userAgent,\n          /AppleWebKit\\/(\\d+)\\./, 1);\n    } else { // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  },\n\n  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n  shimCreateObjectURL: function(window) {\n    var URL = window && window.URL;\n\n    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n          'srcObject' in window.HTMLMediaElement.prototype)) {\n      // Only shim CreateObjectURL using srcObject if srcObject exists.\n      return undefined;\n    }\n\n    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n    var streams = new Map(), newId = 0;\n\n    URL.createObjectURL = function(stream) {\n      if ('getTracks' in stream) {\n        var url = 'polyblob:' + (++newId);\n        streams.set(url, stream);\n        console.log('URL.createObjectURL(stream) is deprecated! ' +\n                    'Use elem.srcObject = stream instead!');\n        return url;\n      }\n      return nativeCreateObjectURL(stream);\n    };\n    URL.revokeObjectURL = function(url) {\n      nativeRevokeObjectURL(url);\n      streams.delete(url);\n    };\n\n    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                                              'src');\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n      get: function() {\n        return dsc.get.apply(this);\n      },\n      set: function(url) {\n        this.srcObject = streams.get(url) || null;\n        return dsc.set.apply(this, [url]);\n      }\n    });\n\n    var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n    window.HTMLMediaElement.prototype.setAttribute = function() {\n      if (arguments.length === 2 &&\n          ('' + arguments[0]).toLowerCase() === 'src') {\n        this.srcObject = streams.get(arguments[1]) || null;\n      }\n      return nativeSetAttribute.apply(this, arguments);\n    };\n  }\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  disableLog: utils.disableLog,\n  extractVersion: utils.extractVersion,\n  shimCreateObjectURL: utils.shimCreateObjectURL,\n  detectBrowser: utils.detectBrowser.bind(utils)\n};\n\n},{}]},{},[2])(2)\n});\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.SimpleWebRTC = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n\n},{}],2:[function(require,module,exports){\n/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n\n},{}],3:[function(require,module,exports){\nvar adapter = require('webrtc-adapter');\nmodule.exports = function (stream, el, options) {\n    var item;\n    var URL = window.URL;\n    var element = el;\n    var opts = {\n        autoplay: true,\n        mirror: false,\n        muted: false,\n        audio: false,\n        disableContextMenu: false\n    };\n\n    if (options) {\n        for (item in options) {\n            opts[item] = options[item];\n        }\n    }\n\n    if (!element) {\n        element = document.createElement(opts.audio ? 'audio' : 'video');\n    } else if (element.tagName.toLowerCase() === 'audio') {\n        opts.audio = true;\n    }\n\n    if (opts.disableContextMenu) {\n        element.oncontextmenu = function (e) {\n            e.preventDefault();\n        };\n    }\n\n    if (opts.autoplay) element.autoplay = 'autoplay';\n    if (opts.muted) element.muted = true;\n    if (!opts.audio && opts.mirror) {\n        ['', 'moz', 'webkit', 'o', 'ms'].forEach(function (prefix) {\n            var styleName = prefix ? prefix + 'Transform' : 'transform';\n            element.style[styleName] = 'scaleX(-1)';\n        });\n    }\n\n    element.srcObject = stream;\n    return element;\n};\n\n},{\"webrtc-adapter\":4}],4:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\n// Shimming starts here.\n(function() {\n  // Utils.\n  var logging = require('./utils').log;\n  var browserDetails = require('./utils').browserDetails;\n  // Export to the adapter global object visible in the browser.\n  module.exports.browserDetails = browserDetails;\n  module.exports.extractVersion = require('./utils').extractVersion;\n  module.exports.disableLog = require('./utils').disableLog;\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'opera': // fallthrough as it uses chrome shims\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection) {\n        logging('Chrome shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia();\n      chromeShim.shimMediaStream();\n      chromeShim.shimSourceObject();\n      chromeShim.shimPeerConnection();\n      chromeShim.shimOnTrack();\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection) {\n        logging('Firefox shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia();\n      firefoxShim.shimSourceObject();\n      firefoxShim.shimPeerConnection();\n      firefoxShim.shimOnTrack();\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection) {\n        logging('MS edge shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia();\n      edgeShim.shimPeerConnection();\n      break;\n    case 'safari':\n      if (!safariShim) {\n        logging('Safari shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = safariShim;\n\n      safariShim.shimGetUserMedia();\n      break;\n    default:\n      logging('Unsupported browser!');\n  }\n})();\n\n},{\"./chrome/chrome_shim\":5,\"./edge/edge_shim\":7,\"./firefox/firefox_shim\":9,\"./safari/safari_shim\":11,\"./utils\":12}],5:[function(require,module,exports){\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\nvar browserDetails = require('../utils.js').browserDetails;\n\nvar chromeShim = {\n  shimMediaStream: function() {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  },\n\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          var self = this;\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = {track: te.track};\n              event.streams = [e.stream];\n              self.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function() {\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    // The RTCPeerConnection object.\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n      // Translate iceTransportPolicy to iceTransports,\n      // see https://code.google.com/p/webrtc/issues/detail?id=4869\n      logging('PeerConnection');\n      if (pcConfig && pcConfig.iceTransportPolicy) {\n        pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n      }\n\n      var pc = new webkitRTCPeerConnection(pcConfig, pcConstraints);\n      var origGetStats = pc.getStats.bind(pc);\n      pc.getStats = function(selector, successCallback, errorCallback) {\n        var self = this;\n        var args = arguments;\n\n        // If selector is a function then we are in the old style stats so just\n        // pass back the original getStats format to avoid breaking old users.\n        if (arguments.length > 0 && typeof selector === 'function') {\n          return origGetStats(selector, successCallback);\n        }\n\n        var fixChromeStats_ = function(response) {\n          var standardReport = {};\n          var reports = response.result();\n          reports.forEach(function(report) {\n            var standardStats = {\n              id: report.id,\n              timestamp: report.timestamp,\n              type: report.type\n            };\n            report.names().forEach(function(name) {\n              standardStats[name] = report.stat(name);\n            });\n            standardReport[standardStats.id] = standardStats;\n          });\n\n          return standardReport;\n        };\n\n        // shim getStats with maplike support\n        var makeMapStats = function(stats, legacyStats) {\n          var map = new Map(Object.keys(stats).map(function(key) {\n            return[key, stats[key]];\n          }));\n          legacyStats = legacyStats || stats;\n          Object.keys(legacyStats).forEach(function(key) {\n            map[key] = legacyStats[key];\n          });\n          return map;\n        };\n\n        if (arguments.length >= 2) {\n          var successCallbackWrapper_ = function(response) {\n            args[1](makeMapStats(fixChromeStats_(response)));\n          };\n\n          return origGetStats.apply(this, [successCallbackWrapper_,\n              arguments[0]]);\n        }\n\n        // promise-support\n        return new Promise(function(resolve, reject) {\n          if (args.length === 1 && typeof selector === 'object') {\n            origGetStats.apply(self, [\n              function(response) {\n                resolve(makeMapStats(fixChromeStats_(response)));\n              }, reject]);\n          } else {\n            // Preserve legacy chrome stats only on legacy access of stats obj\n            origGetStats.apply(self, [\n              function(response) {\n                resolve(makeMapStats(fixChromeStats_(response),\n                    response.result()));\n              }, reject]);\n          }\n        }).then(successCallback, errorCallback);\n      };\n\n      return pc;\n    };\n    window.RTCPeerConnection.prototype = webkitRTCPeerConnection.prototype;\n\n    // wrap static methods. Currently just generateCertificate.\n    if (webkitRTCPeerConnection.generateCertificate) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return webkitRTCPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    ['createOffer', 'createAnswer'].forEach(function(method) {\n      var nativeMethod = webkitRTCPeerConnection.prototype[method];\n      webkitRTCPeerConnection.prototype[method] = function() {\n        var self = this;\n        if (arguments.length < 1 || (arguments.length === 1 &&\n            typeof arguments[0] === 'object')) {\n          var opts = arguments.length === 1 ? arguments[0] : undefined;\n          return new Promise(function(resolve, reject) {\n            nativeMethod.apply(self, [resolve, reject, opts]);\n          });\n        }\n        return nativeMethod.apply(this, arguments);\n      };\n    });\n\n    // add promise support -- natively available in Chrome 51\n    if (browserDetails.version < 51) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = webkitRTCPeerConnection.prototype[method];\n            webkitRTCPeerConnection.prototype[method] = function() {\n              var args = arguments;\n              var self = this;\n              var promise = new Promise(function(resolve, reject) {\n                nativeMethod.apply(self, [args[0], resolve, reject]);\n              });\n              if (args.length < 2) {\n                return promise;\n              }\n              return promise.then(function() {\n                args[1].apply(null, []);\n              },\n              function(err) {\n                if (args.length >= 3) {\n                  args[2].apply(null, [err]);\n                }\n              });\n            };\n          });\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = webkitRTCPeerConnection.prototype[method];\n          webkitRTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        RTCPeerConnection.prototype.addIceCandidate;\n    RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimMediaStream: chromeShim.shimMediaStream,\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n},{\"../utils.js\":12,\"./getusermedia\":6}],6:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\n\n// Expose public methods.\nmodule.exports = function() {\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function(constraints, func) {\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && constraints.audio) {\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile, where it defaults to \"user\".\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode)) {\n        delete constraints.video.facingMode;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          // Look for \"back\" in label, or use last cam (typically back cam).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(function(devices) {\n            devices = devices.filter(function(d) {\n              return d.kind === 'videoinput';\n            });\n            var back = devices.find(function(d) {\n              return d.label.toLowerCase().indexOf('back') !== -1;\n            }) || (devices.length && devices[devices.length - 1]);\n            if (back) {\n              constraints.video.deviceId = face.exact ? {exact: back.deviceId} :\n                                                        {ideal: back.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraintName,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function(c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n        onError(shimError_(e));\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                      kind: kinds[device.kind],\n                      deviceId: device.id,\n                      groupId: ''};\n            }));\n          });\n        });\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, function(c) {\n        return origGetUserMedia(c).then(function(stream) {\n          if (c.audio && !stream.getAudioTracks().length ||\n              c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function(track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n\n},{\"../utils.js\":12}],7:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\nvar browserDetails = require('../utils').browserDetails;\n\nvar edgeShim = {\n  shimPeerConnection: function() {\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n      // this adds an additional event listener to MediaStrackTrack that signals\n      // when a tracks enabled property was changed.\n      var origMSTEnabled = Object.getOwnPropertyDescriptor(\n          MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(MediaStreamTrack.prototype, 'enabled', {\n        set: function(value) {\n          origMSTEnabled.set.call(this, value);\n          var ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n\n    window.RTCPeerConnection = function(config) {\n      var self = this;\n\n      var _eventTarget = document.createDocumentFragment();\n      ['addEventListener', 'removeEventListener', 'dispatchEvent']\n          .forEach(function(method) {\n            self[method] = _eventTarget[method].bind(_eventTarget);\n          });\n\n      this.onicecandidate = null;\n      this.onaddstream = null;\n      this.ontrack = null;\n      this.onremovestream = null;\n      this.onsignalingstatechange = null;\n      this.oniceconnectionstatechange = null;\n      this.onnegotiationneeded = null;\n      this.ondatachannel = null;\n\n      this.localStreams = [];\n      this.remoteStreams = [];\n      this.getLocalStreams = function() {\n        return self.localStreams;\n      };\n      this.getRemoteStreams = function() {\n        return self.remoteStreams;\n      };\n\n      this.localDescription = new RTCSessionDescription({\n        type: '',\n        sdp: ''\n      });\n      this.remoteDescription = new RTCSessionDescription({\n        type: '',\n        sdp: ''\n      });\n      this.signalingState = 'stable';\n      this.iceConnectionState = 'new';\n      this.iceGatheringState = 'new';\n\n      this.iceOptions = {\n        gatherPolicy: 'all',\n        iceServers: []\n      };\n      if (config && config.iceTransportPolicy) {\n        switch (config.iceTransportPolicy) {\n          case 'all':\n          case 'relay':\n            this.iceOptions.gatherPolicy = config.iceTransportPolicy;\n            break;\n          case 'none':\n            // FIXME: remove once implementation and spec have added this.\n            throw new TypeError('iceTransportPolicy \"none\" not supported');\n          default:\n            // don't set iceTransportPolicy.\n            break;\n        }\n      }\n      this.usingBundle = config && config.bundlePolicy === 'max-bundle';\n\n      if (config && config.iceServers) {\n        // Edge does not like\n        // 1) stun:\n        // 2) turn: that does not have all of turn:host:port?transport=udp\n        // 3) turn: with ipv6 addresses\n        var iceServers = JSON.parse(JSON.stringify(config.iceServers));\n        this.iceOptions.iceServers = iceServers.filter(function(server) {\n          if (server && server.urls) {\n            var urls = server.urls;\n            if (typeof urls === 'string') {\n              urls = [urls];\n            }\n            urls = urls.filter(function(url) {\n              return (url.indexOf('turn:') === 0 &&\n                  url.indexOf('transport=udp') !== -1 &&\n                  url.indexOf('turn:[') === -1) ||\n                  (url.indexOf('stun:') === 0 &&\n                    browserDetails.version >= 14393);\n            })[0];\n            return !!urls;\n          }\n          return false;\n        });\n      }\n      this._config = config;\n\n      // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n      // everything that is needed to describe a SDP m-line.\n      this.transceivers = [];\n\n      // since the iceGatherer is currently created in createOffer but we\n      // must not emit candidates until after setLocalDescription we buffer\n      // them in this array.\n      this._localIceCandidatesBuffer = [];\n    };\n\n    window.RTCPeerConnection.prototype._emitBufferedCandidates = function() {\n      var self = this;\n      var sections = SDPUtils.splitSections(self.localDescription.sdp);\n      // FIXME: need to apply ice candidates in a way which is async but\n      // in-order\n      this._localIceCandidatesBuffer.forEach(function(event) {\n        var end = !event.candidate || Object.keys(event.candidate).length === 0;\n        if (end) {\n          for (var j = 1; j < sections.length; j++) {\n            if (sections[j].indexOf('\\r\\na=end-of-candidates\\r\\n') === -1) {\n              sections[j] += 'a=end-of-candidates\\r\\n';\n            }\n          }\n        } else if (event.candidate.candidate.indexOf('typ endOfCandidates')\n            === -1) {\n          sections[event.candidate.sdpMLineIndex + 1] +=\n              'a=' + event.candidate.candidate + '\\r\\n';\n        }\n        self.localDescription.sdp = sections.join('');\n        self.dispatchEvent(event);\n        if (self.onicecandidate !== null) {\n          self.onicecandidate(event);\n        }\n        if (!event.candidate && self.iceGatheringState !== 'complete') {\n          var complete = self.transceivers.every(function(transceiver) {\n            return transceiver.iceGatherer &&\n                transceiver.iceGatherer.state === 'completed';\n          });\n          if (complete) {\n            self.iceGatheringState = 'complete';\n          }\n        }\n      });\n      this._localIceCandidatesBuffer = [];\n    };\n\n    window.RTCPeerConnection.prototype.getConfiguration = function() {\n      return this._config;\n    };\n\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      this.localStreams.push(clonedStream);\n      this._maybeFireNegotiationNeeded();\n    };\n\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var idx = this.localStreams.indexOf(stream);\n      if (idx > -1) {\n        this.localStreams.splice(idx, 1);\n        this._maybeFireNegotiationNeeded();\n      }\n    };\n\n    window.RTCPeerConnection.prototype.getSenders = function() {\n      return this.transceivers.filter(function(transceiver) {\n        return !!transceiver.rtpSender;\n      })\n      .map(function(transceiver) {\n        return transceiver.rtpSender;\n      });\n    };\n\n    window.RTCPeerConnection.prototype.getReceivers = function() {\n      return this.transceivers.filter(function(transceiver) {\n        return !!transceiver.rtpReceiver;\n      })\n      .map(function(transceiver) {\n        return transceiver.rtpReceiver;\n      });\n    };\n\n    // Determines the intersection of local and remote capabilities.\n    window.RTCPeerConnection.prototype._getCommonCapabilities =\n        function(localCapabilities, remoteCapabilities) {\n          var commonCapabilities = {\n            codecs: [],\n            headerExtensions: [],\n            fecMechanisms: []\n          };\n          localCapabilities.codecs.forEach(function(lCodec) {\n            for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n              var rCodec = remoteCapabilities.codecs[i];\n              if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                  lCodec.clockRate === rCodec.clockRate) {\n                // number of channels is the highest common number of channels\n                rCodec.numChannels = Math.min(lCodec.numChannels,\n                    rCodec.numChannels);\n                // push rCodec so we reply with offerer payload type\n                commonCapabilities.codecs.push(rCodec);\n\n                // determine common feedback mechanisms\n                rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n                  for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n                    if (lCodec.rtcpFeedback[j].type === fb.type &&\n                        lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n                      return true;\n                    }\n                  }\n                  return false;\n                });\n                // FIXME: also need to determine .parameters\n                //  see https://github.com/openpeer/ortc/issues/569\n                break;\n              }\n            }\n          });\n\n          localCapabilities.headerExtensions\n              .forEach(function(lHeaderExtension) {\n                for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n                     i++) {\n                  var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                  if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                    commonCapabilities.headerExtensions.push(rHeaderExtension);\n                    break;\n                  }\n                }\n              });\n\n          // FIXME: fecMechanisms\n          return commonCapabilities;\n        };\n\n    // Create ICE gatherer, ICE transport and DTLS transport.\n    window.RTCPeerConnection.prototype._createIceAndDtlsTransports =\n        function(mid, sdpMLineIndex) {\n          var self = this;\n          var iceGatherer = new RTCIceGatherer(self.iceOptions);\n          var iceTransport = new RTCIceTransport(iceGatherer);\n          iceGatherer.onlocalcandidate = function(evt) {\n            var event = new Event('icecandidate');\n            event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n            var cand = evt.candidate;\n            var end = !cand || Object.keys(cand).length === 0;\n            // Edge emits an empty object for RTCIceCandidateComplete\n            if (end) {\n              // polyfill since RTCIceGatherer.state is not implemented in\n              // Edge 10547 yet.\n              if (iceGatherer.state === undefined) {\n                iceGatherer.state = 'completed';\n              }\n\n              // Emit a candidate with type endOfCandidates to make the samples\n              // work. Edge requires addIceCandidate with this empty candidate\n              // to start checking. The real solution is to signal\n              // end-of-candidates to the other side when getting the null\n              // candidate but some apps (like the samples) don't do that.\n              event.candidate.candidate =\n                  'candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates';\n            } else {\n              // RTCIceCandidate doesn't have a component, needs to be added\n              cand.component = iceTransport.component === 'RTCP' ? 2 : 1;\n              event.candidate.candidate = SDPUtils.writeCandidate(cand);\n            }\n\n            // update local description.\n            var sections = SDPUtils.splitSections(self.localDescription.sdp);\n            if (event.candidate.candidate.indexOf('typ endOfCandidates')\n                === -1) {\n              sections[event.candidate.sdpMLineIndex + 1] +=\n                  'a=' + event.candidate.candidate + '\\r\\n';\n            } else {\n              sections[event.candidate.sdpMLineIndex + 1] +=\n                  'a=end-of-candidates\\r\\n';\n            }\n            self.localDescription.sdp = sections.join('');\n\n            var complete = self.transceivers.every(function(transceiver) {\n              return transceiver.iceGatherer &&\n                  transceiver.iceGatherer.state === 'completed';\n            });\n\n            // Emit candidate if localDescription is set.\n            // Also emits null candidate when all gatherers are complete.\n            switch (self.iceGatheringState) {\n              case 'new':\n                self._localIceCandidatesBuffer.push(event);\n                if (end && complete) {\n                  self._localIceCandidatesBuffer.push(\n                      new Event('icecandidate'));\n                }\n                break;\n              case 'gathering':\n                self._emitBufferedCandidates();\n                self.dispatchEvent(event);\n                if (self.onicecandidate !== null) {\n                  self.onicecandidate(event);\n                }\n                if (complete) {\n                  self.dispatchEvent(new Event('icecandidate'));\n                  if (self.onicecandidate !== null) {\n                    self.onicecandidate(new Event('icecandidate'));\n                  }\n                  self.iceGatheringState = 'complete';\n                }\n                break;\n              case 'complete':\n                // should not happen... currently!\n                break;\n              default: // no-op.\n                break;\n            }\n          };\n          iceTransport.onicestatechange = function() {\n            self._updateConnectionState();\n          };\n\n          var dtlsTransport = new RTCDtlsTransport(iceTransport);\n          dtlsTransport.ondtlsstatechange = function() {\n            self._updateConnectionState();\n          };\n          dtlsTransport.onerror = function() {\n            // onerror does not set state to failed by itself.\n            dtlsTransport.state = 'failed';\n            self._updateConnectionState();\n          };\n\n          return {\n            iceGatherer: iceGatherer,\n            iceTransport: iceTransport,\n            dtlsTransport: dtlsTransport\n          };\n        };\n\n    // Start the RTP Sender and Receiver for a transceiver.\n    window.RTCPeerConnection.prototype._transceive = function(transceiver,\n        send, recv) {\n      var params = this._getCommonCapabilities(transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n      if (send && transceiver.rtpSender) {\n        params.encodings = transceiver.sendEncodingParameters;\n        params.rtcp = {\n          cname: SDPUtils.localCName\n        };\n        if (transceiver.recvEncodingParameters.length) {\n          params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n        }\n        transceiver.rtpSender.send(params);\n      }\n      if (recv && transceiver.rtpReceiver) {\n        // remove RTX field in Edge 14942\n        if (transceiver.kind === 'video'\n            && transceiver.recvEncodingParameters) {\n          transceiver.recvEncodingParameters.forEach(function(p) {\n            delete p.rtx;\n          });\n        }\n        params.encodings = transceiver.recvEncodingParameters;\n        params.rtcp = {\n          cname: transceiver.cname\n        };\n        if (transceiver.sendEncodingParameters.length) {\n          params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n        }\n        transceiver.rtpReceiver.receive(params);\n      }\n    };\n\n    window.RTCPeerConnection.prototype.setLocalDescription =\n        function(description) {\n          var self = this;\n          var sections;\n          var sessionpart;\n          if (description.type === 'offer') {\n            // FIXME: What was the purpose of this empty if statement?\n            // if (!this._pendingOffer) {\n            // } else {\n            if (this._pendingOffer) {\n              // VERY limited support for SDP munging. Limited to:\n              // * changing the order of codecs\n              sections = SDPUtils.splitSections(description.sdp);\n              sessionpart = sections.shift();\n              sections.forEach(function(mediaSection, sdpMLineIndex) {\n                var caps = SDPUtils.parseRtpParameters(mediaSection);\n                self._pendingOffer[sdpMLineIndex].localCapabilities = caps;\n              });\n              this.transceivers = this._pendingOffer;\n              delete this._pendingOffer;\n            }\n          } else if (description.type === 'answer') {\n            sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n            sessionpart = sections.shift();\n            var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                'a=ice-lite').length > 0;\n            sections.forEach(function(mediaSection, sdpMLineIndex) {\n              var transceiver = self.transceivers[sdpMLineIndex];\n              var iceGatherer = transceiver.iceGatherer;\n              var iceTransport = transceiver.iceTransport;\n              var dtlsTransport = transceiver.dtlsTransport;\n              var localCapabilities = transceiver.localCapabilities;\n              var remoteCapabilities = transceiver.remoteCapabilities;\n\n              var rejected = mediaSection.split('\\n', 1)[0]\n                  .split(' ', 2)[1] === '0';\n\n              if (!rejected && !transceiver.isDatachannel) {\n                var remoteIceParameters = SDPUtils.getIceParameters(\n                    mediaSection, sessionpart);\n                if (isIceLite) {\n                  var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                  .map(function(cand) {\n                    return SDPUtils.parseCandidate(cand);\n                  })\n                  .filter(function(cand) {\n                    return cand.component === '1';\n                  });\n                  // ice-lite only includes host candidates in the SDP so we can\n                  // use setRemoteCandidates (which implies an\n                  // RTCIceCandidateComplete)\n                  if (cands.length) {\n                    iceTransport.setRemoteCandidates(cands);\n                  }\n                }\n                var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                    mediaSection, sessionpart);\n                if (isIceLite) {\n                  remoteDtlsParameters.role = 'server';\n                }\n\n                if (!self.usingBundle || sdpMLineIndex === 0) {\n                  iceTransport.start(iceGatherer, remoteIceParameters,\n                      isIceLite ? 'controlling' : 'controlled');\n                  dtlsTransport.start(remoteDtlsParameters);\n                }\n\n                // Calculate intersection of capabilities.\n                var params = self._getCommonCapabilities(localCapabilities,\n                    remoteCapabilities);\n\n                // Start the RTCRtpSender. The RTCRtpReceiver for this\n                // transceiver has already been started in setRemoteDescription.\n                self._transceive(transceiver,\n                    params.codecs.length > 0,\n                    false);\n              }\n            });\n          }\n\n          this.localDescription = {\n            type: description.type,\n            sdp: description.sdp\n          };\n          switch (description.type) {\n            case 'offer':\n              this._updateSignalingState('have-local-offer');\n              break;\n            case 'answer':\n              this._updateSignalingState('stable');\n              break;\n            default:\n              throw new TypeError('unsupported type \"' + description.type +\n                  '\"');\n          }\n\n          // If a success callback was provided, emit ICE candidates after it\n          // has been executed. Otherwise, emit callback after the Promise is\n          // resolved.\n          var hasCallback = arguments.length > 1 &&\n            typeof arguments[1] === 'function';\n          if (hasCallback) {\n            var cb = arguments[1];\n            window.setTimeout(function() {\n              cb();\n              if (self.iceGatheringState === 'new') {\n                self.iceGatheringState = 'gathering';\n              }\n              self._emitBufferedCandidates();\n            }, 0);\n          }\n          var p = Promise.resolve();\n          p.then(function() {\n            if (!hasCallback) {\n              if (self.iceGatheringState === 'new') {\n                self.iceGatheringState = 'gathering';\n              }\n              // Usually candidates will be emitted earlier.\n              window.setTimeout(self._emitBufferedCandidates.bind(self), 500);\n            }\n          });\n          return p;\n        };\n\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n        function(description) {\n          var self = this;\n          var stream = new MediaStream();\n          var receiverList = [];\n          var sections = SDPUtils.splitSections(description.sdp);\n          var sessionpart = sections.shift();\n          var isIceLite = SDPUtils.matchPrefix(sessionpart,\n              'a=ice-lite').length > 0;\n          this.usingBundle = SDPUtils.matchPrefix(sessionpart,\n              'a=group:BUNDLE ').length > 0;\n          sections.forEach(function(mediaSection, sdpMLineIndex) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].substr(2).split(' ');\n            var kind = mline[0];\n            var rejected = mline[1] === '0';\n            var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n\n            var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:');\n            if (mid.length) {\n              mid = mid[0].substr(6);\n            } else {\n              mid = SDPUtils.generateIdentifier();\n            }\n\n            // Reject datachannels which are not implemented yet.\n            if (kind === 'application' && mline[2] === 'DTLS/SCTP') {\n              self.transceivers[sdpMLineIndex] = {\n                mid: mid,\n                isDatachannel: true\n              };\n              return;\n            }\n\n            var transceiver;\n            var iceGatherer;\n            var iceTransport;\n            var dtlsTransport;\n            var rtpSender;\n            var rtpReceiver;\n            var sendEncodingParameters;\n            var recvEncodingParameters;\n            var localCapabilities;\n\n            var track;\n            // FIXME: ensure the mediaSection has rtcp-mux set.\n            var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n            var remoteIceParameters;\n            var remoteDtlsParameters;\n            if (!rejected) {\n              remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                  sessionpart);\n              remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                  sessionpart);\n              remoteDtlsParameters.role = 'client';\n            }\n            recvEncodingParameters =\n                SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n            var cname;\n            // Gets the first SSRC. Note that with RTX there might be multiple\n            // SSRCs.\n            var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                  return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(obj) {\n                  return obj.attribute === 'cname';\n                })[0];\n            if (remoteSsrc) {\n              cname = remoteSsrc.value;\n            }\n\n            var isComplete = SDPUtils.matchPrefix(mediaSection,\n                'a=end-of-candidates', sessionpart).length > 0;\n            var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                .map(function(cand) {\n                  return SDPUtils.parseCandidate(cand);\n                })\n                .filter(function(cand) {\n                  return cand.component === '1';\n                });\n            if (description.type === 'offer' && !rejected) {\n              var transports = self.usingBundle && sdpMLineIndex > 0 ? {\n                iceGatherer: self.transceivers[0].iceGatherer,\n                iceTransport: self.transceivers[0].iceTransport,\n                dtlsTransport: self.transceivers[0].dtlsTransport\n              } : self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n              if (isComplete) {\n                transports.iceTransport.setRemoteCandidates(cands);\n              }\n\n              localCapabilities = RTCRtpReceiver.getCapabilities(kind);\n\n              // filter RTX until additional stuff needed for RTX is implemented\n              // in adapter.js\n              localCapabilities.codecs = localCapabilities.codecs.filter(\n                  function(codec) {\n                    return codec.name !== 'rtx';\n                  });\n\n              sendEncodingParameters = [{\n                ssrc: (2 * sdpMLineIndex + 2) * 1001\n              }];\n\n              rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n\n              track = rtpReceiver.track;\n              receiverList.push([track, rtpReceiver]);\n              // FIXME: not correct when there are multiple streams but that is\n              // not currently supported in this shim.\n              stream.addTrack(track);\n\n              // FIXME: look at direction.\n              if (self.localStreams.length > 0 &&\n                  self.localStreams[0].getTracks().length >= sdpMLineIndex) {\n                var localTrack;\n                if (kind === 'audio') {\n                  localTrack = self.localStreams[0].getAudioTracks()[0];\n                } else if (kind === 'video') {\n                  localTrack = self.localStreams[0].getVideoTracks()[0];\n                }\n                if (localTrack) {\n                  rtpSender = new RTCRtpSender(localTrack,\n                      transports.dtlsTransport);\n                }\n              }\n\n              self.transceivers[sdpMLineIndex] = {\n                iceGatherer: transports.iceGatherer,\n                iceTransport: transports.iceTransport,\n                dtlsTransport: transports.dtlsTransport,\n                localCapabilities: localCapabilities,\n                remoteCapabilities: remoteCapabilities,\n                rtpSender: rtpSender,\n                rtpReceiver: rtpReceiver,\n                kind: kind,\n                mid: mid,\n                cname: cname,\n                sendEncodingParameters: sendEncodingParameters,\n                recvEncodingParameters: recvEncodingParameters\n              };\n              // Start the RTCRtpReceiver now. The RTPSender is started in\n              // setLocalDescription.\n              self._transceive(self.transceivers[sdpMLineIndex],\n                  false,\n                  direction === 'sendrecv' || direction === 'sendonly');\n            } else if (description.type === 'answer' && !rejected) {\n              transceiver = self.transceivers[sdpMLineIndex];\n              iceGatherer = transceiver.iceGatherer;\n              iceTransport = transceiver.iceTransport;\n              dtlsTransport = transceiver.dtlsTransport;\n              rtpSender = transceiver.rtpSender;\n              rtpReceiver = transceiver.rtpReceiver;\n              sendEncodingParameters = transceiver.sendEncodingParameters;\n              localCapabilities = transceiver.localCapabilities;\n\n              self.transceivers[sdpMLineIndex].recvEncodingParameters =\n                  recvEncodingParameters;\n              self.transceivers[sdpMLineIndex].remoteCapabilities =\n                  remoteCapabilities;\n              self.transceivers[sdpMLineIndex].cname = cname;\n\n              if ((isIceLite || isComplete) && cands.length) {\n                iceTransport.setRemoteCandidates(cands);\n              }\n              if (!self.usingBundle || sdpMLineIndex === 0) {\n                iceTransport.start(iceGatherer, remoteIceParameters,\n                    'controlling');\n                dtlsTransport.start(remoteDtlsParameters);\n              }\n\n              self._transceive(transceiver,\n                  direction === 'sendrecv' || direction === 'recvonly',\n                  direction === 'sendrecv' || direction === 'sendonly');\n\n              if (rtpReceiver &&\n                  (direction === 'sendrecv' || direction === 'sendonly')) {\n                track = rtpReceiver.track;\n                receiverList.push([track, rtpReceiver]);\n                stream.addTrack(track);\n              } else {\n                // FIXME: actually the receiver should be created later.\n                delete transceiver.rtpReceiver;\n              }\n            }\n          });\n\n          this.remoteDescription = {\n            type: description.type,\n            sdp: description.sdp\n          };\n          switch (description.type) {\n            case 'offer':\n              this._updateSignalingState('have-remote-offer');\n              break;\n            case 'answer':\n              this._updateSignalingState('stable');\n              break;\n            default:\n              throw new TypeError('unsupported type \"' + description.type +\n                  '\"');\n          }\n          if (stream.getTracks().length) {\n            self.remoteStreams.push(stream);\n            window.setTimeout(function() {\n              var event = new Event('addstream');\n              event.stream = stream;\n              self.dispatchEvent(event);\n              if (self.onaddstream !== null) {\n                window.setTimeout(function() {\n                  self.onaddstream(event);\n                }, 0);\n              }\n\n              receiverList.forEach(function(item) {\n                var track = item[0];\n                var receiver = item[1];\n                var trackEvent = new Event('track');\n                trackEvent.track = track;\n                trackEvent.receiver = receiver;\n                trackEvent.streams = [stream];\n                self.dispatchEvent(event);\n                if (self.ontrack !== null) {\n                  window.setTimeout(function() {\n                    self.ontrack(trackEvent);\n                  }, 0);\n                }\n              });\n            }, 0);\n          }\n          if (arguments.length > 1 && typeof arguments[1] === 'function') {\n            window.setTimeout(arguments[1], 0);\n          }\n          return Promise.resolve();\n        };\n\n    window.RTCPeerConnection.prototype.close = function() {\n      this.transceivers.forEach(function(transceiver) {\n        /* not yet\n        if (transceiver.iceGatherer) {\n          transceiver.iceGatherer.close();\n        }\n        */\n        if (transceiver.iceTransport) {\n          transceiver.iceTransport.stop();\n        }\n        if (transceiver.dtlsTransport) {\n          transceiver.dtlsTransport.stop();\n        }\n        if (transceiver.rtpSender) {\n          transceiver.rtpSender.stop();\n        }\n        if (transceiver.rtpReceiver) {\n          transceiver.rtpReceiver.stop();\n        }\n      });\n      // FIXME: clean up tracks, local streams, remote streams, etc\n      this._updateSignalingState('closed');\n    };\n\n    // Update the signaling state.\n    window.RTCPeerConnection.prototype._updateSignalingState =\n        function(newState) {\n          this.signalingState = newState;\n          var event = new Event('signalingstatechange');\n          this.dispatchEvent(event);\n          if (this.onsignalingstatechange !== null) {\n            this.onsignalingstatechange(event);\n          }\n        };\n\n    // Determine whether to fire the negotiationneeded event.\n    window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded =\n        function() {\n          // Fire away (for now).\n          var event = new Event('negotiationneeded');\n          this.dispatchEvent(event);\n          if (this.onnegotiationneeded !== null) {\n            this.onnegotiationneeded(event);\n          }\n        };\n\n    // Update the connection state.\n    window.RTCPeerConnection.prototype._updateConnectionState = function() {\n      var self = this;\n      var newState;\n      var states = {\n        'new': 0,\n        closed: 0,\n        connecting: 0,\n        checking: 0,\n        connected: 0,\n        completed: 0,\n        failed: 0\n      };\n      this.transceivers.forEach(function(transceiver) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      });\n      // ICETransport.completed and connected are the same for this purpose.\n      states.connected += states.completed;\n\n      newState = 'new';\n      if (states.failed > 0) {\n        newState = 'failed';\n      } else if (states.connecting > 0 || states.checking > 0) {\n        newState = 'connecting';\n      } else if (states.disconnected > 0) {\n        newState = 'disconnected';\n      } else if (states.new > 0) {\n        newState = 'new';\n      } else if (states.connected > 0 || states.completed > 0) {\n        newState = 'connected';\n      }\n\n      if (newState !== self.iceConnectionState) {\n        self.iceConnectionState = newState;\n        var event = new Event('iceconnectionstatechange');\n        this.dispatchEvent(event);\n        if (this.oniceconnectionstatechange !== null) {\n          this.oniceconnectionstatechange(event);\n        }\n      }\n    };\n\n    window.RTCPeerConnection.prototype.createOffer = function() {\n      var self = this;\n      if (this._pendingOffer) {\n        throw new Error('createOffer called while there is a pending offer.');\n      }\n      var offerOptions;\n      if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n        offerOptions = arguments[0];\n      } else if (arguments.length === 3) {\n        offerOptions = arguments[2];\n      }\n\n      var tracks = [];\n      var numAudioTracks = 0;\n      var numVideoTracks = 0;\n      // Default to sendrecv.\n      if (this.localStreams.length) {\n        numAudioTracks = this.localStreams[0].getAudioTracks().length;\n        numVideoTracks = this.localStreams[0].getVideoTracks().length;\n      }\n      // Determine number of audio and video tracks we need to send/recv.\n      if (offerOptions) {\n        // Reject Chrome legacy constraints.\n        if (offerOptions.mandatory || offerOptions.optional) {\n          throw new TypeError(\n              'Legacy mandatory/optional constraints not supported.');\n        }\n        if (offerOptions.offerToReceiveAudio !== undefined) {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n        if (offerOptions.offerToReceiveVideo !== undefined) {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n      if (this.localStreams.length) {\n        // Push local streams.\n        this.localStreams[0].getTracks().forEach(function(track) {\n          tracks.push({\n            kind: track.kind,\n            track: track,\n            wantReceive: track.kind === 'audio' ?\n                numAudioTracks > 0 : numVideoTracks > 0\n          });\n          if (track.kind === 'audio') {\n            numAudioTracks--;\n          } else if (track.kind === 'video') {\n            numVideoTracks--;\n          }\n        });\n      }\n      // Create M-lines for recvonly streams.\n      while (numAudioTracks > 0 || numVideoTracks > 0) {\n        if (numAudioTracks > 0) {\n          tracks.push({\n            kind: 'audio',\n            wantReceive: true\n          });\n          numAudioTracks--;\n        }\n        if (numVideoTracks > 0) {\n          tracks.push({\n            kind: 'video',\n            wantReceive: true\n          });\n          numVideoTracks--;\n        }\n      }\n\n      var sdp = SDPUtils.writeSessionBoilerplate();\n      var transceivers = [];\n      tracks.forEach(function(mline, sdpMLineIndex) {\n        // For each track, create an ice gatherer, ice transport,\n        // dtls transport, potentially rtpsender and rtpreceiver.\n        var track = mline.track;\n        var kind = mline.kind;\n        var mid = SDPUtils.generateIdentifier();\n\n        var transports = self.usingBundle && sdpMLineIndex > 0 ? {\n          iceGatherer: transceivers[0].iceGatherer,\n          iceTransport: transceivers[0].iceTransport,\n          dtlsTransport: transceivers[0].dtlsTransport\n        } : self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n        var localCapabilities = RTCRtpSender.getCapabilities(kind);\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n        localCapabilities.codecs.forEach(function(codec) {\n          // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n          // by adding level-asymmetry-allowed=1\n          if (codec.name === 'H264' &&\n              codec.parameters['level-asymmetry-allowed'] === undefined) {\n            codec.parameters['level-asymmetry-allowed'] = '1';\n          }\n        });\n\n        var rtpSender;\n        var rtpReceiver;\n\n        // generate an ssrc now, to be used later in rtpSender.send\n        var sendEncodingParameters = [{\n          ssrc: (2 * sdpMLineIndex + 1) * 1001\n        }];\n        if (track) {\n          rtpSender = new RTCRtpSender(track, transports.dtlsTransport);\n        }\n\n        if (mline.wantReceive) {\n          rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n        }\n\n        transceivers[sdpMLineIndex] = {\n          iceGatherer: transports.iceGatherer,\n          iceTransport: transports.iceTransport,\n          dtlsTransport: transports.dtlsTransport,\n          localCapabilities: localCapabilities,\n          remoteCapabilities: null,\n          rtpSender: rtpSender,\n          rtpReceiver: rtpReceiver,\n          kind: kind,\n          mid: mid,\n          sendEncodingParameters: sendEncodingParameters,\n          recvEncodingParameters: null\n        };\n      });\n      if (this.usingBundle) {\n        sdp += 'a=group:BUNDLE ' + transceivers.map(function(t) {\n          return t.mid;\n        }).join(' ') + '\\r\\n';\n      }\n      tracks.forEach(function(mline, sdpMLineIndex) {\n        var transceiver = transceivers[sdpMLineIndex];\n        sdp += SDPUtils.writeMediaSection(transceiver,\n            transceiver.localCapabilities, 'offer', self.localStreams[0]);\n      });\n\n      this._pendingOffer = transceivers;\n      var desc = new RTCSessionDescription({\n        type: 'offer',\n        sdp: sdp\n      });\n      if (arguments.length && typeof arguments[0] === 'function') {\n        window.setTimeout(arguments[0], 0, desc);\n      }\n      return Promise.resolve(desc);\n    };\n\n    window.RTCPeerConnection.prototype.createAnswer = function() {\n      var self = this;\n\n      var sdp = SDPUtils.writeSessionBoilerplate();\n      if (this.usingBundle) {\n        sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\n          return t.mid;\n        }).join(' ') + '\\r\\n';\n      }\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.isDatachannel) {\n          sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n' +\n              'c=IN IP4 0.0.0.0\\r\\n' +\n              'a=mid:' + transceiver.mid + '\\r\\n';\n          return;\n        }\n        // Calculate intersection of capabilities.\n        var commonCapabilities = self._getCommonCapabilities(\n            transceiver.localCapabilities,\n            transceiver.remoteCapabilities);\n\n        sdp += SDPUtils.writeMediaSection(transceiver, commonCapabilities,\n            'answer', self.localStreams[0]);\n      });\n\n      var desc = new RTCSessionDescription({\n        type: 'answer',\n        sdp: sdp\n      });\n      if (arguments.length && typeof arguments[0] === 'function') {\n        window.setTimeout(arguments[0], 0, desc);\n      }\n      return Promise.resolve(desc);\n    };\n\n    window.RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n      if (!candidate) {\n        this.transceivers.forEach(function(transceiver) {\n          transceiver.iceTransport.addRemoteCandidate({});\n        });\n      } else {\n        var mLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < this.transceivers.length; i++) {\n            if (this.transceivers[i].mid === candidate.sdpMid) {\n              mLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = this.transceivers[mLineIndex];\n        if (transceiver) {\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return;\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component !== '1') {\n            return;\n          }\n          // A dirty hack to make samples work.\n          if (cand.type === 'endOfCandidates') {\n            cand = {};\n          }\n          transceiver.iceTransport.addRemoteCandidate(cand);\n\n          // update the remoteDescription.\n          var sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n          sections[mLineIndex + 1] += (cand.type ? candidate.candidate.trim()\n              : 'a=end-of-candidates') + '\\r\\n';\n          this.remoteDescription.sdp = sections.join('');\n        }\n      }\n      if (arguments.length > 1 && typeof arguments[1] === 'function') {\n        window.setTimeout(arguments[1], 0);\n      }\n      return Promise.resolve();\n    };\n\n    window.RTCPeerConnection.prototype.getStats = function() {\n      var promises = [];\n      this.transceivers.forEach(function(transceiver) {\n        ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n            'dtlsTransport'].forEach(function(method) {\n              if (transceiver[method]) {\n                promises.push(transceiver[method].getStats());\n              }\n            });\n      });\n      var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n          arguments[1];\n      return new Promise(function(resolve) {\n        // shim getStats with maplike support\n        var results = new Map();\n        Promise.all(promises).then(function(res) {\n          res.forEach(function(result) {\n            Object.keys(result).forEach(function(id) {\n              results.set(id, result[id]);\n              results[id] = result[id];\n            });\n          });\n          if (cb) {\n            window.setTimeout(cb, 0, results);\n          }\n          resolve(results);\n        });\n      });\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimPeerConnection: edgeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n},{\"../utils\":12,\"./getusermedia\":8,\"sdp\":59}],8:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// Expose public methods.\nmodule.exports = function() {\n  var shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(function(e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n};\n\n},{}],9:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar browserDetails = require('../utils').browserDetails;\n\nvar firefoxShim = {\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function() {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n        window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = mozRTCSessionDescription;\n      window.RTCIceCandidate = mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = RTCPeerConnection.prototype[method];\n          RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        RTCPeerConnection.prototype.addIceCandidate;\n    RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n\n    if (browserDetails.version < 48) {\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        var map = new Map();\n        Object.keys(stats).forEach(function(key) {\n          map.set(key, stats[key]);\n          map[key] = stats[key];\n        });\n        return map;\n      };\n\n      var nativeGetStats = RTCPeerConnection.prototype.getStats;\n      RTCPeerConnection.prototype.getStats = function(selector, onSucc, onErr) {\n        return nativeGetStats.apply(this, [selector || null])\n          .then(function(stats) {\n            return makeMapStats(stats);\n          })\n          .then(onSucc, onErr);\n      };\n    }\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n},{\"../utils\":12,\"./getusermedia\":10}],10:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logging = require('../utils').log;\nvar browserDetails = require('../utils').browserDetails;\n\n// Expose public methods.\nmodule.exports = function() {\n  var shimError_ = function(e) {\n    return {\n      name: {\n        SecurityError: 'NotAllowedError',\n        PermissionDeniedError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: {\n        'The operation is insecure.': 'The request is not allowed by the ' +\n        'user agent or the platform in the current context.'\n      }[e.message] || e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n      onError(shimError_(e));\n    });\n  };\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      getUserMedia_(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n  if (browserDetails.version < 49) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).then(function(stream) {\n        // Work around https://bugzil.la/802326\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(function(track) {\n            track.stop();\n          });\n          throw new DOMException('The object can not be found here.',\n                                 'NotFoundError');\n        }\n        return stream;\n      }, function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  }\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    if (browserDetails.version < 44) {\n      return getUserMedia_(constraints, onSuccess, onError);\n    }\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    console.warn('navigator.getUserMedia has been replaced by ' +\n                 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n};\n\n},{\"../utils\":12}],11:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n  // shimOnTrack: function() { },\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimGetUserMedia: function() {\n    navigator.getUserMedia = navigator.webkitGetUserMedia;\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimGetUserMedia: safariShim.shimGetUserMedia\n  // TODO\n  // shimOnTrack: safariShim.shimOnTrack,\n  // shimPeerConnection: safariShim.shimPeerConnection\n};\n\n},{}],12:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  detectBrowser: function() {\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/([0-9]+)\\./, 1);\n\n    // all webkit-based browsers\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/([0-9]+)\\./, 2);\n\n      // Safari or unknown webkit-based\n      // for the time being Safari has support for MediaStreams but not webRTC\n      } else {\n        // Safari UA substrings of interest for reference:\n        // - webkit version:           AppleWebKit/602.1.25 (also used in Op,Cr)\n        // - safari UI version:        Version/9.0.3 (unique to Safari)\n        // - safari UI webkit version: Safari/601.4.4 (also used in Op,Cr)\n        //\n        // if the webkit version and safari UI webkit versions are equals,\n        // ... this is a stable version.\n        //\n        // only the internal webkit version is important today to know if\n        // media streams are supported\n        //\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/([0-9]+)\\./, 1);\n\n        // unknown webkit-based browser\n        } else {\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n\n    // Edge.\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n\n    // Default fallthrough: not supported.\n    } else {\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  }\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  disableLog: utils.disableLog,\n  browserDetails: utils.detectBrowser(),\n  extractVersion: utils.extractVersion\n};\n\n},{}],13:[function(require,module,exports){\n\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n\n},{}],14:[function(require,module,exports){\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n\n},{}],15:[function(require,module,exports){\n(function (global){\n/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],16:[function(require,module,exports){\n/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n\n},{}],17:[function(require,module,exports){\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n},{}],18:[function(require,module,exports){\n\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};\n},{}],19:[function(require,module,exports){\n\n/**\n * Expose `debug()` as the module.\n */\n\nmodule.exports = debug;\n\n/**\n * Create a debugger with the given `name`.\n *\n * @param {String} name\n * @return {Type}\n * @api public\n */\n\nfunction debug(name) {\n  if (!debug.enabled(name)) return function(){};\n\n  return function(fmt){\n    fmt = coerce(fmt);\n\n    var curr = new Date;\n    var ms = curr - (debug[name] || curr);\n    debug[name] = curr;\n\n    fmt = name\n      + ' '\n      + fmt\n      + ' +' + debug.humanize(ms);\n\n    // This hackery is required for IE8\n    // where `console.log` doesn't have 'apply'\n    window.console\n      && console.log\n      && Function.prototype.apply.call(console.log, console, arguments);\n  }\n}\n\n/**\n * The currently active debug mode names.\n */\n\ndebug.names = [];\ndebug.skips = [];\n\n/**\n * Enables a debug mode by name. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} name\n * @api public\n */\n\ndebug.enable = function(name) {\n  try {\n    localStorage.debug = name;\n  } catch(e){}\n\n  var split = (name || '').split(/[\\s,]+/)\n    , len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    name = split[i].replace('*', '.*?');\n    if (name[0] === '-') {\n      debug.skips.push(new RegExp('^' + name.substr(1) + '$'));\n    }\n    else {\n      debug.names.push(new RegExp('^' + name + '$'));\n    }\n  }\n};\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\ndebug.disable = function(){\n  debug.enable('');\n};\n\n/**\n * Humanize the given `ms`.\n *\n * @param {Number} m\n * @return {String}\n * @api private\n */\n\ndebug.humanize = function(ms) {\n  var sec = 1000\n    , min = 60 * 1000\n    , hour = 60 * min;\n\n  if (ms >= hour) return (ms / hour).toFixed(1) + 'h';\n  if (ms >= min) return (ms / min).toFixed(1) + 'm';\n  if (ms >= sec) return (ms / sec | 0) + 's';\n  return ms + 'ms';\n};\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\ndebug.enabled = function(name) {\n  for (var i = 0, len = debug.skips.length; i < len; i++) {\n    if (debug.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (var i = 0, len = debug.names.length; i < len; i++) {\n    if (debug.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Coerce `val`.\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n// persist\n\ntry {\n  if (window.localStorage) debug.enable(localStorage.debug);\n} catch(e){}\n\n},{}],20:[function(require,module,exports){\n\nmodule.exports =  require('./lib/');\n\n},{\"./lib/\":21}],21:[function(require,module,exports){\n\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n\n},{\"./socket\":22,\"engine.io-parser\":33}],22:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar transports = require('./transports');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parsejson = require('parsejson');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Noop function.\n *\n * @api private\n */\n\nfunction noop(){}\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket(uri, opts){\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' == typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.host = uri.host;\n    opts.secure = uri.protocol == 'https' || uri.protocol == 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  }\n\n  this.secure = null != opts.secure ? opts.secure :\n    (global.location && 'https:' == location.protocol);\n\n  if (opts.host) {\n    var pieces = opts.host.split(':');\n    opts.hostname = pieces.shift();\n    if (pieces.length) {\n      opts.port = pieces.pop();\n    } else if (!opts.port) {\n      // if no port is specified manually, use the protocol default\n      opts.port = this.secure ? '443' : '80';\n    }\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port ?\n       location.port :\n       (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' == typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.callbackBuffer = [];\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized || null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    agent: this.agent,\n    hostname: this.hostname,\n    port: this.port,\n    secure: this.secure,\n    path: this.path,\n    query: query,\n    forceJSONP: this.forceJSONP,\n    jsonp: this.jsonp,\n    forceBase64: this.forceBase64,\n    enablesXDR: this.enablesXDR,\n    timestampRequests: this.timestampRequests,\n    timestampParam: this.timestampParam,\n    policyPort: this.policyPort,\n    socket: this,\n    pfx: this.pfx,\n    key: this.key,\n    passphrase: this.passphrase,\n    cert: this.cert,\n    ca: this.ca,\n    ciphers: this.ciphers,\n    rejectUnauthorized: this.rejectUnauthorized\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') != -1) {\n    transport = 'websocket';\n  } else if (0 == this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function() {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  var transport;\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function(transport){\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function(){\n    self.onDrain();\n  })\n  .on('packet', function(packet){\n    self.onPacket(packet);\n  })\n  .on('error', function(e){\n    self.onError(e);\n  })\n  .on('close', function(){\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 })\n    , failed = false\n    , self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen(){\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' == msg.type && 'probe' == msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' == transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' == self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport() {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  //Handle any error that happens while probing\n  function onerror(err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose(){\n    onerror(\"transport closed\");\n  }\n\n  //When the socket is closed while we're probing\n  function onclose(){\n    onerror(\"socket closed\");\n  }\n\n  //When the socket is upgraded while we're probing\n  function onupgrade(to){\n    if (transport && to.name != transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  //Remove all listeners on the transport and on self\n  function cleanup(){\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' == this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' == this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(parsejson(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.emit('error', err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if  ('closed' == this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' == self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api public\n*/\n\nSocket.prototype.ping = function () {\n  this.sendPacket('ping');\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function() {\n  for (var i = 0; i < this.prevBufferLen; i++) {\n    if (this.callbackBuffer[i]) {\n      this.callbackBuffer[i]();\n    }\n  }\n\n  this.writeBuffer.splice(0, this.prevBufferLen);\n  this.callbackBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (this.writeBuffer.length == 0) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' != this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, fn) {\n  this.sendPacket('message', msg, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, fn) {\n  if ('closing' == this.readyState || 'closed' == this.readyState) {\n    return;\n  }\n\n  var packet = { type: type, data: data };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  this.callbackBuffer.push(fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    function close() {\n      self.onClose('forced close');\n      debug('socket closing - telling transport to close');\n      self.transport.close();\n    }\n\n    function cleanupAndClose() {\n      self.removeListener('upgrade', cleanupAndClose);\n      self.removeListener('upgradeError', cleanupAndClose);\n      close();\n    }\n\n    function waitForUpgrade() {\n      // wait for upgrade to finish since we can't send packets while pausing a transport\n      self.once('upgrade', cleanupAndClose);\n      self.once('upgradeError', cleanupAndClose);\n    }\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function() {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' == this.readyState || 'open' == this.readyState || 'closing' == this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // clean buffers in next tick, so developers can still\n    // grab the buffers on `close` event\n    setTimeout(function() {\n      self.writeBuffer = [];\n      self.callbackBuffer = [];\n      self.prevBufferLen = 0;\n    }, 0);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i<j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./transport\":23,\"./transports\":24,\"component-emitter\":17,\"debug\":30,\"engine.io-parser\":33,\"indexof\":41,\"parsejson\":49,\"parseqs\":50,\"parseuri\":32}],23:[function(require,module,exports){\n/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * A counter used to prevent collisions in the timestamps used\n * for cache busting.\n */\n\nTransport.timestamps = 0;\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' == this.readyState || '' == this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function(packets){\n  if ('open' == this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function(data){\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n\n},{\"component-emitter\":17,\"engine.io-parser\":33}],24:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling(opts){\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname != location.hostname || port != opts.port;\n    xs = opts.secure != isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling-jsonp\":25,\"./polling-xhr\":26,\"./websocket\":28,\"xmlhttprequest\":29}],25:[function(require,module,exports){\n(function (global){\n\n/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Callbacks count.\n */\n\nvar index = 0;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function(e){\n    self.onError('jsonp poll error',e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  insertAt.parentNode.insertBefore(script, insertAt);\n  this.script = script;\n\n  var isUAgecko = 'undefined' != typeof navigator && /gecko/i.test(navigator.userAgent);\n  \n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"'+ self.iframeId +'\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch(e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function(){\n      if (self.iframe.readyState == 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling\":27,\"component-inherit\":18}],26:[function(require,module,exports){\n(function (global){\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty(){}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR(opts){\n  Polling.call(this, opts);\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname != global.location.hostname ||\n      port != opts.port;\n    this.xs = opts.secure != isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function(opts){\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function(data, fn){\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function(err){\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function(){\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function(data){\n    self.onData(data);\n  });\n  req.on('error', function(err){\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request(opts){\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined != opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function(){\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    if (this.supportsBinary) {\n      // This has to be done after open because Firefox is stupid\n      // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n      xhr.responseType = 'arraybuffer';\n    }\n\n    if ('POST' == this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function(){\n        self.onLoad();\n      };\n      xhr.onerror = function(){\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function(){\n        if (4 != xhr.readyState) return;\n        if (200 == xhr.status || 1223 == xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function(){\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function() {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function(){\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function(data){\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function(err){\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function(fromError){\n  if ('undefined' == typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch(e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function(){\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response;\n    } else {\n      if (!this.supportsBinary) {\n        data = this.xhr.responseText;\n      } else {\n        data = 'ok';\n      }\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function(){\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function(){\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nif (global.document) {\n  Request.requestsCount = 0;\n  Request.requests = {};\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling\":27,\"component-emitter\":17,\"component-inherit\":18,\"debug\":30,\"xmlhttprequest\":29}],27:[function(require,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function() {\n  var XMLHttpRequest = require('xmlhttprequest');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling(opts){\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function(){\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function(onPause){\n  var pending = 0;\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause(){\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function(){\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function(){\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function(){\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function(data){\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function(packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' == self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' == packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' != this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' == this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function(){\n  var self = this;\n\n  function close(){\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' == this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function(packets){\n  var self = this;\n  this.writable = false;\n  var callbackfn = function() {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  var self = this;\n  parser.encodePayload(packets, this.supportsBinary, function(data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function(){\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = +new Date + '-' + Transport.timestamps++;\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' == schema && this.port != 443) ||\n     ('http' == schema && this.port != 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  return schema + '://' + this.hostname + port + this.path + query;\n};\n\n},{\"../transport\":23,\"component-inherit\":18,\"debug\":30,\"engine.io-parser\":33,\"parseqs\":50,\"xmlhttprequest\":29}],28:[function(require,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:websocket');\n\n/**\n * `ws` exposes a WebSocket-compatible interface in\n * Node, or the `WebSocket` or `MozWebSocket` globals\n * in the browser.\n */\n\nvar WebSocket = require('ws');\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS(opts){\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function(){\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var self = this;\n  var uri = this.uri();\n  var protocols = void(0);\n  var opts = { agent: this.agent };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  this.ws = new WebSocket(uri, protocols, opts);\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  this.ws.binaryType = 'arraybuffer';\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function(){\n  var self = this;\n\n  this.ws.onopen = function(){\n    self.onOpen();\n  };\n  this.ws.onclose = function(){\n    self.onClose();\n  };\n  this.ws.onmessage = function(ev){\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function(e){\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Override `onData` to use a timer on iOS.\n * See: https://gist.github.com/mloughran/2052006\n *\n * @api private\n */\n\nif ('undefined' != typeof navigator\n  && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\n  WS.prototype.onData = function(data){\n    var self = this;\n    setTimeout(function(){\n      Transport.prototype.onData.call(self, data);\n    }, 0);\n  };\n}\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function(packets){\n  var self = this;\n  this.writable = false;\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  for (var i = 0, l = packets.length; i < l; i++) {\n    parser.encodePacket(packets[i], this.supportsBinary, function(data) {\n      //Sometimes the websocket has already been closed but the browser didn't\n      //have a chance of informing us about it yet, in that case send will\n      //throw an error\n      try {\n        self.ws.send(data);\n      } catch (e){\n        debug('websocket closed before onclose event');\n      }\n    });\n  }\n\n  function ondrain() {\n    self.writable = true;\n    self.emit('drain');\n  }\n  // fake drain\n  // defer to next tick to allow Socket to clear writeBuffer\n  setTimeout(ondrain, 0);\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function(){\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function(){\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function(){\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' == schema && this.port != 443)\n    || ('ws' == schema && this.port != 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = +new Date;\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  return schema + '://' + this.hostname + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function(){\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n\n},{\"../transport\":23,\"component-inherit\":18,\"debug\":30,\"engine.io-parser\":33,\"parseqs\":50,\"ws\":76}],29:[function(require,module,exports){\n// browser shim for xmlhttprequest module\nvar hasCORS = require('has-cors');\n\nmodule.exports = function(opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' != typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' != typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new ActiveXObject('Microsoft.XMLHTTP');\n    } catch(e) { }\n  }\n}\n\n},{\"has-cors\":40}],30:[function(require,module,exports){\n\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // This hackery is required for IE8,\n  // where the `console.log` function doesn't have 'apply'\n  return 'object' == typeof console\n    && 'function' == typeof console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      localStorage.removeItem('debug');\n    } else {\n      localStorage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = localStorage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n},{\"./debug\":31}],31:[function(require,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n},{\"ms\":47}],32:[function(require,module,exports){\n/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    return uri;\n};\n\n},{}],33:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary');\nvar sliceBuffer = require('arraybuffer.slice');\nvar base64encoder = require('base64-arraybuffer');\nvar after = require('after');\nvar utf8 = require('utf8');\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = navigator.userAgent.match(/Android/i);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if ('function' == typeof supportsBinary) {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if ('function' == typeof utf8encode) {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  // String data\n  if (typeof data == 'string' || data === undefined) {\n    if (data.charAt(0) == 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      try {\n        data = utf8.decode(data);\n      } catch (e) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!global.ArrayBuffer) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary == 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data != 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data == '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = ''\n    , n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (':' != chr) {\n      length += chr;\n    } else {\n      if ('' == length || (length != (n = Number(length)))) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      msg = data.substr(i + 1, n);\n\n      if (length != msg.length) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      if (msg.length) {\n        packet = exports.decodePacket(msg, binaryType, true);\n\n        if (err.type == packet.type && err.data == packet.data) {\n          // parser error in individual packet - ignoring payload\n          return callback(err, 0, 1);\n        }\n\n        var ret = callback(packet, i + n, l);\n        if (false === ret) return;\n      }\n\n      // advance cursor\n      i += n;\n      length = '';\n    }\n  }\n\n  if (length != '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  var numberTooLong = false;\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] == 255) break;\n\n      if (msgLength.length > 310) {\n        numberTooLong = true;\n        break;\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    if(numberTooLong) return callback(err, 0, 1);\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./keys\":34,\"after\":1,\"arraybuffer.slice\":2,\"base64-arraybuffer\":14,\"blob\":15,\"has-binary\":39,\"utf8\":70}],34:[function(require,module,exports){\n\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n\n},{}],35:[function(require,module,exports){\nvar WildEmitter = require('wildemitter');\nvar util = require('util');\n\nfunction Sender(opts) {\n    WildEmitter.call(this);\n    var options = opts || {};\n    this.config = {\n        chunksize: 16384,\n        pacing: 0\n    };\n    // set our config from options\n    var item;\n    for (item in options) {\n        this.config[item] = options[item];\n    }\n\n    this.file = null;\n    this.channel = null;\n}\nutil.inherits(Sender, WildEmitter);\n\nSender.prototype.send = function (file, channel) {\n    var self = this;\n    this.file = file;\n    this.channel = channel;\n    var usePoll = typeof channel.bufferedAmountLowThreshold !== 'number';\n    var offset = 0;\n    var sliceFile = function() {\n        var reader = new window.FileReader();\n        reader.onload = (function() {\n            return function(e) {\n                self.channel.send(e.target.result);\n                self.emit('progress', offset, file.size, e.target.result);\n\n                if (file.size > offset + e.target.result.byteLength) {\n                    if (usePoll) {\n                        window.setTimeout(sliceFile, self.config.pacing);\n                    } else if (channel.bufferedAmount <= channel.bufferedAmountLowThreshold) {\n                        window.setTimeout(sliceFile, 0);\n                    } else {\n                        // wait for bufferedAmountLow to fire\n                    }\n                } else {\n                    self.emit('progress', file.size, file.size, null);\n                    self.emit('sentFile');\n                }\n                offset = offset + self.config.chunksize;\n            };\n        })(file);\n        var slice = file.slice(offset, offset + self.config.chunksize);\n        reader.readAsArrayBuffer(slice);\n    };\n    if (!usePoll) {\n        channel.bufferedAmountLowThreshold = 8 * this.config.chunksize;\n        channel.addEventListener('bufferedamountlow', sliceFile);\n    }\n    window.setTimeout(sliceFile, 0);\n};\n\nfunction Receiver() {\n    WildEmitter.call(this);\n\n    this.receiveBuffer = [];\n    this.received = 0;\n    this.metadata = {};\n    this.channel = null;\n}\nutil.inherits(Receiver, WildEmitter);\n\nReceiver.prototype.receive = function (metadata, channel) {\n    var self = this;\n\n    if (metadata) {\n        this.metadata = metadata;\n    }\n    this.channel = channel;\n    // chrome only supports arraybuffers and those make it easier to calc the hash\n    channel.binaryType = 'arraybuffer';\n    this.channel.onmessage = function (event) {\n        var len = event.data.byteLength;\n        self.received += len;\n        self.receiveBuffer.push(event.data);\n\n        self.emit('progress', self.received, self.metadata.size, event.data);\n        if (self.received === self.metadata.size) {\n            self.emit('receivedFile', new window.Blob(self.receiveBuffer), self.metadata);\n            self.receiveBuffer = []; // discard receivebuffer\n        } else if (self.received > self.metadata.size) {\n            // FIXME\n            console.error('received more than expected, discarding...');\n            self.receiveBuffer = []; // just discard...\n\n        }\n    };\n};\n\nmodule.exports = {};\nmodule.exports.support = typeof window !== 'undefined' && window && window.File && window.FileReader && window.Blob;\nmodule.exports.Sender = Sender;\nmodule.exports.Receiver = Receiver;\n\n},{\"util\":73,\"wildemitter\":75}],36:[function(require,module,exports){\n// cache for constraints and callback\nvar cache = {};\n\nmodule.exports = function (constraints, cb) {\n    var hasConstraints = arguments.length === 2;\n    var callback = hasConstraints ? cb : constraints;\n    var error;\n\n    if (typeof window === 'undefined' || window.location.protocol === 'http:') {\n        error = new Error('NavigatorUserMediaError');\n        error.name = 'HTTPS_REQUIRED';\n        return callback(error);\n    }\n\n    if (window.navigator.userAgent.match('Chrome')) {\n        var chromever = parseInt(window.navigator.userAgent.match(/Chrome\\/(.*) /)[1], 10);\n        var maxver = 33;\n        var isCef = !window.chrome.webstore;\n        // \"known\" crash in chrome 34 and 35 on linux\n        if (window.navigator.userAgent.match('Linux')) maxver = 35;\n\n        // check that the extension is installed by looking for a\n        // sessionStorage variable that contains the extension id\n        // this has to be set after installation unless the contest\n        // script does that\n        if (sessionStorage.getScreenMediaJSExtensionId) {\n            chrome.runtime.sendMessage(sessionStorage.getScreenMediaJSExtensionId,\n                {type:'getScreen', id: 1}, null,\n                function (data) {\n                    if (!data || data.sourceId === '') { // user canceled\n                        var error = new Error('NavigatorUserMediaError');\n                        error.name = 'NotAllowedError';\n                        callback(error);\n                    } else {\n                        constraints = (hasConstraints && constraints) || {audio: false, video: {\n                            mandatory: {\n                                chromeMediaSource: 'desktop',\n                                maxWidth: window.screen.width,\n                                maxHeight: window.screen.height,\n                                maxFrameRate: 3\n                            }\n                        }};\n                        constraints.video.mandatory.chromeMediaSourceId = data.sourceId;\n                        window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                            callback(null, stream);\n                        }).catch(function (err) {\n                            callback(err);\n                        });\n                    }\n                }\n            );\n        } else if (window.cefGetScreenMedia) {\n            //window.cefGetScreenMedia is experimental - may be removed without notice\n            window.cefGetScreenMedia(function(sourceId) {\n                if (!sourceId) {\n                    var error = new Error('cefGetScreenMediaError');\n                    error.name = 'CEF_GETSCREENMEDIA_CANCELED';\n                    callback(error);\n                } else {\n                    constraints = (hasConstraints && constraints) || {audio: false, video: {\n                        mandatory: {\n                            chromeMediaSource: 'desktop',\n                            maxWidth: window.screen.width,\n                            maxHeight: window.screen.height,\n                            maxFrameRate: 3\n                        },\n                        optional: [\n                            {googLeakyBucket: true},\n                            {googTemporalLayeredScreencast: true}\n                        ]\n                    }};\n                    constraints.video.mandatory.chromeMediaSourceId = sourceId;\n                    window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                        callback(null, stream);\n                    }).catch(function (err) {\n                        callback(err);\n                    });\n                }\n            });\n        } else if (isCef || (chromever >= 26 && chromever <= maxver)) {\n            // chrome 26 - chrome 33 way to do it -- requires bad chrome://flags\n            // note: this is basically in maintenance mode and will go away soon\n            constraints = (hasConstraints && constraints) || {\n                video: {\n                    mandatory: {\n                        googLeakyBucket: true,\n                        maxWidth: window.screen.width,\n                        maxHeight: window.screen.height,\n                        maxFrameRate: 3,\n                        chromeMediaSource: 'screen'\n                    }\n                }\n            };\n            window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                callback(null, stream);\n            }).catch(function (err) {\n                callback(err);\n            });\n        } else {\n            // chrome 34+ way requiring an extension\n            var pending = window.setTimeout(function () {\n                error = new Error('NavigatorUserMediaError');\n                error.name = 'EXTENSION_UNAVAILABLE';\n                return callback(error);\n            }, 1000);\n            cache[pending] = [callback, hasConstraints ? constraints : null];\n            window.postMessage({ type: 'getScreen', id: pending }, '*');\n        }\n    } else if (window.navigator.userAgent.match('Firefox')) {\n        var ffver = parseInt(window.navigator.userAgent.match(/Firefox\\/(.*)/)[1], 10);\n        if (ffver >= 33) {\n            constraints = (hasConstraints && constraints) || {\n                video: {\n                    mozMediaSource: 'window',\n                    mediaSource: 'window'\n                }\n            };\n            window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                callback(null, stream);\n                var lastTime = stream.currentTime;\n                var polly = window.setInterval(function () {\n                    if (!stream) window.clearInterval(polly);\n                    if (stream.currentTime == lastTime) {\n                        window.clearInterval(polly);\n                        if (stream.onended) {\n                            stream.onended();\n                        }\n                    }\n                    lastTime = stream.currentTime;\n                }, 500);\n            }).catch(function (err) {\n                callback(err);\n            });\n        } else {\n            error = new Error('NavigatorUserMediaError');\n            error.name = 'EXTENSION_UNAVAILABLE'; // does not make much sense but...\n        }\n    }\n};\n\ntypeof window !== 'undefined' && window.addEventListener('message', function (event) {\n    if (event.origin != window.location.origin) {\n        return;\n    }\n    if (event.data.type == 'gotScreen' && cache[event.data.id]) {\n        var data = cache[event.data.id];\n        var constraints = data[1];\n        var callback = data[0];\n        delete cache[event.data.id];\n\n        if (event.data.sourceId === '') { // user canceled\n            var error = new Error('NavigatorUserMediaError');\n            error.name = 'NotAllowedError';\n            callback(error);\n        } else {\n            constraints = constraints || {audio: false, video: {\n                mandatory: {\n                    chromeMediaSource: 'desktop',\n                    maxWidth: window.screen.width,\n                    maxHeight: window.screen.height,\n                    maxFrameRate: 3\n                },\n                optional: [\n                    {googLeakyBucket: true},\n                    {googTemporalLayeredScreencast: true}\n                ]\n            }};\n            constraints.video.mandatory.chromeMediaSourceId = event.data.sourceId;\n            window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                callback(null, stream);\n            }).catch(function (err) {\n                callback(err);\n            });\n        }\n    } else if (event.data.type == 'getScreenPending') {\n        window.clearTimeout(event.data.id);\n    }\n});\n\n},{}],37:[function(require,module,exports){\n\n/**\n * Returns `this`. Execute this without a \"context\" (i.e. without it being\n * attached to an object of the left-hand side), and `this` points to the\n * \"global\" scope of the current JS execution.\n */\n\nmodule.exports = (function () { return this; })();\n\n},{}],38:[function(require,module,exports){\nvar WildEmitter = require('wildemitter');\n\nfunction getMaxVolume (analyser, fftBins) {\n  var maxVolume = -Infinity;\n  analyser.getFloatFrequencyData(fftBins);\n\n  for(var i=4, ii=fftBins.length; i < ii; i++) {\n    if (fftBins[i] > maxVolume && fftBins[i] < 0) {\n      maxVolume = fftBins[i];\n    }\n  };\n\n  return maxVolume;\n}\n\n\nvar audioContextType;\nif (typeof window !== 'undefined') {\n  audioContextType = window.AudioContext || window.webkitAudioContext;\n}\n// use a single audio context due to hardware limits\nvar audioContext = null;\nmodule.exports = function(stream, options) {\n  var harker = new WildEmitter();\n\n\n  // make it not break in non-supported browsers\n  if (!audioContextType) return harker;\n\n  //Config\n  var options = options || {},\n      smoothing = (options.smoothing || 0.1),\n      interval = (options.interval || 50),\n      threshold = options.threshold,\n      play = options.play,\n      history = options.history || 10,\n      running = true;\n\n  //Setup Audio Context\n  if (!audioContext) {\n    audioContext = new audioContextType();\n  }\n  var sourceNode, fftBins, analyser;\n\n  analyser = audioContext.createAnalyser();\n  analyser.fftSize = 512;\n  analyser.smoothingTimeConstant = smoothing;\n  fftBins = new Float32Array(analyser.frequencyBinCount);\n\n  if (stream.jquery) stream = stream[0];\n  if (stream instanceof HTMLAudioElement || stream instanceof HTMLVideoElement) {\n    //Audio Tag\n    sourceNode = audioContext.createMediaElementSource(stream);\n    if (typeof play === 'undefined') play = true;\n    threshold = threshold || -50;\n  } else {\n    //WebRTC Stream\n    sourceNode = audioContext.createMediaStreamSource(stream);\n    threshold = threshold || -50;\n  }\n\n  sourceNode.connect(analyser);\n  if (play) analyser.connect(audioContext.destination);\n\n  harker.speaking = false;\n\n  harker.setThreshold = function(t) {\n    threshold = t;\n  };\n\n  harker.setInterval = function(i) {\n    interval = i;\n  };\n\n  harker.stop = function() {\n    running = false;\n    harker.emit('volume_change', -100, threshold);\n    if (harker.speaking) {\n      harker.speaking = false;\n      harker.emit('stopped_speaking');\n    }\n    analyser.disconnect();\n    sourceNode.disconnect();\n  };\n  harker.speakingHistory = [];\n  for (var i = 0; i < history; i++) {\n      harker.speakingHistory.push(0);\n  }\n\n  // Poll the analyser node to determine if speaking\n  // and emit events if changed\n  var looper = function() {\n    setTimeout(function() {\n\n      //check if stop has been called\n      if(!running) {\n        return;\n      }\n\n      var currentVolume = getMaxVolume(analyser, fftBins);\n\n      harker.emit('volume_change', currentVolume, threshold);\n\n      var history = 0;\n      if (currentVolume > threshold && !harker.speaking) {\n        // trigger quickly, short history\n        for (var i = harker.speakingHistory.length - 3; i < harker.speakingHistory.length; i++) {\n          history += harker.speakingHistory[i];\n        }\n        if (history >= 2) {\n          harker.speaking = true;\n          harker.emit('speaking');\n        }\n      } else if (currentVolume < threshold && harker.speaking) {\n        for (var i = 0; i < harker.speakingHistory.length; i++) {\n          history += harker.speakingHistory[i];\n        }\n        if (history == 0) {\n          harker.speaking = false;\n          harker.emit('stopped_speaking');\n        }\n      }\n      harker.speakingHistory.shift();\n      harker.speakingHistory.push(0 + (currentVolume > threshold));\n\n      looper();\n    }, interval);\n  };\n  looper();\n\n\n  return harker;\n}\n\n},{\"wildemitter\":75}],39:[function(require,module,exports){\n(function (global){\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Right now only Buffer and ArrayBuffer are supported..\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary(data) {\n\n  function _hasBinary(obj) {\n    if (!obj) return false;\n\n    if ( (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n         (global.Blob && obj instanceof Blob) ||\n         (global.File && obj instanceof File)\n        ) {\n      return true;\n    }\n\n    if (isArray(obj)) {\n      for (var i = 0; i < obj.length; i++) {\n          if (_hasBinary(obj[i])) {\n              return true;\n          }\n      }\n    } else if (obj && 'object' == typeof obj) {\n      if (obj.toJSON) {\n        obj = obj.toJSON();\n      }\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return _hasBinary(data);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"isarray\":42}],40:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar global = require('global');\n\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = 'XMLHttpRequest' in global &&\n    'withCredentials' in new global.XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n\n},{\"global\":37}],41:[function(require,module,exports){\n\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n},{}],42:[function(require,module,exports){\nmodule.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n},{}],43:[function(require,module,exports){\n/*! JSON v3.2.6 | http://bestiejs.github.io/json3 | Copyright 2012-2013, Kit Cambridge | http://kit.mit-license.org */\n;(function (window) {\n  // Convenience aliases.\n  var getClass = {}.toString, isProperty, forEach, undef;\n\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // Detect native implementations.\n  var nativeJSON = typeof JSON == \"object\" && JSON;\n\n  // Set up the JSON 3 namespace, preferring the CommonJS `exports` object if\n  // available.\n  var JSON3 = typeof exports == \"object\" && exports && !exports.nodeType && exports;\n\n  if (JSON3 && nativeJSON) {\n    // Explicitly delegate to the native `stringify` and `parse`\n    // implementations in CommonJS environments.\n    JSON3.stringify = nativeJSON.stringify;\n    JSON3.parse = nativeJSON.parse;\n  } else {\n    // Export for web browsers, JavaScript engines, and asynchronous module\n    // loaders, using the global `JSON` object if available.\n    JSON3 = window.JSON = nativeJSON || {};\n  }\n\n  // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n  var isExtended = new Date(-3509827334573292);\n  try {\n    // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n    // results for certain dates in Opera >= 10.53.\n    isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n      // Safari < 2.0.2 stores the internal millisecond time value correctly,\n      // but clips the values returned by the date methods to the range of\n      // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n      isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n  } catch (exception) {}\n\n  // Internal: Determines whether the native `JSON.stringify` and `parse`\n  // implementations are spec-compliant. Based on work by Ken Snyder.\n  function has(name) {\n    if (has[name] !== undef) {\n      // Return cached feature test result.\n      return has[name];\n    }\n\n    var isSupported;\n    if (name == \"bug-string-char-index\") {\n      // IE <= 7 doesn't support accessing string characters using square\n      // bracket notation. IE 8 only supports this for primitives.\n      isSupported = \"a\"[0] != \"a\";\n    } else if (name == \"json\") {\n      // Indicates whether both `JSON.stringify` and `JSON.parse` are\n      // supported.\n      isSupported = has(\"json-stringify\") && has(\"json-parse\");\n    } else {\n      var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n      // Test `JSON.stringify`.\n      if (name == \"json-stringify\") {\n        var stringify = JSON3.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n        if (stringifySupported) {\n          // A test function object with a custom `toJSON` method.\n          (value = function () {\n            return 1;\n          }).toJSON = value;\n          try {\n            stringifySupported =\n              // Firefox 3.1b1 and b2 serialize string, number, and boolean\n              // primitives as object literals.\n              stringify(0) === \"0\" &&\n              // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n              // literals.\n              stringify(new Number()) === \"0\" &&\n              stringify(new String()) == '\"\"' &&\n              // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n              // does not define a canonical JSON representation (this applies to\n              // objects with `toJSON` properties as well, *unless* they are nested\n              // within an object or array).\n              stringify(getClass) === undef &&\n              // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n              // FF 3.1b3 pass this test.\n              stringify(undef) === undef &&\n              // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n              // respectively, if the value is omitted entirely.\n              stringify() === undef &&\n              // FF 3.1b1, 2 throw an error if the given value is not a number,\n              // string, array, object, Boolean, or `null` literal. This applies to\n              // objects with custom `toJSON` methods as well, unless they are nested\n              // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n              // methods entirely.\n              stringify(value) === \"1\" &&\n              stringify([value]) == \"[1]\" &&\n              // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n              // `\"[null]\"`.\n              stringify([undef]) == \"[null]\" &&\n              // YUI 3.0.0b1 fails to serialize `null` literals.\n              stringify(null) == \"null\" &&\n              // FF 3.1b1, 2 halts serialization if an array contains a function:\n              // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n              // elides non-JSON values from objects and arrays, unless they\n              // define custom `toJSON` methods.\n              stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n              // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n              // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n              stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n              // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n              stringify(null, value) === \"1\" &&\n              stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n              // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n              // serialize extended years.\n              stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n              // The milliseconds are optional in ES 5, but required in 5.1.\n              stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n              // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n              // four-digit years instead of six-digit years. Credits: @Yaffle.\n              stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n              // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n              // values less than 1000. Credits: @Yaffle.\n              stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n          } catch (exception) {\n            stringifySupported = false;\n          }\n        }\n        isSupported = stringifySupported;\n      }\n      // Test `JSON.parse`.\n      if (name == \"json-parse\") {\n        var parse = JSON3.parse;\n        if (typeof parse == \"function\") {\n          try {\n            // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n            // Conforming implementations should also coerce the initial argument to\n            // a string prior to parsing.\n            if (parse(\"0\") === 0 && !parse(false)) {\n              // Simple parsing test.\n              value = parse(serialized);\n              var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n              if (parseSupported) {\n                try {\n                  // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                  parseSupported = !parse('\"\\t\"');\n                } catch (exception) {}\n                if (parseSupported) {\n                  try {\n                    // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                    // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                    // certain octal literals.\n                    parseSupported = parse(\"01\") !== 1;\n                  } catch (exception) {}\n                }\n                if (parseSupported) {\n                  try {\n                    // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                    // points. These environments, along with FF 3.1b1 and 2,\n                    // also allow trailing commas in JSON objects and arrays.\n                    parseSupported = parse(\"1.\") !== 1;\n                  } catch (exception) {}\n                }\n              }\n            }\n          } catch (exception) {\n            parseSupported = false;\n          }\n        }\n        isSupported = parseSupported;\n      }\n    }\n    return has[name] = !!isSupported;\n  }\n\n  if (!has(\"json\")) {\n    // Common `[[Class]]` name aliases.\n    var functionClass = \"[object Function]\";\n    var dateClass = \"[object Date]\";\n    var numberClass = \"[object Number]\";\n    var stringClass = \"[object String]\";\n    var arrayClass = \"[object Array]\";\n    var booleanClass = \"[object Boolean]\";\n\n    // Detect incomplete support for accessing string characters by index.\n    var charIndexBuggy = has(\"bug-string-char-index\");\n\n    // Define additional utility methods if the `Date` methods are buggy.\n    if (!isExtended) {\n      var floor = Math.floor;\n      // A mapping between the months of the year and the number of days between\n      // January 1st and the first of the respective month.\n      var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n      // Internal: Calculates the number of days between the Unix epoch and the\n      // first day of the given month.\n      var getDay = function (year, month) {\n        return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n      };\n    }\n\n    // Internal: Determines if a property is a direct property of the given\n    // object. Delegates to the native `Object#hasOwnProperty` method.\n    if (!(isProperty = {}.hasOwnProperty)) {\n      isProperty = function (property) {\n        var members = {}, constructor;\n        if ((members.__proto__ = null, members.__proto__ = {\n          // The *proto* property cannot be set multiple times in recent\n          // versions of Firefox and SeaMonkey.\n          \"toString\": 1\n        }, members).toString != getClass) {\n          // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n          // supports the mutable *proto* property.\n          isProperty = function (property) {\n            // Capture and break the object's prototype chain (see section 8.6.2\n            // of the ES 5.1 spec). The parenthesized expression prevents an\n            // unsafe transformation by the Closure Compiler.\n            var original = this.__proto__, result = property in (this.__proto__ = null, this);\n            // Restore the original prototype chain.\n            this.__proto__ = original;\n            return result;\n          };\n        } else {\n          // Capture a reference to the top-level `Object` constructor.\n          constructor = members.constructor;\n          // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n          // other environments.\n          isProperty = function (property) {\n            var parent = (this.constructor || constructor).prototype;\n            return property in this && !(property in parent && this[property] === parent[property]);\n          };\n        }\n        members = null;\n        return isProperty.call(this, property);\n      };\n    }\n\n    // Internal: A set of primitive types used by `isHostType`.\n    var PrimitiveTypes = {\n      'boolean': 1,\n      'number': 1,\n      'string': 1,\n      'undefined': 1\n    };\n\n    // Internal: Determines if the given object `property` value is a\n    // non-primitive.\n    var isHostType = function (object, property) {\n      var type = typeof object[property];\n      return type == 'object' ? !!object[property] : !PrimitiveTypes[type];\n    };\n\n    // Internal: Normalizes the `for...in` iteration algorithm across\n    // environments. Each enumerated key is yielded to a `callback` function.\n    forEach = function (object, callback) {\n      var size = 0, Properties, members, property;\n\n      // Tests for bugs in the current environment's `for...in` algorithm. The\n      // `valueOf` property inherits the non-enumerable flag from\n      // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n      (Properties = function () {\n        this.valueOf = 0;\n      }).prototype.valueOf = 0;\n\n      // Iterate over a new instance of the `Properties` class.\n      members = new Properties();\n      for (property in members) {\n        // Ignore all properties inherited from `Object.prototype`.\n        if (isProperty.call(members, property)) {\n          size++;\n        }\n      }\n      Properties = members = null;\n\n      // Normalize the iteration algorithm.\n      if (!size) {\n        // A list of non-enumerable properties inherited from `Object.prototype`.\n        members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n        // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n        // properties.\n        forEach = function (object, callback) {\n          var isFunction = getClass.call(object) == functionClass, property, length;\n          var hasProperty = !isFunction && typeof object.constructor != 'function' && isHostType(object, 'hasOwnProperty') ? object.hasOwnProperty : isProperty;\n          for (property in object) {\n            // Gecko <= 1.0 enumerates the `prototype` property of functions under\n            // certain conditions; IE does not.\n            if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n              callback(property);\n            }\n          }\n          // Manually invoke the callback for each non-enumerable property.\n          for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n        };\n      } else if (size == 2) {\n        // Safari <= 2.0.4 enumerates shadowed properties twice.\n        forEach = function (object, callback) {\n          // Create a set of iterated properties.\n          var members = {}, isFunction = getClass.call(object) == functionClass, property;\n          for (property in object) {\n            // Store each property name to prevent double enumeration. The\n            // `prototype` property of functions is not enumerated due to cross-\n            // environment inconsistencies.\n            if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n              callback(property);\n            }\n          }\n        };\n      } else {\n        // No bugs detected; use the standard `for...in` algorithm.\n        forEach = function (object, callback) {\n          var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n          for (property in object) {\n            if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n              callback(property);\n            }\n          }\n          // Manually invoke the callback for the `constructor` property due to\n          // cross-environment inconsistencies.\n          if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n            callback(property);\n          }\n        };\n      }\n      return forEach(object, callback);\n    };\n\n    // Public: Serializes a JavaScript `value` as a JSON string. The optional\n    // `filter` argument may specify either a function that alters how object and\n    // array members are serialized, or an array of strings and numbers that\n    // indicates which properties should be serialized. The optional `width`\n    // argument may be either a string or number that specifies the indentation\n    // level of the output.\n    if (!has(\"json-stringify\")) {\n      // Internal: A map of control characters and their escaped equivalents.\n      var Escapes = {\n        92: \"\\\\\\\\\",\n        34: '\\\\\"',\n        8: \"\\\\b\",\n        12: \"\\\\f\",\n        10: \"\\\\n\",\n        13: \"\\\\r\",\n        9: \"\\\\t\"\n      };\n\n      // Internal: Converts `value` into a zero-padded string such that its\n      // length is at least equal to `width`. The `width` must be <= 6.\n      var leadingZeroes = \"000000\";\n      var toPaddedString = function (width, value) {\n        // The `|| 0` expression is necessary to work around a bug in\n        // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n        return (leadingZeroes + (value || 0)).slice(-width);\n      };\n\n      // Internal: Double-quotes a string `value`, replacing all ASCII control\n      // characters (characters with code unit values between 0 and 31) with\n      // their escaped equivalents. This is an implementation of the\n      // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n      var unicodePrefix = \"\\\\u00\";\n      var quote = function (value) {\n        var result = '\"', index = 0, length = value.length, isLarge = length > 10 && charIndexBuggy, symbols;\n        if (isLarge) {\n          symbols = value.split(\"\");\n        }\n        for (; index < length; index++) {\n          var charCode = value.charCodeAt(index);\n          // If the character is a control character, append its Unicode or\n          // shorthand escape sequence; otherwise, append the character as-is.\n          switch (charCode) {\n            case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n              result += Escapes[charCode];\n              break;\n            default:\n              if (charCode < 32) {\n                result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                break;\n              }\n              result += isLarge ? symbols[index] : charIndexBuggy ? value.charAt(index) : value[index];\n          }\n        }\n        return result + '\"';\n      };\n\n      // Internal: Recursively serializes an object. Implements the\n      // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n      var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n        var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n        try {\n          // Necessary for host object support.\n          value = object[property];\n        } catch (exception) {}\n        if (typeof value == \"object\" && value) {\n          className = getClass.call(value);\n          if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n            if (value > -1 / 0 && value < 1 / 0) {\n              // Dates are serialized according to the `Date#toJSON` method\n              // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n              // for the ISO 8601 date time string format.\n              if (getDay) {\n                // Manually compute the year, month, date, hours, minutes,\n                // seconds, and milliseconds if the `getUTC*` methods are\n                // buggy. Adapted from @Yaffle's `date-shim` project.\n                date = floor(value / 864e5);\n                for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                date = 1 + date - getDay(year, month);\n                // The `time` value specifies the time within the day (see ES\n                // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                // to compute `A modulo B`, as the `%` operator does not\n                // correspond to the `modulo` operation for negative numbers.\n                time = (value % 864e5 + 864e5) % 864e5;\n                // The hours, minutes, seconds, and milliseconds are obtained by\n                // decomposing the time within the day. See section 15.9.1.10.\n                hours = floor(time / 36e5) % 24;\n                minutes = floor(time / 6e4) % 60;\n                seconds = floor(time / 1e3) % 60;\n                milliseconds = time % 1e3;\n              } else {\n                year = value.getUTCFullYear();\n                month = value.getUTCMonth();\n                date = value.getUTCDate();\n                hours = value.getUTCHours();\n                minutes = value.getUTCMinutes();\n                seconds = value.getUTCSeconds();\n                milliseconds = value.getUTCMilliseconds();\n              }\n              // Serialize extended years correctly.\n              value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                // Months, dates, hours, minutes, and seconds should have two\n                // digits; milliseconds should have three.\n                \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                // Milliseconds are optional in ES 5.0, but required in 5.1.\n                \".\" + toPaddedString(3, milliseconds) + \"Z\";\n            } else {\n              value = null;\n            }\n          } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n            // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n            // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n            // ignores all `toJSON` methods on these objects unless they are\n            // defined directly on an instance.\n            value = value.toJSON(property);\n          }\n        }\n        if (callback) {\n          // If a replacement function was provided, call it to obtain the value\n          // for serialization.\n          value = callback.call(object, property, value);\n        }\n        if (value === null) {\n          return \"null\";\n        }\n        className = getClass.call(value);\n        if (className == booleanClass) {\n          // Booleans are represented literally.\n          return \"\" + value;\n        } else if (className == numberClass) {\n          // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n          // `\"null\"`.\n          return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n        } else if (className == stringClass) {\n          // Strings are double-quoted and escaped.\n          return quote(\"\" + value);\n        }\n        // Recursively serialize objects and arrays.\n        if (typeof value == \"object\") {\n          // Check for cyclic structures. This is a linear search; performance\n          // is inversely proportional to the number of unique nested objects.\n          for (length = stack.length; length--;) {\n            if (stack[length] === value) {\n              // Cyclic structures cannot be serialized by `JSON.stringify`.\n              throw TypeError();\n            }\n          }\n          // Add the object to the stack of traversed objects.\n          stack.push(value);\n          results = [];\n          // Save the current indentation level and indent one additional level.\n          prefix = indentation;\n          indentation += whitespace;\n          if (className == arrayClass) {\n            // Recursively serialize array elements.\n            for (index = 0, length = value.length; index < length; index++) {\n              element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n              results.push(element === undef ? \"null\" : element);\n            }\n            result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n          } else {\n            // Recursively serialize object members. Members are selected from\n            // either a user-specified list of property names, or the object\n            // itself.\n            forEach(properties || value, function (property) {\n              var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n              if (element !== undef) {\n                // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                // is not the empty string, let `member` {quote(property) + \":\"}\n                // be the concatenation of `member` and the `space` character.\"\n                // The \"`space` character\" refers to the literal space\n                // character, not the `space` {width} argument provided to\n                // `JSON.stringify`.\n                results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n              }\n            });\n            result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n          }\n          // Remove the object from the traversed object stack.\n          stack.pop();\n          return result;\n        }\n      };\n\n      // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n      JSON3.stringify = function (source, filter, width) {\n        var whitespace, callback, properties, className;\n        if (typeof filter == \"function\" || typeof filter == \"object\" && filter) {\n          if ((className = getClass.call(filter)) == functionClass) {\n            callback = filter;\n          } else if (className == arrayClass) {\n            // Convert the property names array into a makeshift set.\n            properties = {};\n            for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n          }\n        }\n        if (width) {\n          if ((className = getClass.call(width)) == numberClass) {\n            // Convert the `width` to an integer and create a string containing\n            // `width` number of space characters.\n            if ((width -= width % 1) > 0) {\n              for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n            }\n          } else if (className == stringClass) {\n            whitespace = width.length <= 10 ? width : width.slice(0, 10);\n          }\n        }\n        // Opera <= 7.54u2 discards the values associated with empty string keys\n        // (`\"\"`) only if they are used directly within an object member list\n        // (e.g., `!(\"\" in { \"\": 1})`).\n        return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n      };\n    }\n\n    // Public: Parses a JSON source string.\n    if (!has(\"json-parse\")) {\n      var fromCharCode = String.fromCharCode;\n\n      // Internal: A map of escaped control characters and their unescaped\n      // equivalents.\n      var Unescapes = {\n        92: \"\\\\\",\n        34: '\"',\n        47: \"/\",\n        98: \"\\b\",\n        116: \"\\t\",\n        110: \"\\n\",\n        102: \"\\f\",\n        114: \"\\r\"\n      };\n\n      // Internal: Stores the parser state.\n      var Index, Source;\n\n      // Internal: Resets the parser state and throws a `SyntaxError`.\n      var abort = function() {\n        Index = Source = null;\n        throw SyntaxError();\n      };\n\n      // Internal: Returns the next token, or `\"$\"` if the parser has reached\n      // the end of the source string. A token may be a string, number, `null`\n      // literal, or Boolean literal.\n      var lex = function () {\n        var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n        while (Index < length) {\n          charCode = source.charCodeAt(Index);\n          switch (charCode) {\n            case 9: case 10: case 13: case 32:\n              // Skip whitespace tokens, including tabs, carriage returns, line\n              // feeds, and space characters.\n              Index++;\n              break;\n            case 123: case 125: case 91: case 93: case 58: case 44:\n              // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n              // the current position.\n              value = charIndexBuggy ? source.charAt(Index) : source[Index];\n              Index++;\n              return value;\n            case 34:\n              // `\"` delimits a JSON string; advance to the next character and\n              // begin parsing the string. String tokens are prefixed with the\n              // sentinel `@` character to distinguish them from punctuators and\n              // end-of-string tokens.\n              for (value = \"@\", Index++; Index < length;) {\n                charCode = source.charCodeAt(Index);\n                if (charCode < 32) {\n                  // Unescaped ASCII control characters (those with a code unit\n                  // less than the space character) are not permitted.\n                  abort();\n                } else if (charCode == 92) {\n                  // A reverse solidus (`\\`) marks the beginning of an escaped\n                  // control character (including `\"`, `\\`, and `/`) or Unicode\n                  // escape sequence.\n                  charCode = source.charCodeAt(++Index);\n                  switch (charCode) {\n                    case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                      // Revive escaped control characters.\n                      value += Unescapes[charCode];\n                      Index++;\n                      break;\n                    case 117:\n                      // `\\u` marks the beginning of a Unicode escape sequence.\n                      // Advance to the first character and validate the\n                      // four-digit code point.\n                      begin = ++Index;\n                      for (position = Index + 4; Index < position; Index++) {\n                        charCode = source.charCodeAt(Index);\n                        // A valid sequence comprises four hexdigits (case-\n                        // insensitive) that form a single hexadecimal value.\n                        if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                          // Invalid Unicode escape sequence.\n                          abort();\n                        }\n                      }\n                      // Revive the escaped character.\n                      value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                      break;\n                    default:\n                      // Invalid escape sequence.\n                      abort();\n                  }\n                } else {\n                  if (charCode == 34) {\n                    // An unescaped double-quote character marks the end of the\n                    // string.\n                    break;\n                  }\n                  charCode = source.charCodeAt(Index);\n                  begin = Index;\n                  // Optimize for the common case where a string is valid.\n                  while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                    charCode = source.charCodeAt(++Index);\n                  }\n                  // Append the string as-is.\n                  value += source.slice(begin, Index);\n                }\n              }\n              if (source.charCodeAt(Index) == 34) {\n                // Advance to the next character and return the revived string.\n                Index++;\n                return value;\n              }\n              // Unterminated string.\n              abort();\n            default:\n              // Parse numbers and literals.\n              begin = Index;\n              // Advance past the negative sign, if one is specified.\n              if (charCode == 45) {\n                isSigned = true;\n                charCode = source.charCodeAt(++Index);\n              }\n              // Parse an integer or floating-point value.\n              if (charCode >= 48 && charCode <= 57) {\n                // Leading zeroes are interpreted as octal literals.\n                if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                  // Illegal octal literal.\n                  abort();\n                }\n                isSigned = false;\n                // Parse the integer component.\n                for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                // Floats cannot contain a leading decimal point; however, this\n                // case is already accounted for by the parser.\n                if (source.charCodeAt(Index) == 46) {\n                  position = ++Index;\n                  // Parse the decimal component.\n                  for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                  if (position == Index) {\n                    // Illegal trailing decimal.\n                    abort();\n                  }\n                  Index = position;\n                }\n                // Parse exponents. The `e` denoting the exponent is\n                // case-insensitive.\n                charCode = source.charCodeAt(Index);\n                if (charCode == 101 || charCode == 69) {\n                  charCode = source.charCodeAt(++Index);\n                  // Skip past the sign following the exponent, if one is\n                  // specified.\n                  if (charCode == 43 || charCode == 45) {\n                    Index++;\n                  }\n                  // Parse the exponential component.\n                  for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                  if (position == Index) {\n                    // Illegal empty exponent.\n                    abort();\n                  }\n                  Index = position;\n                }\n                // Coerce the parsed value to a JavaScript number.\n                return +source.slice(begin, Index);\n              }\n              // A negative sign may only precede numbers.\n              if (isSigned) {\n                abort();\n              }\n              // `true`, `false`, and `null` literals.\n              if (source.slice(Index, Index + 4) == \"true\") {\n                Index += 4;\n                return true;\n              } else if (source.slice(Index, Index + 5) == \"false\") {\n                Index += 5;\n                return false;\n              } else if (source.slice(Index, Index + 4) == \"null\") {\n                Index += 4;\n                return null;\n              }\n              // Unrecognized token.\n              abort();\n          }\n        }\n        // Return the sentinel `$` character if the parser has reached the end\n        // of the source string.\n        return \"$\";\n      };\n\n      // Internal: Parses a JSON `value` token.\n      var get = function (value) {\n        var results, hasMembers;\n        if (value == \"$\") {\n          // Unexpected end of input.\n          abort();\n        }\n        if (typeof value == \"string\") {\n          if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n            // Remove the sentinel `@` character.\n            return value.slice(1);\n          }\n          // Parse object and array literals.\n          if (value == \"[\") {\n            // Parses a JSON array, returning a new JavaScript array.\n            results = [];\n            for (;; hasMembers || (hasMembers = true)) {\n              value = lex();\n              // A closing square bracket marks the end of the array literal.\n              if (value == \"]\") {\n                break;\n              }\n              // If the array literal contains elements, the current token\n              // should be a comma separating the previous element from the\n              // next.\n              if (hasMembers) {\n                if (value == \",\") {\n                  value = lex();\n                  if (value == \"]\") {\n                    // Unexpected trailing `,` in array literal.\n                    abort();\n                  }\n                } else {\n                  // A `,` must separate each array element.\n                  abort();\n                }\n              }\n              // Elisions and leading commas are not permitted.\n              if (value == \",\") {\n                abort();\n              }\n              results.push(get(value));\n            }\n            return results;\n          } else if (value == \"{\") {\n            // Parses a JSON object, returning a new JavaScript object.\n            results = {};\n            for (;; hasMembers || (hasMembers = true)) {\n              value = lex();\n              // A closing curly brace marks the end of the object literal.\n              if (value == \"}\") {\n                break;\n              }\n              // If the object literal contains members, the current token\n              // should be a comma separator.\n              if (hasMembers) {\n                if (value == \",\") {\n                  value = lex();\n                  if (value == \"}\") {\n                    // Unexpected trailing `,` in object literal.\n                    abort();\n                  }\n                } else {\n                  // A `,` must separate each object member.\n                  abort();\n                }\n              }\n              // Leading commas are not permitted, object property names must be\n              // double-quoted strings, and a `:` must separate each property\n              // name and value.\n              if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                abort();\n              }\n              results[value.slice(1)] = get(lex());\n            }\n            return results;\n          }\n          // Unexpected token encountered.\n          abort();\n        }\n        return value;\n      };\n\n      // Internal: Updates a traversed object member.\n      var update = function(source, property, callback) {\n        var element = walk(source, property, callback);\n        if (element === undef) {\n          delete source[property];\n        } else {\n          source[property] = element;\n        }\n      };\n\n      // Internal: Recursively traverses a parsed JSON object, invoking the\n      // `callback` function for each value. This is an implementation of the\n      // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n      var walk = function (source, property, callback) {\n        var value = source[property], length;\n        if (typeof value == \"object\" && value) {\n          // `forEach` can't be used to traverse an array in Opera <= 8.54\n          // because its `Object#hasOwnProperty` implementation returns `false`\n          // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n          if (getClass.call(value) == arrayClass) {\n            for (length = value.length; length--;) {\n              update(value, length, callback);\n            }\n          } else {\n            forEach(value, function (property) {\n              update(value, property, callback);\n            });\n          }\n        }\n        return callback.call(source, property, value);\n      };\n\n      // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n      JSON3.parse = function (source, callback) {\n        var result, value;\n        Index = 0;\n        Source = \"\" + source;\n        result = get(lex());\n        // If a JSON string contains multiple tokens, it is invalid.\n        if (lex() != \"$\") {\n          abort();\n        }\n        // Reset the parser state.\n        Index = Source = null;\n        return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n      };\n    }\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}(this));\n\n},{}],44:[function(require,module,exports){\nvar util = require('util');\nvar hark = require('hark');\nvar getScreenMedia = require('getscreenmedia');\nvar WildEmitter = require('wildemitter');\nvar mockconsole = require('mockconsole');\n\nfunction isAllTracksEnded(stream) {\n    var isAllTracksEnded = true;\n    stream.getTracks().forEach(function (t) {\n        isAllTracksEnded = t.readyState === 'ended' && isAllTracksEnded;\n    });\n    return isAllTracksEnded;\n}\n\nfunction shouldWorkAroundFirefoxStopStream() {\n  if (typeof window === 'undefined') {\n    return false;\n  }\n  if (!window.navigator.mozGetUserMedia) {\n    return false;\n  }\n  var match = window.navigator.userAgent.match(/Firefox\\/(\\d+)\\./);\n  var version = match && match.length >= 1 && parseInt(match[1], 10);\n  return version < 50;\n}\n\nfunction LocalMedia(opts) {\n    WildEmitter.call(this);\n\n    var config = this.config = {\n        detectSpeakingEvents: false,\n        audioFallback: false,\n        media: {\n            audio: true,\n            video: true\n        },\n        harkOptions: null,\n        logger: mockconsole\n    };\n\n    var item;\n    for (item in opts) {\n        if (opts.hasOwnProperty(item)) {\n            this.config[item] = opts[item];\n        }\n    }\n\n    this.logger = config.logger;\n    this._log = this.logger.log.bind(this.logger, 'LocalMedia:');\n    this._logerror = this.logger.error.bind(this.logger, 'LocalMedia:');\n\n    this.localStreams = [];\n    this.localScreens = [];\n\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        this._logerror('Your browser does not support local media capture.');\n    }\n\n    this._audioMonitors = [];\n    this.on('localStreamStopped', this._stopAudioMonitor.bind(this));\n    this.on('localScreenStopped', this._stopAudioMonitor.bind(this));\n}\n\nutil.inherits(LocalMedia, WildEmitter);\n\n\nLocalMedia.prototype.start = function (mediaConstraints, cb) {\n    var self = this;\n    var constraints = mediaConstraints || this.config.media;\n\n    this.emit('localStreamRequested', constraints);\n\n    navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n        if (constraints.audio && self.config.detectSpeakingEvents) {\n            self._setupAudioMonitor(stream, self.config.harkOptions);\n        }\n        self.localStreams.push(stream);\n\n        stream.getTracks().forEach(function (track) {\n            track.addEventListener('ended', function () {\n                if (isAllTracksEnded(stream)) {\n                    self._removeStream(stream);\n                }\n            });\n        });\n\n        self.emit('localStream', stream);\n\n        if (cb) {\n            return cb(null, stream);\n        }\n    }).catch(function (err) {\n            // Fallback for users without a camera\n            if (self.config.audioFallback && err.name === 'DevicesNotFoundError' && constraints.video !== false) {\n                constraints.video = false;\n                self.start(constraints, cb);\n                return;\n            }\n\n        self.emit('localStreamRequestFailed', constraints);\n\n        if (cb) {\n            return cb(err, null);\n        }\n    });\n};\n\nLocalMedia.prototype.stop = function (stream) {\n    this.stopStream(stream);\n    this.stopScreenShare(stream);\n};\n\nLocalMedia.prototype.stopStream = function (stream) {\n    var self = this;\n\n    if (stream) {\n        var idx = this.localStreams.indexOf(stream);\n        if (idx > -1) {\n            stream.getTracks().forEach(function (track) { track.stop(); });\n\n            //Half-working fix for Firefox, see: https://bugzilla.mozilla.org/show_bug.cgi?id=1208373\n            if (shouldWorkAroundFirefoxStopStream()) {\n                this._removeStream(stream);\n            }\n        }\n    } else {\n        this.localStreams.forEach(function (stream) {\n            stream.getTracks().forEach(function (track) { track.stop(); });\n\n            //Half-working fix for Firefox, see: https://bugzilla.mozilla.org/show_bug.cgi?id=1208373\n            if (shouldWorkAroundFirefoxStopStream()) {\n                self._removeStream(stream);\n            }\n        });\n    }\n};\n\nLocalMedia.prototype.startScreenShare = function (constraints, cb) {\n    var self = this;\n\n    this.emit('localScreenRequested');\n\n    if (typeof constraints === 'function' && !cb) {\n        cb = constraints;\n        constraints = null;\n    }\n\n    getScreenMedia(constraints, function (err, stream) {\n        if (!err) {\n            self.localScreens.push(stream);\n\n            stream.getTracks().forEach(function (track) {\n                track.addEventListener('ended', function () {\n                    var isAllTracksEnded = true;\n                    stream.getTracks().forEach(function (t) {\n                        isAllTracksEnded = t.readyState === 'ended' && isAllTracksEnded;\n                    });\n\n                    if (isAllTracksEnded) {\n                        self._removeStream(stream);\n                    }\n                });\n            });\n\n            self.emit('localScreen', stream);\n        } else {\n            self.emit('localScreenRequestFailed');\n        }\n\n        // enable the callback\n        if (cb) {\n            return cb(err, stream);\n        }\n    });\n};\n\nLocalMedia.prototype.stopScreenShare = function (stream) {\n    var self = this;\n\n    if (stream) {\n        var idx = this.localScreens.indexOf(stream);\n        if (idx > -1) {\n            stream.getTracks().forEach(function (track) { track.stop(); });\n\n            //Half-working fix for Firefox, see: https://bugzilla.mozilla.org/show_bug.cgi?id=1208373\n            if (shouldWorkAroundFirefoxStopStream()) {\n                this._removeStream(stream);\n            }\n        }\n    } else {\n        this.localScreens.forEach(function (stream) {\n            stream.getTracks().forEach(function (track) { track.stop(); });\n\n            //Half-working fix for Firefox, see: https://bugzilla.mozilla.org/show_bug.cgi?id=1208373\n            if (shouldWorkAroundFirefoxStopStream()) {\n                self._removeStream(stream);\n            }\n        });\n    }\n};\n\n// Audio controls\nLocalMedia.prototype.mute = function () {\n    this._audioEnabled(false);\n    this.emit('audioOff');\n};\n\nLocalMedia.prototype.unmute = function () {\n    this._audioEnabled(true);\n    this.emit('audioOn');\n};\n\n// Video controls\nLocalMedia.prototype.pauseVideo = function () {\n    this._videoEnabled(false);\n    this.emit('videoOff');\n};\nLocalMedia.prototype.resumeVideo = function () {\n    this._videoEnabled(true);\n    this.emit('videoOn');\n};\n\n// Combined controls\nLocalMedia.prototype.pause = function () {\n    this.mute();\n    this.pauseVideo();\n};\nLocalMedia.prototype.resume = function () {\n    this.unmute();\n    this.resumeVideo();\n};\n\n// Internal methods for enabling/disabling audio/video\nLocalMedia.prototype._audioEnabled = function (bool) {\n    this.localStreams.forEach(function (stream) {\n        stream.getAudioTracks().forEach(function (track) {\n            track.enabled = !!bool;\n        });\n    });\n};\nLocalMedia.prototype._videoEnabled = function (bool) {\n    this.localStreams.forEach(function (stream) {\n        stream.getVideoTracks().forEach(function (track) {\n            track.enabled = !!bool;\n        });\n    });\n};\n\n// check if all audio streams are enabled\nLocalMedia.prototype.isAudioEnabled = function () {\n    var enabled = true;\n    this.localStreams.forEach(function (stream) {\n        stream.getAudioTracks().forEach(function (track) {\n            enabled = enabled && track.enabled;\n        });\n    });\n    return enabled;\n};\n\n// check if all video streams are enabled\nLocalMedia.prototype.isVideoEnabled = function () {\n    var enabled = true;\n    this.localStreams.forEach(function (stream) {\n        stream.getVideoTracks().forEach(function (track) {\n            enabled = enabled && track.enabled;\n        });\n    });\n    return enabled;\n};\n\nLocalMedia.prototype._removeStream = function (stream) {\n    var idx = this.localStreams.indexOf(stream);\n    if (idx > -1) {\n        this.localStreams.splice(idx, 1);\n        this.emit('localStreamStopped', stream);\n    } else {\n        idx = this.localScreens.indexOf(stream);\n        if (idx > -1) {\n            this.localScreens.splice(idx, 1);\n            this.emit('localScreenStopped', stream);\n        }\n    }\n};\n\nLocalMedia.prototype._setupAudioMonitor = function (stream, harkOptions) {\n    this._log('Setup audio');\n    var audio = hark(stream, harkOptions);\n    var self = this;\n    var timeout;\n\n    audio.on('speaking', function () {\n        self.emit('speaking');\n    });\n\n    audio.on('stopped_speaking', function () {\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n\n        timeout = setTimeout(function () {\n            self.emit('stoppedSpeaking');\n        }, 1000);\n    });\n    audio.on('volume_change', function (volume, threshold) {\n        self.emit('volumeChange', volume, threshold);\n    });\n\n    this._audioMonitors.push({audio: audio, stream: stream});\n};\n\nLocalMedia.prototype._stopAudioMonitor = function (stream) {\n    var idx = -1;\n    this._audioMonitors.forEach(function (monitors, i) {\n        if (monitors.stream === stream) {\n            idx = i;\n        }\n    });\n\n    if (idx > -1) {\n        this._audioMonitors[idx].audio.stop();\n        this._audioMonitors.splice(idx, 1);\n    }\n};\n\nmodule.exports = LocalMedia;\n\n},{\"getscreenmedia\":36,\"hark\":38,\"mockconsole\":46,\"util\":73,\"wildemitter\":75}],45:[function(require,module,exports){\n(function (global){\n/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],46:[function(require,module,exports){\nvar methods = \"assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn\".split(\",\");\nvar l = methods.length;\nvar fn = function () {};\nvar mockconsole = {};\n\nwhile (l--) {\n    mockconsole[methods[l]] = fn;\n}\n\nmodule.exports = mockconsole;\n\n},{}],47:[function(require,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options.long\n    ? long(val)\n    : short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  var match = /^((?:\\d+)?\\.?\\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 's':\n      return n * s;\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n},{}],48:[function(require,module,exports){\n\n/**\n * HOP ref.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Return own keys in `obj`.\n *\n * @param {Object} obj\n * @return {Array}\n * @api public\n */\n\nexports.keys = Object.keys || function(obj){\n  var keys = [];\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      keys.push(key);\n    }\n  }\n  return keys;\n};\n\n/**\n * Return own values in `obj`.\n *\n * @param {Object} obj\n * @return {Array}\n * @api public\n */\n\nexports.values = function(obj){\n  var vals = [];\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      vals.push(obj[key]);\n    }\n  }\n  return vals;\n};\n\n/**\n * Merge `b` into `a`.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n * @api public\n */\n\nexports.merge = function(a, b){\n  for (var key in b) {\n    if (has.call(b, key)) {\n      a[key] = b[key];\n    }\n  }\n  return a;\n};\n\n/**\n * Return length of `obj`.\n *\n * @param {Object} obj\n * @return {Number}\n * @api public\n */\n\nexports.length = function(obj){\n  return exports.keys(obj).length;\n};\n\n/**\n * Check if `obj` is empty.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api public\n */\n\nexports.isEmpty = function(obj){\n  return 0 == exports.length(obj);\n};\n},{}],49:[function(require,module,exports){\n(function (global){\n/**\n * JSON parse.\n *\n * @see Based on jQuery#parseJSON (MIT) and JSON2\n * @api private\n */\n\nvar rvalidchars = /^[\\],:{}\\s]*$/;\nvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\nvar rtrimLeft = /^\\s+/;\nvar rtrimRight = /\\s+$/;\n\nmodule.exports = function parsejson(data) {\n  if ('string' != typeof data || !data) {\n    return null;\n  }\n\n  data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\n\n  // Attempt to parse using the native JSON parser first\n  if (global.JSON && JSON.parse) {\n    return JSON.parse(data);\n  }\n\n  if (rvalidchars.test(data.replace(rvalidescape, '@')\n      .replace(rvalidtokens, ']')\n      .replace(rvalidbraces, ''))) {\n    return (new Function('return ' + data))();\n  }\n};\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],50:[function(require,module,exports){\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n\n},{}],51:[function(require,module,exports){\n/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host'\n  , 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n  var m = re.exec(str || '')\n    , uri = {}\n    , i = 14;\n\n  while (i--) {\n    uri[parts[i]] = m[i] || '';\n  }\n\n  return uri;\n};\n\n},{}],52:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],53:[function(require,module,exports){\nvar util = require('util');\nvar SJJ = require('sdp-jingle-json');\nvar WildEmitter = require('wildemitter');\nvar cloneDeep = require('lodash.clonedeep');\n\n            function PeerConnection(config, constraints, params) {\n    var self = this;\n    var item;\n    WildEmitter.call(this);\n\n    config = config || {};\n    config.iceServers = config.iceServers || [];\n\n    // make sure this only gets enabled in Google Chrome\n    // EXPERIMENTAL FLAG, might get removed without notice\n    this.enableChromeNativeSimulcast = false;\n    if (constraints && constraints.optional && window.chrome &&\n            navigator.appVersion.match(/Chromium\\//) === null) {\n        constraints.optional.forEach(function (constraint) {\n            if (constraint.enableChromeNativeSimulcast) {\n                self.enableChromeNativeSimulcast = true;\n            }\n        });\n    }\n\n    // EXPERIMENTAL FLAG, might get removed without notice\n    this.enableMultiStreamHacks = false;\n    if (constraints && constraints.optional && window.chrome) {\n        constraints.optional.forEach(function (constraint) {\n            if (constraint.enableMultiStreamHacks) {\n                self.enableMultiStreamHacks = true;\n            }\n        });\n    }\n    // EXPERIMENTAL FLAG, might get removed without notice\n    this.restrictBandwidth = 0;\n    if (constraints && constraints.optional) {\n        constraints.optional.forEach(function (constraint) {\n            if (constraint.andyetRestrictBandwidth) {\n                self.restrictBandwidth = constraint.andyetRestrictBandwidth;\n            }\n        });\n    }\n\n    // EXPERIMENTAL FLAG, might get removed without notice\n    // bundle up ice candidates, only works for jingle mode\n    // number > 0 is the delay to wait for additional candidates\n    // ~20ms seems good\n    this.batchIceCandidates = 0;\n    if (constraints && constraints.optional) {\n        constraints.optional.forEach(function (constraint) {\n            if (constraint.andyetBatchIce) {\n                self.batchIceCandidates = constraint.andyetBatchIce;\n            }\n        });\n    }\n    this.batchedIceCandidates = [];\n\n    // EXPERIMENTAL FLAG, might get removed without notice\n    // this attemps to strip out candidates with an already known foundation\n    // and type -- i.e. those which are gathered via the same TURN server\n    // but different transports (TURN udp, tcp and tls respectively)\n    if (constraints && constraints.optional && window.chrome) {\n        constraints.optional.forEach(function (constraint) {\n            if (constraint.andyetFasterICE) {\n                self.eliminateDuplicateCandidates = constraint.andyetFasterICE;\n            }\n        });\n    }\n    // EXPERIMENTAL FLAG, might get removed without notice\n    // when using a server such as the jitsi videobridge we don't need to signal\n    // our candidates\n    if (constraints && constraints.optional) {\n        constraints.optional.forEach(function (constraint) {\n            if (constraint.andyetDontSignalCandidates) {\n                self.dontSignalCandidates = constraint.andyetDontSignalCandidates;\n            }\n        });\n    }\n\n\n    // EXPERIMENTAL FLAG, might get removed without notice\n    this.assumeSetLocalSuccess = false;\n    if (constraints && constraints.optional) {\n        constraints.optional.forEach(function (constraint) {\n            if (constraint.andyetAssumeSetLocalSuccess) {\n                self.assumeSetLocalSuccess = constraint.andyetAssumeSetLocalSuccess;\n            }\n        });\n    }\n\n    // EXPERIMENTAL FLAG, might get removed without notice\n    // working around https://bugzilla.mozilla.org/show_bug.cgi?id=1087551\n    // pass in a timeout for this\n    if (window.navigator.mozGetUserMedia) {\n        if (constraints && constraints.optional) {\n            this.wtFirefox = 0;\n            constraints.optional.forEach(function (constraint) {\n                if (constraint.andyetFirefoxMakesMeSad) {\n                    self.wtFirefox = constraint.andyetFirefoxMakesMeSad;\n                    if (self.wtFirefox > 0) {\n                        self.firefoxcandidatebuffer = [];\n                    }\n                }\n            });\n        }\n    }\n\n\n    this.pc = new RTCPeerConnection(config, constraints);\n\n    ///MLUpdate///\n    this.vidEncoder = params.vidEncoder;\n    this.vidBitrate = params.vidBitrate;\n    this.audEncode = params.audEncoder;\n    this.audBitrate = params.audBitrate;\n\t///MLUpdate///\n\n    if (typeof this.pc.getLocalStreams === 'function') {\n        this.getLocalStreams = this.pc.getLocalStreams.bind(this.pc);\n    } else {\n        this.getLocalStreams = function () {\n            return [];\n        };\n    }\n\n    this.getRemoteStreams = this.pc.getRemoteStreams.bind(this.pc);\n    this.addStream = this.pc.addStream.bind(this.pc);\n\n    this.removeStream = function (stream) {\n        if (typeof self.pc.removeStream === 'function') {\n            self.pc.removeStream.apply(self.pc, arguments);\n        } else if (typeof self.pc.removeTrack === 'function') {\n            stream.getTracks().forEach(function (track) {\n                self.pc.removeTrack(track);\n            });\n        }\n    };\n\n    if (typeof this.pc.removeTrack === 'function') {\n        this.removeTrack = this.pc.removeTrack.bind(this.pc);\n    }\n\n    // proxy some events directly\n    this.pc.onremovestream = this.emit.bind(this, 'removeStream');\n    this.pc.onremovetrack = this.emit.bind(this, 'removeTrack');\n    this.pc.onaddstream = this.emit.bind(this, 'addStream');\n    this.pc.onnegotiationneeded = this.emit.bind(this, 'negotiationNeeded');\n    this.pc.oniceconnectionstatechange = this.emit.bind(this, 'iceConnectionStateChange');\n    this.pc.onsignalingstatechange = this.emit.bind(this, 'signalingStateChange');\n\n    // handle ice candidate and data channel events\n    this.pc.onicecandidate = this._onIce.bind(this);\n    this.pc.ondatachannel = this._onDataChannel.bind(this);\n\n    this.localDescription = {\n        contents: []\n    };\n    this.remoteDescription = {\n        contents: []\n    };\n\n    this.config = {\n        debug: false,\n        sid: '',\n        isInitiator: true,\n        sdpSessionID: Date.now(),\n        useJingle: false\n    };\n\n    this.iceCredentials = {\n        local: {},\n        remote: {}\n    };\n\n    // apply our config\n    for (item in config) {\n        this.config[item] = config[item];\n    }\n\n    if (this.config.debug) {\n        this.on('*', function () {\n            var logger = config.logger || console;\n            logger.log('PeerConnection event:', arguments);\n        });\n    }\n    this.hadLocalStunCandidate = false;\n    this.hadRemoteStunCandidate = false;\n    this.hadLocalRelayCandidate = false;\n    this.hadRemoteRelayCandidate = false;\n\n    this.hadLocalIPv6Candidate = false;\n    this.hadRemoteIPv6Candidate = false;\n\n    // keeping references for all our data channels\n    // so they dont get garbage collected\n    // can be removed once the following bugs have been fixed\n    // https://crbug.com/405545\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=964092\n    // to be filed for opera\n    this._remoteDataChannels = [];\n    this._localDataChannels = [];\n\n    this._candidateBuffer = [];\n}\n\nutil.inherits(PeerConnection, WildEmitter);\n\nObject.defineProperty(PeerConnection.prototype, 'signalingState', {\n    get: function () {\n        return this.pc.signalingState;\n    }\n});\nObject.defineProperty(PeerConnection.prototype, 'iceConnectionState', {\n    get: function () {\n        return this.pc.iceConnectionState;\n    }\n});\n\nPeerConnection.prototype._role = function () {\n    return this.isInitiator ? 'initiator' : 'responder';\n};\n\n// Add a stream to the peer connection object\nPeerConnection.prototype.addStream = function (stream) {\n    this.localStream = stream;\n    this.pc.addStream(stream);\n};\n\n// helper function to check if a remote candidate is a stun/relay\n// candidate or an ipv6 candidate\nPeerConnection.prototype._checkLocalCandidate = function (candidate) {\n    var cand = SJJ.toCandidateJSON(candidate);\n    if (cand.type == 'srflx') {\n        this.hadLocalStunCandidate = true;\n    } else if (cand.type == 'relay') {\n        this.hadLocalRelayCandidate = true;\n    }\n    if (cand.ip.indexOf(':') != -1) {\n        this.hadLocalIPv6Candidate = true;\n    }\n};\n\n// helper function to check if a remote candidate is a stun/relay\n// candidate or an ipv6 candidate\nPeerConnection.prototype._checkRemoteCandidate = function (candidate) {\n    var cand = SJJ.toCandidateJSON(candidate);\n    if (cand.type == 'srflx') {\n        this.hadRemoteStunCandidate = true;\n    } else if (cand.type == 'relay') {\n        this.hadRemoteRelayCandidate = true;\n    }\n    if (cand.ip.indexOf(':') != -1) {\n        this.hadRemoteIPv6Candidate = true;\n    }\n};\n\n\n// Init and add ice candidate object with correct constructor\nPeerConnection.prototype.processIce = function (update, cb) {\n    cb = cb || function () {};\n    var self = this;\n\n    // ignore any added ice candidates to avoid errors. why does the\n    // spec not do this?\n    if (this.pc.signalingState === 'closed') return cb();\n\n    if (update.contents || (update.jingle && update.jingle.contents)) {\n        var contentNames = this.remoteDescription.contents.map(function (c) { return c.name; });\n        var contents = update.contents || update.jingle.contents;\n\n        contents.forEach(function (content) {\n            var transport = content.transport || {};\n            var candidates = transport.candidates || [];\n            var mline = contentNames.indexOf(content.name);\n            var mid = content.name;\n            var remoteContent = self.remoteDescription.contents.find(function (c) {\n                return c.name === content.name;\n            });\n\n            // process candidates as a callback, in case we need to\n            // update ufrag and pwd with offer/answer\n            var processCandidates = function () {\n                candidates.forEach(\n                    function (candidate) {\n                    var iceCandidate = SJJ.toCandidateSDP(candidate);\n                    self.pc.addIceCandidate(\n                        new RTCIceCandidate({\n                            candidate: iceCandidate,\n                            sdpMLineIndex: mline,\n                            sdpMid: mid\n                        }), function () {\n                            // well, this success callback is pretty meaningless\n                        },\n                        function (err) {\n                            self.emit('error', err);\n                        }\n                    );\n                    self._checkRemoteCandidate(iceCandidate);\n                });\n                cb();\n            };\n\n            if (self.iceCredentials.remote[content.name] && transport.ufrag &&\n                self.iceCredentials.remote[content.name].ufrag !== transport.ufrag) {\n                if (remoteContent) {\n                    remoteContent.transport.ufrag = transport.ufrag;\n                    remoteContent.transport.pwd = transport.pwd;\n                    var offer = {\n                        type: 'offer',\n                        jingle: self.remoteDescription\n                    };\n                    offer.sdp = SJJ.toSessionSDP(offer.jingle, {\n                        sid: self.config.sdpSessionID,\n                        role: self._role(),\n                        direction: 'incoming'\n                    });\n                    self.pc.setRemoteDescription(new RTCSessionDescription(offer),\n                        function () {\n                            processCandidates();\n                        },\n                        function (err) {\n                            self.emit('error', err);\n                        }\n                    );\n                } else {\n                    self.emit('error', 'ice restart failed to find matching content');\n                }\n            } else {\n                processCandidates();\n            }\n        });\n    } else {\n        // working around https://code.google.com/p/webrtc/issues/detail?id=3669\n        if (update.candidate && update.candidate.candidate.indexOf('a=') !== 0) {\n            update.candidate.candidate = 'a=' + update.candidate.candidate;\n        }\n\n        if (this.wtFirefox && this.firefoxcandidatebuffer !== null) {\n            // we cant add this yet due to https://bugzilla.mozilla.org/show_bug.cgi?id=1087551\n            if (this.pc.localDescription && this.pc.localDescription.type === 'offer') {\n                this.firefoxcandidatebuffer.push(update.candidate);\n                return cb();\n            }\n        }\n\n        self.pc.addIceCandidate(\n            new RTCIceCandidate(update.candidate),\n            function () { },\n            function (err) {\n                self.emit('error', err);\n            }\n        );\n        self._checkRemoteCandidate(update.candidate.candidate);\n        cb();\n    }\n};\n\n// Generate and emit an offer with the given constraints\nPeerConnection.prototype.offer = function (constraints, cb) {\n    var self = this;\n    var hasConstraints = arguments.length === 2;\n    var mediaConstraints = hasConstraints && constraints ? constraints : {\n            offerToReceiveAudio: 1,\n            offerToReceiveVideo: 1\n        };\n    cb = hasConstraints ? cb : constraints;\n    cb = cb || function () {};\n\n    if (this.pc.signalingState === 'closed') return cb('Already closed');\n\n    ///MLUpdate\n    //RTCOfferOptions doesn'y work in Safari. Using transceivers instead\n    var ua = navigator.userAgent.toLowerCase();\n    if (ua.indexOf('safari') != -1) {\n        if (ua.indexOf('chrome') > -1) {\n        } else {\n            this.pc.addTransceiver('audio');\n            this.pc.addTransceiver('video');\n        }\n    }\n    ///MLUpdate\n\n    // Actually generate the offer\n    this.pc.createOffer(\n        function (offer) {\n            // does not work for jingle, but jingle.js doesn't need\n            // this hack...\n            var expandedOffer = {\n                type: 'offer',\n                sdp: offer.sdp\n            };\n            if (self.assumeSetLocalSuccess) {\n                self.emit('offer', expandedOffer);\n                cb(null, expandedOffer);\n            }\n            self._candidateBuffer = [];\n            self.pc.setLocalDescription(offer,\n                function () {\n                    var jingle;\n                    if (self.config.useJingle) {\n                        jingle = SJJ.toSessionJSON(offer.sdp, {\n                            role: self._role(),\n                            direction: 'outgoing'\n                        });\n                        jingle.sid = self.config.sid;\n                        self.localDescription = jingle;\n\n                        // Save ICE credentials\n                        jingle.contents.forEach(function (content) {\n                            var transport = content.transport || {};\n                            if (transport.ufrag) {\n                                self.iceCredentials.local[content.name] = {\n                                    ufrag: transport.ufrag,\n                                    pwd: transport.pwd\n                                };\n                            }\n                        });\n\n                        expandedOffer.jingle = jingle;\n                    }\n                    expandedOffer.sdp.split('\\r\\n').forEach(function (line) {\n                        if (line.indexOf('a=candidate:') === 0) {\n                            self._checkLocalCandidate(line);\n                        }\n                    });\n\n                    if (!self.assumeSetLocalSuccess) {\n                                    //Trickle encoders\n                                    if (self.vidEncoder && self.vidEncoder.toUpperCase() != 'VP8') {\n                                        //Find codec id\n                                        var strCodecId = '';\n                                        var nFound = -1;\n                                        var nFound = expandedOffer.sdp.indexOf(self.vidEncoder.toUpperCase());\n                                        if (nFound == -1)\n                                            nFound = expandedOffer.sdp.indexOf(self.vidEncoder.toLowerCase());\n                                        if (nFound != -1) {\n                                            var strCodecId = expandedOffer.sdp.substr(nFound - 10, 10);\n                                            nFound = strCodecId.indexOf(':');\n                                            if (nFound != -1) {\n                                                strCodecId = strCodecId.substr(nFound + 1, strCodecId.length - nFound);\n                                                strCodecId = strCodecId.replace(' ', '');\n                                            }\n                                        }\n\n                                        if (strCodecId) {\n                                            //Find codecs string\n                                            var nFound = expandedOffer.sdp.indexOf('m=video');\n                                            if (nFound != -1) {\n                                                var strBegin = expandedOffer.sdp.substr(0, nFound);\n                                                var strSDP = expandedOffer.sdp.substr(nFound, expandedOffer.sdp.length - nFound);\n                                                nFound = strSDP.indexOf('\\r\\n');\n                                                var strEnd = strSDP.substr(nFound, strSDP.length - nFound);\n                                                strSDP = strSDP.substr(0, nFound);\n                                                var strSAVPF = 'SAVPF';\n                                                nFound = strSDP.indexOf(strSAVPF);\n                                                if (nFound == -1) {\n                                                    strSAVPF = strSAVPF.toLowerCase();\n                                                    nFound = strSDP.indexOf(strSAVPF);\n                                                }\n                                                if (nFound != -1) {\n                                                    //Modify codecs string\n                                                    strSDP = strSDP.replace((strCodecId + ' '), '');\n                                                    strSDP = strSDP.replace('SAVPF', 'SAVPF ' + strCodecId);\n                                                    expandedOffer.sdp = strBegin + strSDP + strEnd;\n                                                }\n                                            }\n                                        }\n                                    }\n\n                                    if (self.audEncoder && self.audEncoder.toUpperCase() != 'OPUS') {\n                                        //Find codec id\n                                        var strCodecId = '';\n                                        var nFound = -1;\n                                        var nFound = expandedOffer.sdp.indexOf(self.audEncoder.toUpperCase());\n                                        if (nFound == -1)\n                                            nFound = expandedOffer.sdp.indexOf(self.audEncoder.toLowerCase());\n                                        if (nFound != -1) {\n                                            var strCodecId = expandedOffer.sdp.substr(nFound - 10, 10);\n                                            nFound = strCodecId.indexOf(':');\n                                            if (nFound != -1) {\n                                                strCodecId = strCodecId.substr(nFound + 1, strCodecId.length - nFound);\n                                                strCodecId = strCodecId.replace(' ', '');\n                                            }\n                                        }\n\n                                        if (strCodecId) {\n                                            //Find codecs string\n                                            var nFound = expandedOffer.sdp.indexOf('m=audio');\n                                            if (nFound != -1) {\n                                                var strBegin = expandedOffer.sdp.substr(0, nFound);\n                                                var strSDP = expandedOffer.sdp.substr(nFound, expandedOffer.sdp.length - nFound);\n                                                nFound = strSDP.indexOf('\\r\\n');\n                                                var strEnd = strSDP.substr(nFound, strSDP.length - nFound);\n                                                strSDP = strSDP.substr(0, nFound);\n                                                var strSAVPF = 'SAVPF';\n                                                nFound = strSDP.indexOf(strSAVPF);\n                                                if (nFound == -1) {\n                                                    strSAVPF = strSAVPF.toLowerCase();\n                                                    nFound = strSDP.indexOf(strSAVPF);\n                                                }\n                                                if (nFound != -1) {\n                                                    //Modify codecs string\n                                                    strSDP = strSDP.replace((strCodecId + ' '), '');\n                                                    strSDP = strSDP.replace('SAVPF', 'SAVPF ' + strCodecId);\n                                                    expandedOffer.sdp = strBegin + strSDP + strEnd;\n                                                }\n                                            }\n                                        }\n                                    }\n\n                                    if (self.audBitrate && self.audBitrate.toLowerCase() != 'default') {\n                                        var audBitrate = parseInt(self.audBitrate);\n                                        if (audBitrate > 0) {\n                                            if (self.audBitrate.includes(\"K\") || self.audBitrate.includes(\"k\"))\n                                                audBitrate = audBitrate * 1000;\n                                            if (self.audBitrate.includes(\"M\") || self.audBitrate.includes(\"M\"))\n                                                audBitrate = audBitrate * 1000000;\n\n                                            expandedOffer.sdp = expandedOffer.sdp.replace(/a=fmtp:111 minptime=10;useinbandfec=1\\r\\n/g, 'a=fmtp:111 minptime=10;useinbandfec=1;maxplaybackrate=48000;sprop-maxcapturerate=48000;maxaveragebitrate=' + audBitrate + ';sprop-stereo=1;stereo=1\\r\\n');\n                                        }\n                                    }\n                                    if (self.vidBitrate && self.vidBitrate.toLowerCase() != 'default') {\n                                        var vidBitrate = parseInt(self.vidBitrate);\n                                        if (vidBitrate > 0) {\n                                            if (self.vidBitrate.includes(\"K\") || self.vidBitrate.includes(\"k\"))\n                                                vidBitrate = vidBitrate * 1000;\n                                            if (self.vidBitrate.includes(\"M\") || self.vidBitrate.includes(\"M\"))\n                                                vidBitrate = vidBitrate * 1000000;\n\n                                            expandedOffer.sdp = expandedOffer.sdp.replace(/a=mid:video\\r\\n/g, 'a=mid:video\\r\\nb=AS:' + vidBitrate / 1000 + '\\r\\n');\n                                        }\n                                    }\n                        self.emit('offer', expandedOffer);\n                        cb(null, expandedOffer);\n                    }\n                },\n                function (err) {\n                    self.emit('error', err);\n                    cb(err);\n                }\n            );\n        },\n        function (err) {\n            self.emit('error', err);\n            cb(err);\n        },\n        mediaConstraints\n    );\n};\n\n\n// Process an incoming offer so that ICE may proceed before deciding\n// to answer the request.\nPeerConnection.prototype.handleOffer = function (offer, cb) {\n    cb = cb || function () {};\n    var self = this;\n    offer.type = 'offer';\n    if (offer.jingle) {\n        if (this.enableChromeNativeSimulcast) {\n            offer.jingle.contents.forEach(function (content) {\n                if (content.name === 'video') {\n                    content.application.googConferenceFlag = true;\n                }\n\n            });\n        }\n        if (this.enableMultiStreamHacks) {\n            // add a mixed video stream as first stream\n            offer.jingle.contents.forEach(function (content) {\n                if (content.name === 'video') {\n                    var sources = content.application.sources || [];\n                    if (sources.length === 0 || sources[0].ssrc !== \"3735928559\") {\n                        sources.unshift({\n                            ssrc: \"3735928559\", // 0xdeadbeef\n                            parameters: [\n                                {\n                                    key: \"cname\",\n                                    value: \"deadbeef\"\n                                },\n                                {\n                                    key: \"msid\",\n                                    value: \"mixyourfecintothis please\"\n                                }\n                            ]\n                        });\n                        content.application.sources = sources;\n                    }\n                }\n            });\n        }\n        if (self.restrictBandwidth > 0) {\n            if (offer.jingle.contents.length >= 2 && offer.jingle.contents[1].name === 'video') {\n                var content = offer.jingle.contents[1];\n                var hasBw = content.application && content.application.bandwidth && content.application.bandwidth.bandwidth;\n                if (!hasBw) {\n                    offer.jingle.contents[1].application.bandwidth = { type: 'AS', bandwidth: self.restrictBandwidth.toString() };\n                    offer.sdp = SJJ.toSessionSDP(offer.jingle, {\n                        sid: self.config.sdpSessionID,\n                        role: self._role(),\n                        direction: 'outgoing'\n                    });\n                }\n            }\n        }\n        // Save ICE credentials\n        offer.jingle.contents.forEach(function (content) {\n            var transport = content.transport || {};\n            if (transport.ufrag) {\n                self.iceCredentials.remote[content.name] = {\n                    ufrag: transport.ufrag,\n                    pwd: transport.pwd\n                };\n            }\n        });\n        offer.sdp = SJJ.toSessionSDP(offer.jingle, {\n            sid: self.config.sdpSessionID,\n            role: self._role(),\n            direction: 'incoming'\n        });\n        self.remoteDescription = offer.jingle;\n    }\n    offer.sdp.split('\\r\\n').forEach(function (line) {\n        if (line.indexOf('a=candidate:') === 0) {\n            self._checkRemoteCandidate(line);\n        }\n    });\n    self.pc.setRemoteDescription(new RTCSessionDescription(offer),\n        function () {\n            cb();\n        },\n        cb\n    );\n};\n\n// Answer an offer with audio only\nPeerConnection.prototype.answerAudioOnly = function (cb) {\n    var mediaConstraints = {\n            mandatory: {\n                OfferToReceiveAudio: true,\n                OfferToReceiveVideo: false\n            }\n        };\n    this._answer(mediaConstraints, cb);\n};\n\n// Answer an offer without offering to recieve\nPeerConnection.prototype.answerBroadcastOnly = function (cb) {\n    var mediaConstraints = {\n            mandatory: {\n                OfferToReceiveAudio: false,\n                OfferToReceiveVideo: false\n            }\n        };\n    this._answer(mediaConstraints, cb);\n};\n\n// Answer an offer with given constraints default is audio/video\nPeerConnection.prototype.answer = function (constraints, cb) {\n    var hasConstraints = arguments.length === 2;\n    var callback = hasConstraints ? cb : constraints;\n    var mediaConstraints = hasConstraints && constraints ? constraints : {\n            mandatory: {\n                OfferToReceiveAudio: true,\n                OfferToReceiveVideo: true\n            }\n        };\n\n    this._answer(mediaConstraints, callback);\n};\n\n// Process an answer\nPeerConnection.prototype.handleAnswer = function (answer, cb) {\n    cb = cb || function () {};\n    var self = this;\n    if (answer.jingle) {\n        answer.sdp = SJJ.toSessionSDP(answer.jingle, {\n            sid: self.config.sdpSessionID,\n            role: self._role(),\n            direction: 'incoming'\n        });\n        self.remoteDescription = answer.jingle;\n\n        // Save ICE credentials\n        answer.jingle.contents.forEach(function (content) {\n            var transport = content.transport || {};\n            if (transport.ufrag) {\n                self.iceCredentials.remote[content.name] = {\n                    ufrag: transport.ufrag,\n                    pwd: transport.pwd\n                };\n            }\n        });\n    }\n    answer.sdp.split('\\r\\n').forEach(function (line) {\n        if (line.indexOf('a=candidate:') === 0) {\n            self._checkRemoteCandidate(line);\n        }\n    });\n    self.pc.setRemoteDescription(\n        new RTCSessionDescription(answer),\n        function () {\n            if (self.wtFirefox) {\n                window.setTimeout(function () {\n                    self.firefoxcandidatebuffer.forEach(function (candidate) {\n                        // add candidates later\n                        self.pc.addIceCandidate(\n                            new RTCIceCandidate(candidate),\n                            function () { },\n                            function (err) {\n                                self.emit('error', err);\n                            }\n                        );\n                        self._checkRemoteCandidate(candidate.candidate);\n                    });\n                    self.firefoxcandidatebuffer = null;\n                }, self.wtFirefox);\n            }\n            cb(null);\n        },\n        cb\n    );\n};\n\n// Close the peer connection\nPeerConnection.prototype.close = function () {\n                if (this._localDataChannels && this._localDataChannels.length > 0) {\n                    for (var z = 0; z < this._localDataChannels.length; z++) {\n                        this._localDataChannels[z].close();\n                    }\n                }\n                if (this._remoteDataChannels && this._remoteDataChannels.length > 0) {\n                    for (var z = 0; z < this._remoteDataChannels.length; z++) {\n                        this._remoteDataChannels[z].close();\n                    }\n                }\n\n                // proxy some events directly\n                this.pc.onremovestream = null;\n                this.pc.onremovetrack = null;\n                this.pc.onaddstream = null;\n                this.pc.onnegotiationneeded = null;\n                this.pc.oniceconnectionstatechange = null;\n                this.pc.onsignalingstatechange = null;\n\n                // handle ice candidate and data channel events\n                this.pc.onicecandidate = null;\n                this.pc.ondatachannel = null;\n\n\n    this.pc.close();\n\n    this._localDataChannels = [];\n    this._remoteDataChannels = [];\n\n    this.emit('close');\n};\n\n// Internal code sharing for various types of answer methods\nPeerConnection.prototype._answer = function (constraints, cb) {\n    cb = cb || function () {};\n    var self = this;\n    if (!this.pc.remoteDescription) {\n        // the old API is used, call handleOffer\n        throw new Error('remoteDescription not set');\n    }\n\n    if (this.pc.signalingState === 'closed') return cb('Already closed');\n\n    self.pc.createAnswer(\n        function (answer) {\n            var sim = [];\n            if (self.enableChromeNativeSimulcast) {\n                // native simulcast part 1: add another SSRC\n                answer.jingle = SJJ.toSessionJSON(answer.sdp, {\n                    role: self._role(),\n                    direction: 'outgoing'\n                });\n                if (answer.jingle.contents.length >= 2 && answer.jingle.contents[1].name === 'video') {\n                    var groups = answer.jingle.contents[1].application.sourceGroups || [];\n                    var hasSim = false;\n                    groups.forEach(function (group) {\n                        if (group.semantics == 'SIM') hasSim = true;\n                    });\n                    if (!hasSim &&\n                        answer.jingle.contents[1].application.sources.length) {\n                        var newssrc = JSON.parse(JSON.stringify(answer.jingle.contents[1].application.sources[0]));\n                        newssrc.ssrc = '' + Math.floor(Math.random() * 0xffffffff); // FIXME: look for conflicts\n                        answer.jingle.contents[1].application.sources.push(newssrc);\n\n                        sim.push(answer.jingle.contents[1].application.sources[0].ssrc);\n                        sim.push(newssrc.ssrc);\n                        groups.push({\n                            semantics: 'SIM',\n                            sources: sim\n                        });\n\n                        // also create an RTX one for the SIM one\n                        var rtxssrc = JSON.parse(JSON.stringify(newssrc));\n                        rtxssrc.ssrc = '' + Math.floor(Math.random() * 0xffffffff); // FIXME: look for conflicts\n                        answer.jingle.contents[1].application.sources.push(rtxssrc);\n                        groups.push({\n                            semantics: 'FID',\n                            sources: [newssrc.ssrc, rtxssrc.ssrc]\n                        });\n\n                        answer.jingle.contents[1].application.sourceGroups = groups;\n                        answer.sdp = SJJ.toSessionSDP(answer.jingle, {\n                            sid: self.config.sdpSessionID,\n                            role: self._role(),\n                            direction: 'outgoing'\n                        });\n                    }\n                }\n            }\n\n                        if (self.audBitrate && self.audBitrate > 0)\n                            answer.sdp = answer.sdp.replace(/a=fmtp:111 minptime=10;useinbandfec=1\\r\\n/g, 'a=fmtp:111 minptime=10;useinbandfec=1;maxplaybackrate=48000;sprop-maxcapturerate=48000;maxaveragebitrate=' + self.audBitrate + ';sprop-stereo=1;stereo=1\\r\\n');\n                        if (self.vidBitrate && self.vidBitrate > 0)\n                            answer.sdp = answer.sdp.replace(/a=mid:video\\r\\n/g, 'a=mid:video\\r\\nb=AS:' + self.vidBitrate / 1000 + '\\r\\n');\n            var expandedAnswer = {\n                type: 'answer',\n                sdp: answer.sdp\n            };\n            if (self.assumeSetLocalSuccess) {\n                // not safe to do when doing simulcast mangling\n                var copy = cloneDeep(expandedAnswer);\n                self.emit('answer', copy);\n                cb(null, copy);\n            }\n            self._candidateBuffer = [];\n            self.pc.setLocalDescription(answer,\n                function () {\n                    if (self.config.useJingle) {\n                        var jingle = SJJ.toSessionJSON(answer.sdp, {\n                            role: self._role(),\n                            direction: 'outgoing'\n                        });\n                        jingle.sid = self.config.sid;\n                        self.localDescription = jingle;\n                        expandedAnswer.jingle = jingle;\n                    }\n                    if (self.enableChromeNativeSimulcast) {\n                        // native simulcast part 2:\n                        // signal multiple tracks to the receiver\n                        // for anything in the SIM group\n                        if (!expandedAnswer.jingle) {\n                            expandedAnswer.jingle = SJJ.toSessionJSON(answer.sdp, {\n                                role: self._role(),\n                                direction: 'outgoing'\n                            });\n                        }\n                        expandedAnswer.jingle.contents[1].application.sources.forEach(function (source, idx) {\n                            // the floor idx/2 is a hack that relies on a particular order\n                            // of groups, alternating between sim and rtx\n                            source.parameters = source.parameters.map(function (parameter) {\n                                if (parameter.key === 'msid') {\n                                    parameter.value += '-' + Math.floor(idx / 2);\n                                }\n                                return parameter;\n                            });\n                        });\n                        expandedAnswer.sdp = SJJ.toSessionSDP(expandedAnswer.jingle, {\n                            sid: self.sdpSessionID,\n                            role: self._role(),\n                            direction: 'outgoing'\n                        });\n                    }\n                    expandedAnswer.sdp.split('\\r\\n').forEach(function (line) {\n                        if (line.indexOf('a=candidate:') === 0) {\n                            self._checkLocalCandidate(line);\n                        }\n                    });\n                    if (!self.assumeSetLocalSuccess) {\n                        var copy = cloneDeep(expandedAnswer);\n                        self.emit('answer', copy);\n                        cb(null, copy);\n                    }\n                },\n                function (err) {\n                    self.emit('error', err);\n                    cb(err);\n                }\n            );\n        },\n        function (err) {\n            self.emit('error', err);\n            cb(err);\n        },\n        constraints\n    );\n};\n\n// Internal method for emitting ice candidates on our peer object\nPeerConnection.prototype._onIce = function (event) {\n    var self = this;\n    if (event.candidate) {\n        if (this.dontSignalCandidates) return;\n        var ice = event.candidate;\n\n        var expandedCandidate = {\n            candidate: {\n                candidate: ice.candidate,\n                sdpMid: ice.sdpMid,\n                sdpMLineIndex: ice.sdpMLineIndex\n            }\n        };\n        this._checkLocalCandidate(ice.candidate);\n\n        var cand = SJJ.toCandidateJSON(ice.candidate);\n\n        var already;\n        var idx;\n        if (this.eliminateDuplicateCandidates && cand.type === 'relay') {\n            // drop candidates with same foundation, component\n            // take local type pref into account so we don't ignore udp\n            // ones when we know about a TCP one. unlikely but...\n            already = this._candidateBuffer.filter(\n                function (c) {\n                    return c.type === 'relay';\n                }).map(function (c) {\n                    return c.foundation + ':' + c.component;\n                }\n            );\n            idx = already.indexOf(cand.foundation + ':' + cand.component);\n            // remember: local type pref of udp is 0, tcp 1, tls 2\n            if (idx > -1 && ((cand.priority >> 24) >= (already[idx].priority >> 24))) {\n                // drop it, same foundation with higher (worse) type pref\n                return;\n            }\n        }\n        if (this.config.bundlePolicy === 'max-bundle') {\n            // drop candidates which are duplicate for audio/video/data\n            // duplicate means same host/port but different sdpMid\n            already = this._candidateBuffer.filter(\n                function (c) {\n                    return cand.type === c.type;\n                }).map(function (cand) {\n                    return cand.address + ':' + cand.port;\n                }\n            );\n            idx = already.indexOf(cand.address + ':' + cand.port);\n            if (idx > -1) return;\n        }\n        // also drop rtcp candidates since we know the peer supports RTCP-MUX\n        // this is a workaround until browsers implement this natively\n        if (this.config.rtcpMuxPolicy === 'require' && cand.component === '2') {\n            return;\n        }\n        this._candidateBuffer.push(cand);\n\n        if (self.config.useJingle) {\n            if (!ice.sdpMid) { // firefox doesn't set this\n                if (self.pc.remoteDescription && self.pc.remoteDescription.type === 'offer') {\n                    // preserve name from remote\n                    ice.sdpMid = self.remoteDescription.contents[ice.sdpMLineIndex].name;\n                } else {\n                    ice.sdpMid = self.localDescription.contents[ice.sdpMLineIndex].name;\n                }\n            }\n            if (!self.iceCredentials.local[ice.sdpMid]) {\n                var jingle = SJJ.toSessionJSON(self.pc.localDescription.sdp, {\n                    role: self._role(),\n                    direction: 'outgoing'\n                });\n                jingle.contents.forEach(function (content) {\n                    var transport = content.transport || {};\n                    if (transport.ufrag) {\n                        self.iceCredentials.local[content.name] = {\n                            ufrag: transport.ufrag,\n                            pwd: transport.pwd\n                        };\n                    }\n                });\n            }\n            expandedCandidate.jingle = {\n                contents: [{\n                    name: ice.sdpMid,\n                    creator: self._role(),\n                    transport: {\n                        transportType: 'iceUdp',\n                        ufrag: self.iceCredentials.local[ice.sdpMid].ufrag,\n                        pwd: self.iceCredentials.local[ice.sdpMid].pwd,\n                        candidates: [\n                            cand\n                        ]\n                    }\n                }]\n            };\n            if (self.batchIceCandidates > 0) {\n                if (self.batchedIceCandidates.length === 0) {\n                    window.setTimeout(function () {\n                        var contents = {};\n                        self.batchedIceCandidates.forEach(function (content) {\n                            content = content.contents[0];\n                            if (!contents[content.name]) contents[content.name] = content;\n                            contents[content.name].transport.candidates.push(content.transport.candidates[0]);\n                        });\n                        var newCand = {\n                            jingle: {\n                                contents: []\n                            }\n                        };\n                        Object.keys(contents).forEach(function (name) {\n                            newCand.jingle.contents.push(contents[name]);\n                        });\n                        self.batchedIceCandidates = [];\n                        self.emit('ice', newCand);\n                    }, self.batchIceCandidates);\n                }\n                self.batchedIceCandidates.push(expandedCandidate.jingle);\n                return;\n            }\n\n        }\n        this.emit('ice', expandedCandidate);\n    } else {\n        this.emit('endOfCandidates');\n    }\n};\n\n// Internal method for processing a new data channel being added by the\n// other peer.\nPeerConnection.prototype._onDataChannel = function (event) {\n    // make sure we keep a reference so this doesn't get garbage collected\n    var channel = event.channel;\n    this._remoteDataChannels.push(channel);\n\n    this.emit('addChannel', channel);\n};\n\n// Create a data channel spec reference:\n// http://dev.w3.org/2011/webrtc/editor/webrtc.html#idl-def-RTCDataChannelInit\nPeerConnection.prototype.createDataChannel = function (name, opts) {\n    var channel = this.pc.createDataChannel(name, opts);\n\n    // make sure we keep a reference so this doesn't get garbage collected\n    this._localDataChannels.push(channel);\n\n    return channel;\n};\n\nPeerConnection.prototype.getStats = function () {\n    if (typeof arguments[0] === 'function') {\n        var cb = arguments[0];\n        this.pc.getStats().then(function (res) {\n            cb(null, res);\n        }, function (err) {\n            cb(err);\n        });\n    } else {\n        return this.pc.getStats.apply(this.pc, arguments);\n    }\n};\n\nmodule.exports = PeerConnection;\n\n},{\"lodash.clonedeep\":45,\"sdp-jingle-json\":54,\"util\":73,\"wildemitter\":75}],54:[function(require,module,exports){\nvar toSDP = require('./lib/tosdp');\nvar toJSON = require('./lib/tojson');\n\n\n// Converstion from JSON to SDP\n\nexports.toIncomingSDPOffer = function (session) {\n    return toSDP.toSessionSDP(session, {\n        role: 'responder',\n        direction: 'incoming'\n    });\n};\nexports.toOutgoingSDPOffer = function (session) {\n    return toSDP.toSessionSDP(session, {\n        role: 'initiator',\n        direction: 'outgoing'\n    });\n};\nexports.toIncomingSDPAnswer = function (session) {\n    return toSDP.toSessionSDP(session, {\n        role: 'initiator',\n        direction: 'incoming'\n    });\n};\nexports.toOutgoingSDPAnswer = function (session) {\n    return toSDP.toSessionSDP(session, {\n        role: 'responder',\n        direction: 'outgoing'\n    });\n};\nexports.toIncomingMediaSDPOffer = function (media) {\n    return toSDP.toMediaSDP(media, {\n        role: 'responder',\n        direction: 'incoming'\n    });\n};\nexports.toOutgoingMediaSDPOffer = function (media) {\n    return toSDP.toMediaSDP(media, {\n        role: 'initiator',\n        direction: 'outgoing'\n    });\n};\nexports.toIncomingMediaSDPAnswer = function (media) {\n    return toSDP.toMediaSDP(media, {\n        role: 'initiator',\n        direction: 'incoming'\n    });\n};\nexports.toOutgoingMediaSDPAnswer = function (media) {\n    return toSDP.toMediaSDP(media, {\n        role: 'responder',\n        direction: 'outgoing'\n    });\n};\nexports.toCandidateSDP = toSDP.toCandidateSDP;\nexports.toMediaSDP = toSDP.toMediaSDP;\nexports.toSessionSDP = toSDP.toSessionSDP;\n\n\n// Conversion from SDP to JSON\n\nexports.toIncomingJSONOffer = function (sdp, creators) {\n    return toJSON.toSessionJSON(sdp, {\n        role: 'responder',\n        direction: 'incoming',\n        creators: creators\n    });\n};\nexports.toOutgoingJSONOffer = function (sdp, creators) {\n    return toJSON.toSessionJSON(sdp, {\n        role: 'initiator',\n        direction: 'outgoing',\n        creators: creators\n    });\n};\nexports.toIncomingJSONAnswer = function (sdp, creators) {\n    return toJSON.toSessionJSON(sdp, {\n        role: 'initiator',\n        direction: 'incoming',\n        creators: creators\n    });\n};\nexports.toOutgoingJSONAnswer = function (sdp, creators) {\n    return toJSON.toSessionJSON(sdp, {\n        role: 'responder',\n        direction: 'outgoing',\n        creators: creators\n    });\n};\nexports.toIncomingMediaJSONOffer = function (sdp, creator) {\n    return toJSON.toMediaJSON(sdp, {\n        role: 'responder',\n        direction: 'incoming',\n        creator: creator\n    });\n};\nexports.toOutgoingMediaJSONOffer = function (sdp, creator) {\n    return toJSON.toMediaJSON(sdp, {\n        role: 'initiator',\n        direction: 'outgoing',\n        creator: creator\n    });\n};\nexports.toIncomingMediaJSONAnswer = function (sdp, creator) {\n    return toJSON.toMediaJSON(sdp, {\n        role: 'initiator',\n        direction: 'incoming',\n        creator: creator\n    });\n};\nexports.toOutgoingMediaJSONAnswer = function (sdp, creator) {\n    return toJSON.toMediaJSON(sdp, {\n        role: 'responder',\n        direction: 'outgoing',\n        creator: creator\n    });\n};\nexports.toCandidateJSON = toJSON.toCandidateJSON;\nexports.toMediaJSON = toJSON.toMediaJSON;\nexports.toSessionJSON = toJSON.toSessionJSON;\n\n},{\"./lib/tojson\":57,\"./lib/tosdp\":58}],55:[function(require,module,exports){\nexports.lines = function (sdp) {\n    return sdp.split('\\r\\n').filter(function (line) {\n        return line.length > 0;\n    });\n};\n\nexports.findLine = function (prefix, mediaLines, sessionLines) {\n    var prefixLength = prefix.length;\n    for (var i = 0; i < mediaLines.length; i++) {\n        if (mediaLines[i].substr(0, prefixLength) === prefix) {\n            return mediaLines[i];\n        }\n    }\n    // Continue searching in parent session section\n    if (!sessionLines) {\n        return false;\n    }\n\n    for (var j = 0; j < sessionLines.length; j++) {\n        if (sessionLines[j].substr(0, prefixLength) === prefix) {\n            return sessionLines[j];\n        }\n    }\n\n    return false;\n};\n\nexports.findLines = function (prefix, mediaLines, sessionLines) {\n    var results = [];\n    var prefixLength = prefix.length;\n    for (var i = 0; i < mediaLines.length; i++) {\n        if (mediaLines[i].substr(0, prefixLength) === prefix) {\n            results.push(mediaLines[i]);\n        }\n    }\n    if (results.length || !sessionLines) {\n        return results;\n    }\n    for (var j = 0; j < sessionLines.length; j++) {\n        if (sessionLines[j].substr(0, prefixLength) === prefix) {\n            results.push(sessionLines[j]);\n        }\n    }\n    return results;\n};\n\nexports.mline = function (line) {\n    var parts = line.substr(2).split(' ');\n    var parsed = {\n        media: parts[0],\n        port: parts[1],\n        proto: parts[2],\n        formats: []\n    };\n    for (var i = 3; i < parts.length; i++) {\n        if (parts[i]) {\n            parsed.formats.push(parts[i]);\n        }\n    }\n    return parsed;\n};\n\nexports.rtpmap = function (line) {\n    var parts = line.substr(9).split(' ');\n    var parsed = {\n        id: parts.shift()\n    };\n\n    parts = parts[0].split('/');\n\n    parsed.name = parts[0];\n    parsed.clockrate = parts[1];\n    parsed.channels = parts.length == 3 ? parts[2] : '1';\n    return parsed;\n};\n\nexports.sctpmap = function (line) {\n    // based on -05 draft\n    var parts = line.substr(10).split(' ');\n    var parsed = {\n        number: parts.shift(),\n        protocol: parts.shift(),\n        streams: parts.shift()\n    };\n    return parsed;\n};\n\n\nexports.fmtp = function (line) {\n    var kv, key, value;\n    var parts = line.substr(line.indexOf(' ') + 1).split(';');\n    var parsed = [];\n    for (var i = 0; i < parts.length; i++) {\n        kv = parts[i].split('=');\n        key = kv[0].trim();\n        value = kv[1];\n        if (key && value) {\n            parsed.push({key: key, value: value});\n        } else if (key) {\n            parsed.push({key: '', value: key});\n        }\n    }\n    return parsed;\n};\n\nexports.crypto = function (line) {\n    var parts = line.substr(9).split(' ');\n    var parsed = {\n        tag: parts[0],\n        cipherSuite: parts[1],\n        keyParams: parts[2],\n        sessionParams: parts.slice(3).join(' ')\n    };\n    return parsed;\n};\n\nexports.fingerprint = function (line) {\n    var parts = line.substr(14).split(' ');\n    return {\n        hash: parts[0],\n        value: parts[1]\n    };\n};\n\nexports.extmap = function (line) {\n    var parts = line.substr(9).split(' ');\n    var parsed = {};\n\n    var idpart = parts.shift();\n    var sp = idpart.indexOf('/');\n    if (sp >= 0) {\n        parsed.id = idpart.substr(0, sp);\n        parsed.senders = idpart.substr(sp + 1);\n    } else {\n        parsed.id = idpart;\n        parsed.senders = 'sendrecv';\n    }\n\n    parsed.uri = parts.shift() || '';\n\n    return parsed;\n};\n\nexports.rtcpfb = function (line) {\n    var parts = line.substr(10).split(' ');\n    var parsed = {};\n    parsed.id = parts.shift();\n    parsed.type = parts.shift();\n    if (parsed.type === 'trr-int') {\n        parsed.value = parts.shift();\n    } else {\n        parsed.subtype = parts.shift() || '';\n    }\n    parsed.parameters = parts;\n    return parsed;\n};\n\nexports.candidate = function (line) {\n    var parts;\n    if (line.indexOf('a=candidate:') === 0) {\n        parts = line.substring(12).split(' ');\n    } else { // no a=candidate\n        parts = line.substring(10).split(' ');\n    }\n\n    var candidate = {\n        foundation: parts[0],\n        component: parts[1],\n        protocol: parts[2].toLowerCase(),\n        priority: parts[3],\n        ip: parts[4],\n        port: parts[5],\n        // skip parts[6] == 'typ'\n        type: parts[7],\n        generation: '0'\n    };\n\n    for (var i = 8; i < parts.length; i += 2) {\n        if (parts[i] === 'raddr') {\n            candidate.relAddr = parts[i + 1];\n        } else if (parts[i] === 'rport') {\n            candidate.relPort = parts[i + 1];\n        } else if (parts[i] === 'generation') {\n            candidate.generation = parts[i + 1];\n        } else if (parts[i] === 'tcptype') {\n            candidate.tcpType = parts[i + 1];\n        }\n    }\n\n    candidate.network = '1';\n\n    return candidate;\n};\n\nexports.sourceGroups = function (lines) {\n    var parsed = [];\n    for (var i = 0; i < lines.length; i++) {\n        var parts = lines[i].substr(13).split(' ');\n        parsed.push({\n            semantics: parts.shift(),\n            sources: parts\n        });\n    }\n    return parsed;\n};\n\nexports.sources = function (lines) {\n    // http://tools.ietf.org/html/rfc5576\n    var parsed = [];\n    var sources = {};\n    for (var i = 0; i < lines.length; i++) {\n        var parts = lines[i].substr(7).split(' ');\n        var ssrc = parts.shift();\n\n        if (!sources[ssrc]) {\n            var source = {\n                ssrc: ssrc,\n                parameters: []\n            };\n            parsed.push(source);\n\n            // Keep an index\n            sources[ssrc] = source;\n        }\n\n        parts = parts.join(' ').split(':');\n        var attribute = parts.shift();\n        var value = parts.join(':') || null;\n\n        sources[ssrc].parameters.push({\n            key: attribute,\n            value: value\n        });\n    }\n\n    return parsed;\n};\n\nexports.groups = function (lines) {\n    // http://tools.ietf.org/html/rfc5888\n    var parsed = [];\n    var parts;\n    for (var i = 0; i < lines.length; i++) {\n        parts = lines[i].substr(8).split(' ');\n        parsed.push({\n            semantics: parts.shift(),\n            contents: parts\n        });\n    }\n    return parsed;\n};\n\nexports.bandwidth = function (line) {\n    var parts = line.substr(2).split(':');\n    var parsed = {};\n    parsed.type = parts.shift();\n    parsed.bandwidth = parts.shift();\n    return parsed;\n};\n\nexports.msid = function (line) {\n    var data = line.substr(7);\n    var parts = data.split(' ');\n    return {\n        msid: data,\n        mslabel: parts[0],\n        label: parts[1]\n    };\n};\n\n},{}],56:[function(require,module,exports){\nmodule.exports = {\n    initiator: {\n        incoming: {\n            initiator: 'recvonly',\n            responder: 'sendonly',\n            both: 'sendrecv',\n            none: 'inactive',\n            recvonly: 'initiator',\n            sendonly: 'responder',\n            sendrecv: 'both',\n            inactive: 'none'\n        },\n        outgoing: {\n            initiator: 'sendonly',\n            responder: 'recvonly',\n            both: 'sendrecv',\n            none: 'inactive',\n            recvonly: 'responder',\n            sendonly: 'initiator',\n            sendrecv: 'both',\n            inactive: 'none'\n        }\n    },\n    responder: {\n        incoming: {\n            initiator: 'sendonly',\n            responder: 'recvonly',\n            both: 'sendrecv',\n            none: 'inactive',\n            recvonly: 'responder',\n            sendonly: 'initiator',\n            sendrecv: 'both',\n            inactive: 'none'\n        },\n        outgoing: {\n            initiator: 'recvonly',\n            responder: 'sendonly',\n            both: 'sendrecv',\n            none: 'inactive',\n            recvonly: 'initiator',\n            sendonly: 'responder',\n            sendrecv: 'both',\n            inactive: 'none'\n        }\n    }\n};\n\n},{}],57:[function(require,module,exports){\nvar SENDERS = require('./senders');\nvar parsers = require('./parsers');\nvar idCounter = Math.random();\n\n\nexports._setIdCounter = function (counter) {\n    idCounter = counter;\n};\n\nexports.toSessionJSON = function (sdp, opts) {\n    var i;\n    var creators = opts.creators || [];\n    var role = opts.role || 'initiator';\n    var direction = opts.direction || 'outgoing';\n\n\n    // Divide the SDP into session and media sections.\n    var media = sdp.split('\\r\\nm=');\n    for (i = 1; i < media.length; i++) {\n        media[i] = 'm=' + media[i];\n        if (i !== media.length - 1) {\n            media[i] += '\\r\\n';\n        }\n    }\n    var session = media.shift() + '\\r\\n';\n    var sessionLines = parsers.lines(session);\n    var parsed = {};\n\n    var contents = [];\n    for (i = 0; i < media.length; i++) {\n        contents.push(exports.toMediaJSON(media[i], session, {\n            role: role,\n            direction: direction,\n            creator: creators[i] || 'initiator'\n        }));\n    }\n    parsed.contents = contents;\n\n    var groupLines = parsers.findLines('a=group:', sessionLines);\n    if (groupLines.length) {\n        parsed.groups = parsers.groups(groupLines);\n    }\n\n    return parsed;\n};\n\nexports.toMediaJSON = function (media, session, opts) {\n    var creator = opts.creator || 'initiator';\n    var role = opts.role || 'initiator';\n    var direction = opts.direction || 'outgoing';\n\n    var lines = parsers.lines(media);\n    var sessionLines = parsers.lines(session);\n    var mline = parsers.mline(lines[0]);\n\n    var content = {\n        creator: creator,\n        name: mline.media,\n        application: {\n            applicationType: 'rtp',\n            media: mline.media,\n            payloads: [],\n            encryption: [],\n            feedback: [],\n            headerExtensions: []\n        },\n        transport: {\n            transportType: 'iceUdp',\n            candidates: [],\n            fingerprints: []\n        }\n    };\n    if (mline.media == 'application') {\n        // FIXME: the description is most likely to be independent\n        // of the SDP and should be processed by other parts of the library\n        content.application = {\n            applicationType: 'datachannel'\n        };\n        content.transport.sctp = [];\n    }\n    var desc = content.application;\n    var trans = content.transport;\n\n    // If we have a mid, use that for the content name instead.\n    var mid = parsers.findLine('a=mid:', lines);\n    if (mid) {\n        content.name = mid.substr(6);\n    }\n\n    if (parsers.findLine('a=sendrecv', lines, sessionLines)) {\n        content.senders = 'both';\n    } else if (parsers.findLine('a=sendonly', lines, sessionLines)) {\n        content.senders = SENDERS[role][direction].sendonly;\n    } else if (parsers.findLine('a=recvonly', lines, sessionLines)) {\n        content.senders = SENDERS[role][direction].recvonly;\n    } else if (parsers.findLine('a=inactive', lines, sessionLines)) {\n        content.senders = 'none';\n    }\n\n    if (desc.applicationType == 'rtp') {\n        var bandwidth = parsers.findLine('b=', lines);\n        if (bandwidth) {\n            desc.bandwidth = parsers.bandwidth(bandwidth);\n        }\n\n        var ssrc = parsers.findLine('a=ssrc:', lines);\n        if (ssrc) {\n            desc.ssrc = ssrc.substr(7).split(' ')[0];\n        }\n\n        var rtpmapLines = parsers.findLines('a=rtpmap:', lines);\n        rtpmapLines.forEach(function (line) {\n            var payload = parsers.rtpmap(line);\n            payload.parameters = [];\n            payload.feedback = [];\n\n            var fmtpLines = parsers.findLines('a=fmtp:' + payload.id, lines);\n            // There should only be one fmtp line per payload\n            fmtpLines.forEach(function (line) {\n                payload.parameters = parsers.fmtp(line);\n            });\n\n            var fbLines = parsers.findLines('a=rtcp-fb:' + payload.id, lines);\n            fbLines.forEach(function (line) {\n                payload.feedback.push(parsers.rtcpfb(line));\n            });\n\n            desc.payloads.push(payload);\n        });\n\n        var cryptoLines = parsers.findLines('a=crypto:', lines, sessionLines);\n        cryptoLines.forEach(function (line) {\n            desc.encryption.push(parsers.crypto(line));\n        });\n\n        if (parsers.findLine('a=rtcp-mux', lines)) {\n            desc.mux = true;\n        }\n\n        var fbLines = parsers.findLines('a=rtcp-fb:*', lines);\n        fbLines.forEach(function (line) {\n            desc.feedback.push(parsers.rtcpfb(line));\n        });\n\n        var extLines = parsers.findLines('a=extmap:', lines);\n        extLines.forEach(function (line) {\n            var ext = parsers.extmap(line);\n\n            ext.senders = SENDERS[role][direction][ext.senders];\n\n            desc.headerExtensions.push(ext);\n        });\n\n        var ssrcGroupLines = parsers.findLines('a=ssrc-group:', lines);\n        desc.sourceGroups = parsers.sourceGroups(ssrcGroupLines || []);\n\n        var ssrcLines = parsers.findLines('a=ssrc:', lines);\n        var sources = desc.sources = parsers.sources(ssrcLines || []);\n\n        var msidLine = parsers.findLine('a=msid:', lines);\n        if (msidLine) {\n            var msid = parsers.msid(msidLine);\n            ['msid', 'mslabel', 'label'].forEach(function (key) {\n                for (var i = 0; i < sources.length; i++) {\n                    var found = false;\n                    for (var j = 0; j < sources[i].parameters.length; j++) {\n                        if (sources[i].parameters[j].key === key) {\n                            found = true;\n                        }\n                    }\n                    if (!found) {\n                        sources[i].parameters.push({ key: key, value: msid[key] });\n                    }\n                }\n            });\n        }\n\n        if (parsers.findLine('a=x-google-flag:conference', lines, sessionLines)) {\n            desc.googConferenceFlag = true;\n        }\n    }\n\n    // transport specific attributes\n    var fingerprintLines = parsers.findLines('a=fingerprint:', lines, sessionLines);\n    var setup = parsers.findLine('a=setup:', lines, sessionLines);\n    fingerprintLines.forEach(function (line) {\n        var fp = parsers.fingerprint(line);\n        if (setup) {\n            fp.setup = setup.substr(8);\n        }\n        trans.fingerprints.push(fp);\n    });\n\n    var ufragLine = parsers.findLine('a=ice-ufrag:', lines, sessionLines);\n    var pwdLine = parsers.findLine('a=ice-pwd:', lines, sessionLines);\n    if (ufragLine && pwdLine) {\n        trans.ufrag = ufragLine.substr(12);\n        trans.pwd = pwdLine.substr(10);\n        trans.candidates = [];\n\n        var candidateLines = parsers.findLines('a=candidate:', lines, sessionLines);\n        candidateLines.forEach(function (line) {\n            trans.candidates.push(exports.toCandidateJSON(line));\n        });\n    }\n\n    if (desc.applicationType == 'datachannel') {\n        var sctpmapLines = parsers.findLines('a=sctpmap:', lines);\n        sctpmapLines.forEach(function (line) {\n            var sctp = parsers.sctpmap(line);\n            trans.sctp.push(sctp);\n        });\n    }\n\n    return content;\n};\n\nexports.toCandidateJSON = function (line) {\n    var candidate = parsers.candidate(line.split('\\r\\n')[0]);\n    candidate.id = (idCounter++).toString(36).substr(0, 12);\n    return candidate;\n};\n\n},{\"./parsers\":55,\"./senders\":56}],58:[function(require,module,exports){\nvar SENDERS = require('./senders');\n\n\nexports.toSessionSDP = function (session, opts) {\n    var role = opts.role || 'initiator';\n    var direction = opts.direction || 'outgoing';\n    var sid = opts.sid || session.sid || Date.now();\n    var time = opts.time || Date.now();\n\n    var sdp = [\n        'v=0',\n        'o=- ' + sid + ' ' + time + ' IN IP4 0.0.0.0',\n        's=-',\n        't=0 0'\n    ];\n\n    var contents = session.contents || [];\n    var hasSources = false;\n    contents.forEach(function (content) {\n        if (content.application.sources &&\n            content.application.sources.length) {\n            hasSources = true;\n        }\n    });\n\n    if (hasSources) {\n        sdp.push('a=msid-semantic: WMS *');\n    }\n\n    var groups = session.groups || [];\n    groups.forEach(function (group) {\n        sdp.push('a=group:' + group.semantics + ' ' + group.contents.join(' '));\n    });\n\n\n    contents.forEach(function (content) {\n        sdp.push(exports.toMediaSDP(content, opts));\n    });\n\n    return sdp.join('\\r\\n') + '\\r\\n';\n};\n\nexports.toMediaSDP = function (content, opts) {\n    var sdp = [];\n\n    var role = opts.role || 'initiator';\n    var direction = opts.direction || 'outgoing';\n\n    var desc = content.application;\n    var transport = content.transport;\n    var payloads = desc.payloads || [];\n    var fingerprints = (transport && transport.fingerprints) || [];\n\n    var mline = [];\n    if (desc.applicationType == 'datachannel') {\n        mline.push('application');\n        mline.push('1');\n        mline.push('DTLS/SCTP');\n        if (transport.sctp) {\n            transport.sctp.forEach(function (map) {\n                mline.push(map.number);\n            });\n        }\n    } else {\n        mline.push(desc.media);\n        mline.push('1');\n        if (fingerprints.length > 0) {\n            mline.push('UDP/TLS/RTP/SAVPF');\n        } else if (desc.encryption && desc.encryption.length > 0) {\n            mline.push('RTP/SAVPF');\n        } else {\n            mline.push('RTP/AVPF');\n        }\n        payloads.forEach(function (payload) {\n            mline.push(payload.id);\n        });\n    }\n\n\n    sdp.push('m=' + mline.join(' '));\n\n    sdp.push('c=IN IP4 0.0.0.0');\n    if (desc.bandwidth && desc.bandwidth.type && desc.bandwidth.bandwidth) {\n        sdp.push('b=' + desc.bandwidth.type + ':' + desc.bandwidth.bandwidth);\n    }\n    if (desc.applicationType == 'rtp') {\n        sdp.push('a=rtcp:1 IN IP4 0.0.0.0');\n    }\n\n    if (transport) {\n        if (transport.ufrag) {\n            sdp.push('a=ice-ufrag:' + transport.ufrag);\n        }\n        if (transport.pwd) {\n            sdp.push('a=ice-pwd:' + transport.pwd);\n        }\n\n        var pushedSetup = false;\n        fingerprints.forEach(function (fingerprint) {\n            sdp.push('a=fingerprint:' + fingerprint.hash + ' ' + fingerprint.value);\n            if (fingerprint.setup && !pushedSetup) {\n                sdp.push('a=setup:' + fingerprint.setup);\n            }\n        });\n\n        if (transport.sctp) {\n            transport.sctp.forEach(function (map) {\n                sdp.push('a=sctpmap:' + map.number + ' ' + map.protocol + ' ' + map.streams);\n            });\n        }\n    }\n\n    if (desc.applicationType == 'rtp') {\n        sdp.push('a=' + (SENDERS[role][direction][content.senders] || 'sendrecv'));\n    }\n    sdp.push('a=mid:' + content.name);\n\n    if (desc.sources && desc.sources.length) {\n        (desc.sources[0].parameters || []).forEach(function (param) {\n            if (param.key === 'msid') {\n                sdp.push('a=msid:' + param.value);\n            }\n        });\n    }\n\n    if (desc.mux) {\n        sdp.push('a=rtcp-mux');\n    }\n\n    var encryption = desc.encryption || [];\n    encryption.forEach(function (crypto) {\n        sdp.push('a=crypto:' + crypto.tag + ' ' + crypto.cipherSuite + ' ' + crypto.keyParams + (crypto.sessionParams ? ' ' + crypto.sessionParams : ''));\n    });\n    if (desc.googConferenceFlag) {\n        sdp.push('a=x-google-flag:conference');\n    }\n\n    payloads.forEach(function (payload) {\n        var rtpmap = 'a=rtpmap:' + payload.id + ' ' + payload.name + '/' + payload.clockrate;\n        if (payload.channels && payload.channels != '1') {\n            rtpmap += '/' + payload.channels;\n        }\n        sdp.push(rtpmap);\n\n        if (payload.parameters && payload.parameters.length) {\n            var fmtp = ['a=fmtp:' + payload.id];\n            var parameters = [];\n            payload.parameters.forEach(function (param) {\n                parameters.push((param.key ? param.key + '=' : '') + param.value);\n            });\n            fmtp.push(parameters.join(';'));\n            sdp.push(fmtp.join(' '));\n        }\n\n        if (payload.feedback) {\n            payload.feedback.forEach(function (fb) {\n                if (fb.type === 'trr-int') {\n                    sdp.push('a=rtcp-fb:' + payload.id + ' trr-int ' + (fb.value ? fb.value : '0'));\n                } else {\n                    sdp.push('a=rtcp-fb:' + payload.id + ' ' + fb.type + (fb.subtype ? ' ' + fb.subtype : ''));\n                }\n            });\n        }\n    });\n\n    if (desc.feedback) {\n        desc.feedback.forEach(function (fb) {\n            if (fb.type === 'trr-int') {\n                sdp.push('a=rtcp-fb:* trr-int ' + (fb.value ? fb.value : '0'));\n            } else {\n                sdp.push('a=rtcp-fb:* ' + fb.type + (fb.subtype ? ' ' + fb.subtype : ''));\n            }\n        });\n    }\n\n    var hdrExts = desc.headerExtensions || [];\n    hdrExts.forEach(function (hdr) {\n        sdp.push('a=extmap:' + hdr.id + (hdr.senders ? '/' + SENDERS[role][direction][hdr.senders] : '') + ' ' + hdr.uri);\n    });\n\n    var ssrcGroups = desc.sourceGroups || [];\n    ssrcGroups.forEach(function (ssrcGroup) {\n        sdp.push('a=ssrc-group:' + ssrcGroup.semantics + ' ' + ssrcGroup.sources.join(' '));\n    });\n\n    var ssrcs = desc.sources || [];\n    ssrcs.forEach(function (ssrc) {\n        for (var i = 0; i < ssrc.parameters.length; i++) {\n            var param = ssrc.parameters[i];\n            sdp.push('a=ssrc:' + (ssrc.ssrc || desc.ssrc) + ' ' + param.key + (param.value ? (':' + param.value) : ''));\n        }\n    });\n\n    var candidates = transport.candidates || [];\n    candidates.forEach(function (candidate) {\n        sdp.push(exports.toCandidateSDP(candidate));\n    });\n\n    return sdp.join('\\r\\n');\n};\n\nexports.toCandidateSDP = function (candidate) {\n    var sdp = [];\n\n    sdp.push(candidate.foundation);\n    sdp.push(candidate.component);\n    sdp.push(candidate.protocol.toUpperCase());\n    sdp.push(candidate.priority);\n    sdp.push(candidate.ip);\n    sdp.push(candidate.port);\n\n    var type = candidate.type;\n    sdp.push('typ');\n    sdp.push(type);\n    if (type === 'srflx' || type === 'prflx' || type === 'relay') {\n        if (candidate.relAddr && candidate.relPort) {\n            sdp.push('raddr');\n            sdp.push(candidate.relAddr);\n            sdp.push('rport');\n            sdp.push(candidate.relPort);\n        }\n    }\n    if (candidate.tcpType && candidate.protocol.toUpperCase() == 'TCP') {\n        sdp.push('tcptype');\n        sdp.push(candidate.tcpType);\n    }\n\n    sdp.push('generation');\n    sdp.push(candidate.generation || '0');\n\n    // FIXME: apparently this is wrong per spec\n    // but then, we need this when actually putting this into\n    // SDP so it's going to stay.\n    // decision needs to be revisited when browsers dont\n    // accept this any longer\n    return 'a=candidate:' + sdp.join(' ');\n};\n\n},{\"./senders\":56}],59:[function(require,module,exports){\n /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress); // was: relAddr\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort); // was: relPort\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n}\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      params.push(param + '=' + codec.parameters[param]);\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n}\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  caps.headerExtensions.forEach(function(extension) {\n    sdp += SDPUtils.writeExtmap(extension);\n  });\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.split(' ');\n    parts.shift();\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(5), 10);\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  var cname;\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\nSDPUtils.writeSessionBoilerplate = function() {\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\n// Expose public methods.\nmodule.exports = SDPUtils;\n\n},{}],60:[function(require,module,exports){\n\nmodule.exports = require('./lib/');\n\n},{\"./lib/\":61}],61:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup(uri, opts) {\n  if (typeof uri == 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var io;\n\n  if (opts.forceNew || opts['force new connection'] || false === opts.multiplex) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n\n  return io.socket(parsed.path);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n\n},{\"./manager\":62,\"./socket\":64,\"./url\":65,\"debug\":19,\"socket.io-parser\":67}],62:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar object = require('object-component');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager(uri, opts){\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' == typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connected = [];\n  this.encoding = false;\n  this.packetBuffer = [];\n  this.encoder = new parser.Encoder();\n  this.decoder = new parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function() {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function(){\n  for (var nsp in this.nsps) {\n    this.nsps[nsp].id = this.engine.id;\n  }\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function(v){\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function(v){\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function(v){\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function(v){\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function(v){\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function(v){\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function() {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function(fn){\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function() {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function(data){\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function(){\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function(){\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function(){\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function(data){\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function(packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function(err){\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function(nsp){\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connect', function(){\n      socket.id = self.engine.id;\n      if (!~indexOf(self.connected, socket)) {\n        self.connected.push(socket);\n      }\n    });\n  }\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function(socket){\n  var index = indexOf(this.connected, socket);\n  if (~index) this.connected.splice(index, 1);\n  if (this.connected.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function(packet){\n  debug('writing packet %j', packet);\n  var self = this;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function(encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i]);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function() {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function(){\n  var sub;\n  while (sub = this.subs.shift()) sub.destroy();\n\n  this.packetBuffer = [];\n  this.encoding = false;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function(){\n  this.skipReconnect = true;\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.engine && this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function(reason){\n  debug('close');\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function(){\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function(){\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function(err){\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function(){\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function(){\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n\n},{\"./on\":63,\"./socket\":64,\"./url\":65,\"backo2\":13,\"component-bind\":16,\"component-emitter\":17,\"debug\":19,\"engine.io-client\":20,\"indexof\":41,\"object-component\":48,\"socket.io-parser\":67}],63:[function(require,module,exports){\n\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on(obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function(){\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n\n},{}],64:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar hasBin = require('has-binary');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket(io, nsp){\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  if (this.io.autoConnect) this.open();\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function() {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function(){\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' == this.io.readyState) this.onopen();\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function(){\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function(ev){\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var parserType = parser.EVENT; // default\n  if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\n  var packet = { type: parserType, data: args };\n\n  // event ack callback\n  if ('function' == typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function(packet){\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function(){\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' != this.nsp) {\n    this.packet({ type: parser.CONNECT });\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function(reason){\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function(packet){\n  if (packet.nsp != this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function(packet){\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function(id){\n  var self = this;\n  var sent = false;\n  return function(){\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    var type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n    self.packet({\n      type: type,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function(packet){\n  debug('calling ack %s with %j', packet.id, packet.data);\n  var fn = this.acks[packet.id];\n  fn.apply(this, packet.data);\n  delete this.acks[packet.id];\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function(){\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function(){\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function(){\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function(){\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function(){\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n},{\"./on\":63,\"component-bind\":16,\"component-emitter\":17,\"debug\":19,\"has-binary\":39,\"socket.io-parser\":67,\"to-array\":69}],65:[function(require,module,exports){\n(function (global){\n\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url(uri, loc){\n  var obj = uri;\n\n  // default to window.location\n  var loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' == typeof uri) {\n    if ('/' == uri.charAt(0)) {\n      if ('/' == uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.hostname + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' != typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    }\n    else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  // define unique id\n  obj.id = obj.protocol + '://' + obj.host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + obj.host + (loc && loc.port == obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"debug\":19,\"parseuri\":51}],66:[function(require,module,exports){\n(function (global){\n/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet){\n  var buffers = [];\n  var packetData = packet.data;\n\n  function _deconstructPacket(data) {\n    if (!data) return data;\n\n    if (isBuf(data)) {\n      var placeholder = { _placeholder: true, num: buffers.length };\n      buffers.push(data);\n      return placeholder;\n    } else if (isArray(data)) {\n      var newData = new Array(data.length);\n      for (var i = 0; i < data.length; i++) {\n        newData[i] = _deconstructPacket(data[i]);\n      }\n      return newData;\n    } else if ('object' == typeof data && !(data instanceof Date)) {\n      var newData = {};\n      for (var key in data) {\n        newData[key] = _deconstructPacket(data[key]);\n      }\n      return newData;\n    }\n    return data;\n  }\n\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  var curPlaceHolder = 0;\n\n  function _reconstructPacket(data) {\n    if (data && data._placeholder) {\n      var buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\n      return buf;\n    } else if (isArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        data[i] = _reconstructPacket(data[i]);\n      }\n      return data;\n    } else if (data && 'object' == typeof data) {\n      for (var key in data) {\n        data[key] = _reconstructPacket(data[key]);\n      }\n      return data;\n    }\n    return data;\n  }\n\n  packet.data = _reconstructPacket(packet.data);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((global.Blob && obj instanceof Blob) ||\n        (global.File && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (obj && 'object' == typeof obj && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./is-buffer\":68,\"isarray\":42}],67:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar json = require('json3');\nvar isArray = require('isarray');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'BINARY_EVENT',\n  'ACK',\n  'BINARY_ACK',\n  'ERROR'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    encodeAsBinary(obj, callback);\n  }\n  else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n  var str = '';\n  var nsp = false;\n\n  // first is type\n  str += obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    str += obj.attachments;\n    str += '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' != obj.nsp) {\n    nsp = true;\n    str += obj.nsp;\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    if (nsp) {\n      str += ',';\n      nsp = false;\n    }\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    if (nsp) str += ',';\n    str += json.stringify(obj.data);\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if ('string' == typeof obj) {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var p = {};\n  var i = 0;\n\n  // look up type\n  p.type = Number(str.charAt(0));\n  if (null == exports.types[p.type]) return error();\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\n    var buf = '';\n    while (str.charAt(++i) != '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) != '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' == str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' == c) break;\n      p.nsp += c;\n      if (i == str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i == str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    try {\n      p.data = json.parse(str.substr(i));\n    } catch(e){\n      return error();\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length == this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(data){\n  return {\n    type: exports.ERROR,\n    data: 'parser error'\n  };\n}\n\n},{\"./binary\":66,\"./is-buffer\":68,\"component-emitter\":17,\"debug\":19,\"isarray\":42,\"json3\":43}],68:[function(require,module,exports){\n(function (global){\n\nmodule.exports = isBuf;\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],69:[function(require,module,exports){\nmodule.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n\n},{}],70:[function(require,module,exports){\n(function (global){\n/*! https://mths.be/utf8js v2.0.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, its not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tvar byte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.0.0',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],71:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],72:[function(require,module,exports){\nmodule.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n},{}],73:[function(require,module,exports){\n(function (process,global){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./support/isBuffer\":72,\"_process\":52,\"inherits\":71}],74:[function(require,module,exports){\n// created by @HenrikJoreteg\nvar prefix;\nvar version;\n\nif (window.mozRTCPeerConnection || navigator.mozGetUserMedia) {\n    prefix = 'moz';\n    version = parseInt(navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1], 10);\n} else if (window.webkitRTCPeerConnection || navigator.webkitGetUserMedia) {\n    prefix = 'webkit';\n    version = navigator.userAgent.match(/Chrom(e|ium)/) && parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10);\n}\n\nvar PC = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\nvar IceCandidate = window.mozRTCIceCandidate || window.RTCIceCandidate;\nvar SessionDescription = window.mozRTCSessionDescription || window.RTCSessionDescription;\nvar MediaStream = window.webkitMediaStream || window.MediaStream;\nvar screenSharing = window.location.protocol === 'https:' &&\n    ((prefix === 'webkit' && version >= 26) ||\n     (prefix === 'moz' && version >= 33))\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\nvar videoEl = document.createElement('video');\nvar supportVp8 = videoEl && videoEl.canPlayType && videoEl.canPlayType('video/webm; codecs=\"vp8\", vorbis') === \"probably\";\nvar getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia;\n\n// export support flags and constructors.prototype && PC\nmodule.exports = {\n    prefix: prefix,\n    browserVersion: version,\n    support: !!PC && !!getUserMedia,\n    // new support style\n    supportRTCPeerConnection: !!PC,\n    supportVp8: supportVp8,\n    supportGetUserMedia: !!getUserMedia,\n    supportDataChannel: !!(PC && PC.prototype && PC.prototype.createDataChannel),\n    supportWebAudio: !!(AudioContext && AudioContext.prototype.createMediaStreamSource),\n    supportMediaStream: !!(MediaStream && MediaStream.prototype.removeTrack),\n    supportScreenSharing: !!screenSharing,\n    // constructors\n    AudioContext: AudioContext,\n    PeerConnection: PC,\n    SessionDescription: SessionDescription,\n    IceCandidate: IceCandidate,\n    MediaStream: MediaStream,\n    getUserMedia: getUserMedia\n};\n\n},{}],75:[function(require,module,exports){\n/*\nWildEmitter.js is a slim little event emitter by @henrikjoreteg largely based\non @visionmedia's Emitter from UI Kit.\n\nWhy? I wanted it standalone.\n\nI also wanted support for wildcard emitters like this:\n\nemitter.on('*', function (eventName, other, event, payloads) {\n\n});\n\nemitter.on('somenamespace*', function (eventName, payloads) {\n\n});\n\nPlease note that callbacks triggered by wildcard registered events also get\nthe event name as the first argument.\n*/\n\nmodule.exports = WildEmitter;\n\nfunction WildEmitter() { }\n\nWildEmitter.mixin = function (constructor) {\n    var prototype = constructor.prototype || constructor;\n\n    prototype.isWildEmitter= true;\n\n    // Listen on the given `event` with `fn`. Store a group name if present.\n    prototype.on = function (event, groupName, fn) {\n        this.callbacks = this.callbacks || {};\n        var hasGroup = (arguments.length === 3),\n            group = hasGroup ? arguments[1] : undefined,\n            func = hasGroup ? arguments[2] : arguments[1];\n        func._groupName = group;\n        (this.callbacks[event] = this.callbacks[event] || []).push(func);\n        return this;\n    };\n\n    // Adds an `event` listener that will be invoked a single\n    // time then automatically removed.\n    prototype.once = function (event, groupName, fn) {\n        var self = this,\n            hasGroup = (arguments.length === 3),\n            group = hasGroup ? arguments[1] : undefined,\n            func = hasGroup ? arguments[2] : arguments[1];\n        function on() {\n            self.off(event, on);\n            func.apply(this, arguments);\n        }\n        this.on(event, group, on);\n        return this;\n    };\n\n    // Unbinds an entire group\n    prototype.releaseGroup = function (groupName) {\n        this.callbacks = this.callbacks || {};\n        var item, i, len, handlers;\n        for (item in this.callbacks) {\n            handlers = this.callbacks[item];\n            for (i = 0, len = handlers.length; i < len; i++) {\n                if (handlers[i]._groupName === groupName) {\n                    //console.log('removing');\n                    // remove it and shorten the array we're looping through\n                    handlers.splice(i, 1);\n                    i--;\n                    len--;\n                }\n            }\n        }\n        return this;\n    };\n\n    // Remove the given callback for `event` or all\n    // registered callbacks.\n    prototype.off = function (event, fn) {\n        this.callbacks = this.callbacks || {};\n        var callbacks = this.callbacks[event],\n            i;\n\n        if (!callbacks) return this;\n\n        // remove all handlers\n        if (arguments.length === 1) {\n            delete this.callbacks[event];\n            return this;\n        }\n\n        // remove specific handler\n        i = callbacks.indexOf(fn);\n        callbacks.splice(i, 1);\n        if (callbacks.length === 0) {\n            delete this.callbacks[event];\n        }\n        return this;\n    };\n\n    /// Emit `event` with the given args.\n    // also calls any `*` handlers\n    prototype.emit = function (event) {\n        this.callbacks = this.callbacks || {};\n        var args = [].slice.call(arguments, 1),\n            callbacks = this.callbacks[event],\n            specialCallbacks = this.getWildcardCallbacks(event),\n            i,\n            len,\n            item,\n            listeners;\n\n        if (callbacks) {\n            listeners = callbacks.slice();\n            for (i = 0, len = listeners.length; i < len; ++i) {\n                if (!listeners[i]) {\n                    break;\n                }\n                listeners[i].apply(this, args);\n            }\n        }\n\n        if (specialCallbacks) {\n            len = specialCallbacks.length;\n            listeners = specialCallbacks.slice();\n            for (i = 0, len = listeners.length; i < len; ++i) {\n                if (!listeners[i]) {\n                    break;\n                }\n                listeners[i].apply(this, [event].concat(args));\n            }\n        }\n\n        return this;\n    };\n\n    // Helper for for finding special wildcard event handlers that match the event\n    prototype.getWildcardCallbacks = function (eventName) {\n        this.callbacks = this.callbacks || {};\n        var item,\n            split,\n            result = [];\n\n        for (item in this.callbacks) {\n            split = item.split('*');\n            if (item === '*' || (split.length === 2 && eventName.slice(0, split[0].length) === split[0])) {\n                result = result.concat(this.callbacks[item]);\n            }\n        }\n        return result;\n    };\n\n};\n\nWildEmitter.mixin(WildEmitter);\n\n},{}],76:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar global = window//(function() { return this; })();\n\n/**\n * WebSocket constructor.\n */\n\nvar WebSocket = global.WebSocket || global.MozWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WebSocket ? ws : null;\n\n/**\n * WebSocket constructor.\n *\n * The third `opts` options object gets ignored in web browsers, since it's\n * non-standard, and throws a TypeError if passed to the constructor.\n * See: https://github.com/einaros/ws/issues/227\n *\n * @param {String} uri\n * @param {Array} protocols (optional)\n * @param {Object) opts (optional)\n * @api public\n */\n\nfunction ws(uri, protocols, opts) {\n  var instance;\n  if (protocols) {\n    instance = new WebSocket(uri, protocols);\n  } else {\n    instance = new WebSocket(uri);\n  }\n  return instance;\n}\n\nif (WebSocket) ws.prototype = WebSocket.prototype;\n\n},{}],77:[function(require,module,exports){\nvar util = require('util');\nvar webrtcSupport = require('webrtcsupport');\nvar PeerConnection = require('rtcpeerconnection');\nvar WildEmitter = require('wildemitter');\nvar FileTransfer = require('filetransfer');\n\n// the inband-v1 protocol is sending metadata inband in a serialized JSON object\n// followed by the actual data. Receiver closes the datachannel upon completion\nvar INBAND_FILETRANSFER_V1 = 'https://simplewebrtc.com/protocol/filetransfer#inband-v1';\n\nfunction isAllTracksEnded(stream) {\n    var isAllTracksEnded = true;\n    stream.getTracks().forEach(function (t) {\n        isAllTracksEnded = t.readyState === 'ended' && isAllTracksEnded;\n    });\n    return isAllTracksEnded;\n}\n\nfunction Peer(options) {\n                ///MLUpdate///\n                this.chunkedMessages = new Object();\n                this.nickName = options.nickName;\n                this.mode = options.mode;\n                ///MLUpdate///\n\n    var self = this;\n\n    // call emitter constructor\n    WildEmitter.call(this);\n\n    this.id = options.id;\n    this.parent = options.parent;\n    this.type = options.type || 'video';\n    this.oneway = options.oneway || false;\n    this.sharemyscreen = options.sharemyscreen || false;\n    this.browserPrefix = options.prefix;\n    this.stream = options.stream;\n    this.enableDataChannels = options.enableDataChannels === undefined ? this.parent.config.enableDataChannels : options.enableDataChannels;\n    this.receiveMedia = options.receiveMedia || this.parent.config.receiveMedia;\n    this.channels = {};\n    this.sid = options.sid || Date.now().toString();\n    // Create an RTCPeerConnection via the polyfill\n\n    ///MLUpdate///\n    var params = {\n        vidEncoder: options.vidEncoder,\n        vidBitrate: options.vidBitrate,\n        audEncoder: options.audEncoder,\n        audBitrate: options.audBitrate,\n    }\n\n    ///MLUpdate///\n    this.pc = new PeerConnection(this.parent.config.peerConnectionConfig, this.parent.config.peerConnectionConstraints, params);\n    this.pc.on('ice', this.onIceCandidate.bind(this));\n    this.pc.on('endOfCandidates', function (event) {\n        self.send('endOfCandidates', event);\n    });\n    this.pc.on('offer', function (offer) {\n        if (self.parent.config.nick) offer.nick = self.parent.config.nick;\n        self.send('offer', offer);\n    });\n    this.pc.on('answer', function (answer) {\n        if (self.parent.config.nick) answer.nick = self.parent.config.nick;\n        self.send('answer', answer);\n    });\n    this.pc.on('addStream', this.handleRemoteStreamAdded.bind(this));\n    this.pc.on('addChannel', this.handleDataChannelAdded.bind(this));\n    this.pc.on('removeStream', this.handleStreamRemoved.bind(this));\n    // Just fire negotiation needed events for now\n    // When browser re-negotiation handling seems to work\n    // we can use this as the trigger for starting the offer/answer process\n    // automatically. We'll just leave it be for now while this stabalizes.\n    this.pc.on('negotiationNeeded', this.emit.bind(this, 'negotiationNeeded'));\n    this.pc.on('iceConnectionStateChange', this.emit.bind(this, 'iceConnectionStateChange'));\n    this.pc.on('iceConnectionStateChange', function () {\n        switch (self.pc.iceConnectionState) {\n        case 'failed':\n            // currently, in chrome only the initiator goes to failed\n            // so we need to signal this to the peer\n            if (self.pc.pc.localDescription.type === 'offer') {\n                self.parent.emit('iceFailed', self);\n                self.send('connectivityError');\n            }\n            break;\n        }\n    });\n    this.pc.on('signalingStateChange', this.emit.bind(this, 'signalingStateChange'));\n    this.logger = this.parent.logger;\n\n    // handle screensharing/broadcast mode\n    if (options.type === 'screen') {\n        if (this.parent.localScreens && this.parent.localScreens[0] && this.sharemyscreen) {\n            this.logger.log('adding local screen stream to peer connection');\n            this.pc.addStream(this.parent.localScreens[0]);\n            this.broadcaster = options.broadcaster;\n        }\n    } else {\n        this.parent.localStreams.forEach(function (stream) {\n            self.pc.addStream(stream);\n        });\n    }\n\n    this.on('channelOpen', function (channel) {\n\n                    ///MLUpdate///\n                    this.parent.emit('dataChannelOpened', channel, this);\n                    ///MLUpdate///\n        if (channel.protocol === INBAND_FILETRANSFER_V1) {\n            channel.onmessage = function (event) {\n                var metadata = JSON.parse(event.data);\n                var receiver = new FileTransfer.Receiver();\n                receiver.receive(metadata, channel);\n                self.emit('fileTransfer', metadata, receiver);\n                receiver.on('receivedFile', function (file, metadata) {\n                    receiver.channel.close();\n                });\n            };\n        }\n    });\n\n    // proxy events to parent\n    this.on('*', function () {\n        self.parent.emit.apply(self.parent, arguments);\n    });\n}\n\nutil.inherits(Peer, WildEmitter);\n\nPeer.prototype.handleMessage = function (message) {\n    var self = this;\n\n    this.logger.log('getting', message.type, message);\n\n    if (message.prefix) this.browserPrefix = message.prefix;\n\n    if (message.type === 'offer') {\n        if (!this.nick) this.nick = message.payload.nick;\n        delete message.payload.nick;\n        this.pc.handleOffer(message.payload, function (err) {\n            if (err) {\n                return;\n            }\n            // auto-accept\n            self.pc.answer(function (err, sessionDescription) {\n                //self.send('answer', sessionDescription);\n            });\n        });\n    } else if (message.type === 'answer') {\n        if (!this.nick) this.nick = message.payload.nick;\n        delete message.payload.nick;\n        this.pc.handleAnswer(message.payload);\n    } else if (message.type === 'candidate') {\n        this.pc.processIce(message.payload);\n    } else if (message.type === 'connectivityError') {\n        this.parent.emit('connectivityError', self);\n    } else if (message.type === 'mute') {\n        this.parent.emit('mute', {id: message.from, name: message.payload.name});\n    } else if (message.type === 'unmute') {\n        this.parent.emit('unmute', {id: message.from, name: message.payload.name});\n    } else if (message.type === 'endOfCandidates') {\n        // Edge requires an end-of-candidates. Since only Edge will have mLines or tracks on the\n        // shim this will only be called in Edge.\n        var mLines = this.pc.pc.transceivers || [];\n        mLines.forEach(function (mLine) {\n            if (mLine.iceTransport) {\n                mLine.iceTransport.addRemoteCandidate({});\n            }\n        });\n    }\n                else if (message.type === 'customMessage') {\n                    this.parent.emit('customMessage', { id: message.from, message: message.payload });\n                }\n};\n\n// send via signalling channel\nPeer.prototype.send = function (messageType, payload) {\n    var message = {\n        to: this.id,\n        sid: this.sid,\n        broadcaster: this.broadcaster,\n        roomType: this.type,\n        type: messageType,\n        payload: payload,\n        prefix: webrtcSupport.prefix\n    };\n    this.logger.log('sending', messageType, message);\n    this.parent.emit('message', message);\n};\n\n// send via data channel\n// returns true when message was sent and false if channel is not open\nPeer.prototype.sendDirectly = function (channel, messageType, payload) {\n    var message = {\n        type: messageType,\n        payload: payload\n    };\n    this.logger.log('sending via datachannel', channel, messageType, message);\n    var dc = this.getDataChannel(channel);\n    if (dc.readyState != 'open') return false;\n                var splitted = message.payload.match(/(.|[\\r\\10000]){1,10000}/g);\n\n                function guid() {\n                    function s4() {\n                        return Math.floor((1 + Math.random()) * 0x10000)\n                          .toString(16)\n                          .substring(1);\n                    }\n                    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n                      s4() + '-' + s4() + s4() + s4();\n                }\n                //Chunkify message and send through datachannel\n                var guid = guid();\n                for (var i = 0; i < splitted.length; i++) {\n                    message.payload = splitted[i];\n                    message.messageId = guid;\n                    message.chunk = i;\n                    message.chunksCount = splitted.length;\n    dc.send(JSON.stringify(message));\n                }\n    return true;\n};\n\n// Internal method registering handlers for a data channel and emitting events on the peer\nPeer.prototype._observeDataChannel = function (channel) {\n    var self = this;\n    channel.onclose = this.emit.bind(this, 'channelClose', channel);\n    channel.onerror = this.emit.bind(this, 'channelError', channel);\n    channel.onmessage = function (event) {\n                    var message = JSON.parse(event.data);\n                    var nChunksCount = parseInt(message.chunksCount, 10);\n                    var nChunk = parseInt(message.chunk, 10)\n\n                    if (message.chunksCount && nChunksCount > 1) {\n                        if (self.chunkedMessages[message.messageId]) {\n\n                            var temp = self.chunkedMessages[message.messageId];\n                            self.chunkedMessages[message.messageId] = temp + message.payload;\n\n                            if (nChunksCount == nChunk + 1) {\n\n                                message.payload = self.chunkedMessages[message.messageId]\n                                delete self.chunkedMessages[message.messageId];\n                            }\n                            else\n                                return;\n                        }\n                        else if (message.chunk == 0) {\n                            self.chunkedMessages[message.messageId] = message.payload;\n                            return;\n                        }\n                    }\n                    self.emit('channelMessage', self, channel.label, message, channel, event);\n    };\n    channel.onopen = this.emit.bind(this, 'channelOpen', channel);\n};\n\n// Fetch or create a data channel by the given name\nPeer.prototype.getDataChannel = function (name, opts) {\n    if (!webrtcSupport.supportDataChannel) return this.emit('error', new Error('createDataChannel not supported'));\n    var channel = this.channels[name];\n    opts || (opts = {});\n    if (channel) return channel;\n    // if we don't have one by this label, create it\n    channel = this.channels[name] = this.pc.createDataChannel(name, opts);\n    this._observeDataChannel(channel);\n    return channel;\n};\n\nPeer.prototype.onIceCandidate = function (candidate) {\n    if (this.closed) return;\n    if (candidate) {\n        var pcConfig = this.parent.config.peerConnectionConfig;\n        if (webrtcSupport.prefix === 'moz' && pcConfig && pcConfig.iceTransports &&\n                candidate.candidate && candidate.candidate.candidate &&\n                candidate.candidate.candidate.indexOf(pcConfig.iceTransports) < 0) {\n            this.logger.log('Ignoring ice candidate not matching pcConfig iceTransports type: ', pcConfig.iceTransports);\n        } else {\n            this.send('candidate', candidate);\n        }\n    } else {\n        this.logger.log(\"End of candidates.\");\n    }\n};\n\nPeer.prototype.start = function () {\n    var self = this;\n\n    // well, the webrtc api requires that we either\n    // a) create a datachannel a priori\n    // b) do a renegotiation later to add the SCTP m-line\n    // Let's do (a) first...\n    if (this.enableDataChannels) {\n        this.getDataChannel('simplewebrtc');\n    }\n\n    this.pc.offer(this.receiveMedia, function (err, sessionDescription) {\n        //self.send('offer', sessionDescription);\n    });\n};\n\nPeer.prototype.icerestart = function () {\n    var constraints = this.receiveMedia;\n    constraints.mandatory.IceRestart = true;\n    this.pc.offer(constraints, function (err, success) { });\n};\n\nPeer.prototype.end = function () {\n    if (this.closed) return;\n    this.pc.close();\n    this.handleStreamRemoved();\n};\n\nPeer.prototype.handleRemoteStreamAdded = function (event) {\n    var self = this;\n    if (this.stream) {\n        this.logger.warn('Already have a remote stream');\n    } else {\n        this.stream = event.stream;\n\n        this.stream.getTracks().forEach(function (track) {\n            track.addEventListener('ended', function () {\n                if (isAllTracksEnded(self.stream)) {\n                    self.end();\n                }\n            });\n        });\n\n        this.parent.emit('peerStreamAdded', this);\n    }\n};\n\nPeer.prototype.handleStreamRemoved = function () {\n    var peerIndex = this.parent.peers.indexOf(this);\n    if (peerIndex > -1) {\n        this.parent.peers.splice(peerIndex, 1);\n        this.closed = true;\n        this.parent.emit('peerStreamRemoved', this);\n                    this.pc = null;\n    }\n};\n\nPeer.prototype.handleDataChannelAdded = function (channel) {\n    this.channels[channel.label] = channel;\n    this._observeDataChannel(channel);\n};\n\nPeer.prototype.sendFile = function (file) {\n    var sender = new FileTransfer.Sender();\n    var dc = this.getDataChannel('filetransfer' + (new Date()).getTime(), {\n        protocol: INBAND_FILETRANSFER_V1\n    });\n    // override onopen\n    dc.onopen = function () {\n        dc.send(JSON.stringify({\n            size: file.size,\n            name: file.name\n        }));\n        sender.send(file, dc);\n    };\n    // override onclose\n    dc.onclose = function () {\n        console.log('sender received transfer');\n        sender.emit('complete');\n    };\n    return sender;\n};\n\nmodule.exports = Peer;\n\n},{\"filetransfer\":35,\"rtcpeerconnection\":53,\"util\":73,\"webrtcsupport\":74,\"wildemitter\":75}],78:[function(require,module,exports){\nvar WebRTC = require('./webrtc');\nvar WildEmitter = require('wildemitter');\nvar webrtcSupport = require('webrtcsupport');\nvar attachMediaStream = require('attachmediastream');\nvar mockconsole = require('mockconsole');\nvar SocketIoConnection = require('./socketioconnection');\n\nfunction SimpleWebRTC(opts) {\n    var self = this;\n    var options = opts || {};\n    var config = this.config = {\n                    target: '',\n            url: 'https://sandbox.simplewebrtc.com:443/',\n            socketio: {/* 'force new connection':true*/},\n            connection: null,\n            debug: false,\n            localVideoEl: '',\n            remoteVideosEl: '',\n            enableDataChannels: true,\n            autoRequestMedia: false,\n            autoRemoveVideos: true,\n            adjustPeerVolume: false,\n            peerVolumeWhenSpeaking: 0.25,\n            media: {\n                video: true,\n                audio: true\n            },\n            receiveMedia: {\n                offerToReceiveAudio: 1,\n                offerToReceiveVideo: 1\n            },\n            localVideo: {\n                autoplay: true,\n                mirror: true,\n                muted: true\n            }\n        };\n    var item, connection;\n\n    // We also allow a 'logger' option. It can be any object that implements\n    // log, warn, and error methods.\n    // We log nothing by default, following \"the rule of silence\":\n    // http://www.linfo.org/rule_of_silence.html\n    this.logger = function () {\n        // we assume that if you're in debug mode and you didn't\n        // pass in a logger, you actually want to log as much as\n        // possible.\n        if (opts.debug) {\n            return opts.logger || console;\n        } else {\n        // or we'll use your logger which should have its own logic\n        // for output. Or we'll return the no-op.\n            return opts.logger || mockconsole;\n        }\n    }();\n\n    // set our config from options\n    for (item in options) {\n        if (options.hasOwnProperty(item)) {\n            this.config[item] = options[item];\n        }\n    }\n\n    // attach detected support for convenience\n    this.capabilities = webrtcSupport;\n\n    // call WildEmitter constructor\n    WildEmitter.call(this);\n\n    // create default SocketIoConnection if it's not passed in\n    if (this.config.connection === null) {\n        connection = this.connection = new SocketIoConnection(this.config);\n    } else {\n        connection = this.connection = this.config.connection;\n    }\n\n    connection.on('connect', function () {\n        self.emit('connectionReady', connection.getSessionid());\n        self.sessionReady = true;\n        self.testReadiness();\n    });\n\n    connection.on('message', function (message) {\n        var peers = self.webrtc.getPeers(message.from, message.roomType);\n        var peer;\n\n        if (message.type === 'offer') {\n            if (peers.length) {\n                peers.forEach(function (p) {\n                    if (p.sid == message.sid) peer = p;\n                });\n                //if (!peer) peer = peers[0]; // fallback for old protocol versions\n            }\n            if (!peer) {\n                peer = self.webrtc.createPeer({\n                    id: message.from,\n                    sid: message.sid,\n                                nickName: message.fromNickName,\n                    type: message.roomType,\n                    enableDataChannels: self.config.enableDataChannels && message.roomType !== 'screen',\n                    sharemyscreen: message.roomType === 'screen' && !message.broadcaster,\n                    broadcaster: message.roomType === 'screen' && !message.broadcaster ? self.connection.getSessionid() : null\n                });\n                self.emit('createdPeer', peer);\n            }\n            peer.handleMessage(message);\n        } else if (peers.length) {\n            peers.forEach(function (peer) {\n                if (message.sid) {\n                    if (peer.sid === message.sid) {\n                        peer.handleMessage(message);\n                    }\n                } else {\n                    peer.handleMessage(message);\n                }\n            });\n        }\n    });\n\n    connection.on('remove', function (room) {\n        if (room.id !== self.connection.getSessionid()) {\n            self.webrtc.removePeers(room.id, room.type);\n        }\n    });\n\n    // instantiate our main WebRTC helper\n    // using same logger from logic here\n    opts.logger = this.logger;\n    opts.debug = false;\n    this.webrtc = new WebRTC(opts);\n\n    // attach a few methods from underlying lib to simple.\n    ['mute', 'unmute', 'pauseVideo', 'resumeVideo', 'pause', 'resume', 'sendToAll', 'sendDirectlyToAll', 'getPeers'].forEach(function (method) {\n        self[method] = self.webrtc[method].bind(self.webrtc);\n    });\n\n    // proxy events from WebRTC\n    this.webrtc.on('*', function () {\n        self.emit.apply(self, arguments);\n    });\n\n    // log all events in debug mode\n    if (config.debug) {\n        this.on('*', this.logger.log.bind(this.logger, 'SimpleWebRTC event:'));\n    }\n\n    // check for readiness\n    this.webrtc.on('localStream', function () {\n        self.testReadiness();\n    });\n\n    this.webrtc.on('message', function (payload) {\n        self.connection.emit('message', payload);\n    });\n\n    this.webrtc.on('peerStreamAdded', this.handlePeerStreamAdded.bind(this));\n    this.webrtc.on('peerStreamRemoved', this.handlePeerStreamRemoved.bind(this));\n\n    // echo cancellation attempts\n    if (this.config.adjustPeerVolume) {\n        this.webrtc.on('speaking', this.setVolumeForAll.bind(this, this.config.peerVolumeWhenSpeaking));\n        this.webrtc.on('stoppedSpeaking', this.setVolumeForAll.bind(this, 1));\n    }\n\n    connection.on('stunservers', function (args) {\n        // resets/overrides the config\n                    //Changes url to urls\n                    var length = args.length;\n                    if (length > 0) {\n                        self.webrtc.config.peerConnectionConfig.iceServers = [];\n                        for (var i = 0; i < length; i++) {\n                            if (args[i].url)\n                                self.webrtc.config.peerConnectionConfig.iceServers.push({ \"urls\": args[i].url });\n                            else\n                                self.webrtc.config.peerConnectionConfig.iceServers.push(args[i]);\n                        }\n                    }\n                    self.emit('stunservers', self.webrtc.config.peerConnectionConfig.iceServers);\n    });\n    connection.on('turnservers', function (args) {\n        // appends to the config\n        self.webrtc.config.peerConnectionConfig.iceServers = self.webrtc.config.peerConnectionConfig.iceServers.concat(args);\n        self.emit('turnservers', args);\n    });\n\n    connection.on('loginjanusrequest', function (args) {\n        var peer = self.webrtc.createPeer({\n            id: 'janus',\n            type: 'video',\n           // nickName: client.nickName,\n            mode: 'sender',\n            //vidEncoder: client.vidEncoder,\n            //vidBitrate: client.vidBitrate,\n            //audEncoder: client.audEncoder,\n            //audBitrate: client.audBitrate,\n            enableDataChannels: false,\n            receiveMedia: {\n                offerToReceiveAudio: 1,\n                offerToReceiveVideo: 1\n            }\n        });\n        self.emit('createdPeer', peer);\n        peer.start();\n    });\n\n    this.webrtc.on('iceFailed', function (peer) {\n        // local ice failure\n    });\n    this.webrtc.on('connectivityError', function (peer) {\n        // remote ice failure\n    });\n\n\n    // sending mute/unmute to all peers\n    this.webrtc.on('audioOn', function () {\n        self.webrtc.sendToAll('unmute', {name: 'audio'});\n    });\n    this.webrtc.on('audioOff', function () {\n        self.webrtc.sendToAll('mute', {name: 'audio'});\n    });\n    this.webrtc.on('videoOn', function () {\n        self.webrtc.sendToAll('unmute', {name: 'video'});\n    });\n    this.webrtc.on('videoOff', function () {\n        self.webrtc.sendToAll('mute', {name: 'video'});\n    });\n\n    // screensharing events\n    this.webrtc.on('localScreen', function (stream) {\n        var item,\n            el = document.createElement('video'),\n            container = self.getRemoteVideoContainer();\n\n        el.oncontextmenu = function () { return false; };\n        el.id = 'localScreen';\n        attachMediaStream(stream, el);\n        if (container) {\n            container.appendChild(el);\n        }\n\n        self.emit('localScreenAdded', el);\n        self.connection.emit('shareScreen');\n\n        self.webrtc.peers.forEach(function (existingPeer) {\n            var peer;\n            if (existingPeer.type === 'video') {\n                peer = self.webrtc.createPeer({\n                    id: existingPeer.id,\n                                nickName: existingPeer.nickName,\n                                mode: existingPeer.mode,\n                    type: 'screen',\n                    sharemyscreen: true,\n                    enableDataChannels: false,\n                    receiveMedia: {\n                        offerToReceiveAudio: 0,\n                        offerToReceiveVideo: 0\n                    },\n                    broadcaster: self.connection.getSessionid(),\n                });\n                self.emit('createdPeer', peer);\n                peer.start();\n            }\n        });\n    });\n    this.webrtc.on('localScreenStopped', function (stream) {\n        if (self.getLocalScreen()) {\n            self.stopScreenShare();\n        }\n        /*\n        self.connection.emit('unshareScreen');\n        self.webrtc.peers.forEach(function (peer) {\n            if (peer.sharemyscreen) {\n                peer.end();\n            }\n        });\n        */\n    });\n\n    this.webrtc.on('channelMessage', function (peer, label, data) {\n        if (data.type == 'volume') {\n            self.emit('remoteVolumeChange', peer, data.volume);\n        }\n    });\n\n    if (this.config.autoRequestMedia) this.startLocalVideo();\n}\n\n\nSimpleWebRTC.prototype = Object.create(WildEmitter.prototype, {\n    constructor: {\n        value: SimpleWebRTC\n    }\n});\n\nSimpleWebRTC.prototype.leaveRoom = function () {\n    if (this.roomName) {\n        this.connection.emit('leave');\n        while (this.webrtc.peers.length) {\n            this.webrtc.peers[0].end();\n        }\n        if (this.getLocalScreen()) {\n            this.stopScreenShare();\n        }\n        this.emit('leftRoom', this.roomName);\n        this.roomName = undefined;\n    }\n};\n\nSimpleWebRTC.prototype.disconnect = function () {\n    this.connection.disconnect();\n    delete this.connection;\n};\n            ///MLUpdate///\n            SimpleWebRTC.prototype.sendDataChannelMessageToAll = function (message) {\n                this.webrtc.sendDirectlyToAll('simplewebrtc', 'custommessage', message);\n            };\n\n            SimpleWebRTC.prototype.sendDataChannelMessageToPeer = function (peerId, message) {\n                var foundId = false;\n                this.webrtc.peers.forEach(function (peer) {\n                    if (peer.enableDataChannels && peer.id == peerId) {\n                        peer.sendDirectly('simplewebrtc', 'custommessage', message);\n                        foundId = true;\n                    }\n                });\n                //Try to find peer by name\n                if (!foundId) {\n                    this.webrtc.peers.forEach(function (peer) {\n                        if (peer.enableDataChannels && peer.nickName == peerId) {\n                            peer.sendDirectly('simplewebrtc', 'custommessage', message);\n                        }\n                    });\n                }\n            };\n            ///MLUpdate///\n\nSimpleWebRTC.prototype.handlePeerStreamAdded = function (peer) {\n    var self = this;\n    var container = this.getRemoteVideoContainer();\n    var video = attachMediaStream(peer.stream);\n\n    // store video element as part of peer for easy removal\n    peer.videoEl = video;\n    video.id = this.getDomId(peer);\n\n    if (container) container.appendChild(video);\n\n    this.emit('videoAdded', video, peer);\n\n    // send our mute status to new peer if we're muted\n    // currently called with a small delay because it arrives before\n    // the video element is created otherwise (which happens after\n    // the async setRemoteDescription-createAnswer)\n    window.setTimeout(function () {\n        if (!self.webrtc.isAudioEnabled()) {\n            peer.send('mute', {name: 'audio'});\n        }\n        if (!self.webrtc.isVideoEnabled()) {\n            peer.send('mute', {name: 'video'});\n        }\n    }, 250);\n};\n\nSimpleWebRTC.prototype.handlePeerStreamRemoved = function (peer) {\n    var container = this.getRemoteVideoContainer();\n    var videoEl = peer.videoEl;\n    if (this.config.autoRemoveVideos && container && videoEl) {\n        container.removeChild(videoEl);\n    }\n    if (videoEl) this.emit('videoRemoved', videoEl, peer);\n};\n\nSimpleWebRTC.prototype.getDomId = function (peer) {\n    return [peer.id, peer.type, peer.broadcaster ? 'broadcasting' : 'incoming'].join('_');\n};\n\n// set volume on video tag for all peers takse a value between 0 and 1\nSimpleWebRTC.prototype.setVolumeForAll = function (volume) {\n    this.webrtc.peers.forEach(function (peer) {\n        if (peer.videoEl) peer.videoEl.volume = volume;\n    });\n};\n\nSimpleWebRTC.prototype.joinRoom = function (name, cb) {\n    var self = this;\n    this.roomName = name;\n    this.connection.emit('join', name, function (err, roomDescription) {\n        console.log('join CB', err, roomDescription);\n        if (err) {\n            self.emit('error', err);\n        } else {\n            var id,\n                client,\n                type,\n                peer;\n            for (id in roomDescription.clients) {\n                client = roomDescription.clients[id];\n                for (type in client) {\n                                if (self.config.target) {\n                                    if (typeof client[type] === 'boolean' && client[type] && (id == self.config.target || client.nickName == self.config.target)) {\n                                        peer = self.webrtc.createPeer({\n                                            id: id,\n                                            type: type,\n                                            nickName: client.nickName,\n                                            mode: client.mode,\n                                            vidEncoder: client.vidEncoder,\n                                            vidBitrate: client.vidBitrate,\n                                            audEncoder: client.audEncoder,\n                                            audBitrate: client.audBitrate,\n                                            enableDataChannels: self.config.enableDataChannels && type !== 'screen',\n                                            receiveMedia: {\n                                                offerToReceiveAudio: type !== 'screen' && self.config.receiveMedia.offerToReceiveAudio ? 1 : 0,\n                                                offerToReceiveVideo: self.config.receiveMedia.offerToReceiveVideo\n                                            }\n                                        });\n                                        self.emit('createdPeer', peer);\n                                        if (client.multicastType && client.multicastType == 'janus')\n                                        {\n                                            var janusLisnterMsg = { to: id, toName: client.nickName, type: 'januslistner'}\n                                            self.connection.emit('message', janusLisnterMsg);\n                                        }\n                                        else\n                                        peer.start();\n                                    }\n                                }\n                                else {\n                                    if (typeof client[type] === 'boolean' && client[type]) {\n                        peer = self.webrtc.createPeer({\n                            id: id,\n                            type: type,\n                                            nickName: client.nickName,\n                                            mode: client.mode,\n                                            vidEncoder: client.vidEncoder,\n                                            vidBitrate: client.vidBitrate,\n                                            audEncoder: client.audEncoder,\n                                            audBitrate: client.audBitrate,\n                            enableDataChannels: self.config.enableDataChannels && type !== 'screen',\n                            receiveMedia: {\n                                offerToReceiveAudio: type !== 'screen' && self.config.receiveMedia.offerToReceiveAudio ? 1 : 0,\n                                offerToReceiveVideo: self.config.receiveMedia.offerToReceiveVideo\n                            }\n                        });\n                        self.emit('createdPeer', peer);\n                        peer.start();\n                    }\n                }\n            }\n        }\n                    }\n\n        if (cb) cb(err, roomDescription);\n        self.emit('joinedRoom', name);\n    });\n};\n\nSimpleWebRTC.prototype.getEl = function (idOrEl) {\n    if (typeof idOrEl === 'string') {\n        return document.getElementById(idOrEl);\n    } else {\n        return idOrEl;\n    }\n};\n\nSimpleWebRTC.prototype.startLocalVideo = function () {\n    var self = this;\n    this.webrtc.start(this.config.media, function (err, stream) {\n        if (err) {\n            self.emit('localMediaError', err);\n        } else {\n            attachMediaStream(stream, self.getLocalVideoContainer(), self.config.localVideo);\n        }\n    });\n};\n\nSimpleWebRTC.prototype.stopLocalVideo = function () {\n    this.webrtc.stop();\n};\n\n// this accepts either element ID or element\n// and either the video tag itself or a container\n// that will be used to put the video tag into.\nSimpleWebRTC.prototype.getLocalVideoContainer = function () {\n    var el = this.getEl(this.config.localVideoEl);\n    if (el && el.tagName === 'VIDEO') {\n        el.oncontextmenu = function () { return false; };\n        return el;\n    } else if (el) {\n        var video = document.createElement('video');\n        video.oncontextmenu = function () { return false; };\n        el.appendChild(video);\n        return video;\n    } else {\n        return;\n    }\n};\n\nSimpleWebRTC.prototype.getRemoteVideoContainer = function () {\n    return this.getEl(this.config.remoteVideosEl);\n};\n\nSimpleWebRTC.prototype.shareScreen = function (cb) {\n    this.webrtc.startScreenShare(cb);\n};\n\nSimpleWebRTC.prototype.getLocalScreen = function () {\n    return this.webrtc.localScreens && this.webrtc.localScreens[0];\n};\n\nSimpleWebRTC.prototype.stopScreenShare = function () {\n    this.connection.emit('unshareScreen');\n    var videoEl = document.getElementById('localScreen');\n    var container = this.getRemoteVideoContainer();\n\n    if (this.config.autoRemoveVideos && container && videoEl) {\n        container.removeChild(videoEl);\n    }\n\n    // a hack to emit the event the removes the video\n    // element that we want\n    if (videoEl) {\n        this.emit('videoRemoved', videoEl);\n    }\n    if (this.getLocalScreen()) {\n        this.webrtc.stopScreenShare();\n    }\n    this.webrtc.peers.forEach(function (peer) {\n        if (peer.broadcaster) {\n            peer.end();\n        }\n    });\n};\n\nSimpleWebRTC.prototype.testReadiness = function () {\n    var self = this;\n    if (this.sessionReady) {\n            self.emit('readyToCall', self.connection.getSessionid());\n                    //if (!this.config.media.video && !this.config.media.audio) {\n                    //    self.emit('readyToCall', self.connection.getSessionid());\n                    //} else if (this.webrtc.localStreams.length > 0) {\n                    //    self.emit('readyToCall', self.connection.getSessionid());\n                    //}\n        }\n};\n\nSimpleWebRTC.prototype.createRoom = function (name, cb) {\n    this.roomName = name;\n    if (arguments.length === 2) {\n        this.connection.emit('create', name, cb);\n    } else {\n        this.connection.emit('create', name);\n    }\n};\n\nSimpleWebRTC.prototype.sendFile = function () {\n    if (!webrtcSupport.dataChannel) {\n        return this.emit('error', new Error('DataChannelNotSupported'));\n    }\n\n};\n            SimpleWebRTC.prototype.getNickName = function () {\n                if (this.nickName) {\n                    return this.nickName;\n                }\n            };\n\n            SimpleWebRTC.prototype.setNickName = function (nickName) {\n                if (nickName && typeof nickName === 'string') {\n                    this.nickName = nickName;\n                    this.connection.emit('nickname', nickName)\n                }\n            };\n\n            SimpleWebRTC.prototype.setInfo = function (nickName, strongId, mode, multicast) {\n                if (arguments.length > 1) {\n                    var nick = nickName || '';\n                    var sId = strongId || '';\n                    var mod = mode || '';\n                    var mc = multicast || '';\n                    if (nickName)\n                        this.nickName = nickName;\n\n                    if (strongId && !this.strongId) \n                        this.strongId = strongId;\n\n                    if (mode)\n                        this.mode = mode;\n\n                    if (multicast)\n                        this.multicastType = multicast;\n\n                    this.connection.emit('setinfo', { nickName: nick, strongId: sId, mode: mod, multicastType: mc});\n                }\n                else if (arguments.length == 1 && typeof nickName == 'object') {\n                    this.connection.emit('setinfo', nickName);\n                }\n            };\n\nmodule.exports = SimpleWebRTC;\n\n},{\"./socketioconnection\":79,\"./webrtc\":80,\"attachmediastream\":3,\"mockconsole\":46,\"webrtcsupport\":74,\"wildemitter\":75}],79:[function(require,module,exports){\nvar io = require('socket.io-client');\n\nfunction SocketIoConnection(config) {\n    this.connection = io.connect(config.url, config.socketio);\n}\n\nSocketIoConnection.prototype.on = function (ev, fn) {\n    this.connection.on(ev, fn);\n};\n\nSocketIoConnection.prototype.emit = function () {\n    this.connection.emit.apply(this.connection, arguments);\n};\n\nSocketIoConnection.prototype.getSessionid = function () {\n    return this.connection.id;\n};\n\nSocketIoConnection.prototype.disconnect = function () {\n    return this.connection.disconnect();\n};\n\nmodule.exports = SocketIoConnection;\n\n},{\"socket.io-client\":60}],80:[function(require,module,exports){\nvar util = require('util');\nvar webrtcSupport = require('webrtcsupport');\nvar mockconsole = require('mockconsole');\nvar localMedia = require('localmedia');\nvar Peer = require('./peer');\n\nfunction WebRTC(opts) {\n    var self = this;\n    var options = opts || {};\n    var config = this.config = {\n            debug: false,\n            // makes the entire PC config overridable\n            peerConnectionConfig: {\n            },\n            peerConnectionConstraints: {\n                optional: []\n            },\n            receiveMedia: {\n                offerToReceiveAudio: 1,\n                offerToReceiveVideo: 1\n            },\n            enableDataChannels: true\n        };\n    var item;\n\t\t\t\t\n                if (options.iceServers) {\n                    config.peerConnectionConfig.iceServersiceServers = options.iceServers;\n                }\n\n    // We also allow a 'logger' option. It can be any object that implements\n    // log, warn, and error methods.\n    // We log nothing by default, following \"the rule of silence\":\n    // http://www.linfo.org/rule_of_silence.html\n    this.logger = function () {\n        // we assume that if you're in debug mode and you didn't\n        // pass in a logger, you actually want to log as much as\n        // possible.\n        if (opts.debug) {\n            return opts.logger || console;\n        } else {\n        // or we'll use your logger which should have its own logic\n        // for output. Or we'll return the no-op.\n            return opts.logger || mockconsole;\n        }\n    }();\n\n    // set options\n    for (item in options) {\n        if (options.hasOwnProperty(item)) {\n            this.config[item] = options[item];\n        }\n    }\n\n    // check for support\n    if (!webrtcSupport.support) {\n        this.logger.error('Your browser doesn\\'t seem to support WebRTC');\n    }\n\n    // where we'll store our peer connections\n    this.peers = [];\n\n    // call localMedia constructor\n    localMedia.call(this, this.config);\n\n    this.on('speaking', function () {\n        if (!self.hardMuted) {\n            // FIXME: should use sendDirectlyToAll, but currently has different semantics wrt payload\n            self.peers.forEach(function (peer) {\n                if (peer.enableDataChannels) {\n                    var dc = peer.getDataChannel('hark');\n                    if (dc.readyState != 'open') return;\n                    dc.send(JSON.stringify({type: 'speaking'}));\n                }\n            });\n        }\n    });\n    this.on('stoppedSpeaking', function () {\n        if (!self.hardMuted) {\n            // FIXME: should use sendDirectlyToAll, but currently has different semantics wrt payload\n            self.peers.forEach(function (peer) {\n                if (peer.enableDataChannels) {\n                    var dc = peer.getDataChannel('hark');\n                    if (dc.readyState != 'open') return;\n                    dc.send(JSON.stringify({type: 'stoppedSpeaking'}));\n                }\n            });\n        }\n    });\n    this.on('volumeChange', function (volume, treshold) {\n        if (!self.hardMuted) {\n            // FIXME: should use sendDirectlyToAll, but currently has different semantics wrt payload\n            self.peers.forEach(function (peer) {\n                if (peer.enableDataChannels) {\n                    var dc = peer.getDataChannel('hark');\n                    if (dc.readyState != 'open') return;\n                    dc.send(JSON.stringify({type: 'volume', volume: volume }));\n                }\n            });\n        }\n    });\n\n    // log events in debug mode\n    if (this.config.debug) {\n        this.on('*', function (event, val1, val2) {\n            var logger;\n            // if you didn't pass in a logger and you explicitly turning on debug\n            // we're just going to assume you're wanting log output with console\n            if (self.config.logger === mockconsole) {\n                logger = console;\n            } else {\n                logger = self.logger;\n            }\n            logger.log('event:', event, val1, val2);\n        });\n    }\n}\n\nutil.inherits(WebRTC, localMedia);\n\nWebRTC.prototype.createPeer = function (opts) {\n    var peer;\n    opts.parent = this;\n    peer = new Peer(opts);\n    this.peers.push(peer);\n    return peer;\n};\n\n// removes peers\nWebRTC.prototype.removePeers = function (id, type) {\n    this.getPeers(id, type).forEach(function (peer) {\n        peer.end();\n    });\n};\n\n// fetches all Peer objects by session id and/or type\nWebRTC.prototype.getPeers = function (sessionId, type) {\n    return this.peers.filter(function (peer) {\n        return (!sessionId || peer.id === sessionId) && (!type || peer.type === type);\n    });\n};\n\n// sends message to all\nWebRTC.prototype.sendToAll = function (message, payload) {\n    this.peers.forEach(function (peer) {\n        peer.send(message, payload);\n    });\n};\n\n// sends message to all using a datachannel\n// only sends to anyone who has an open datachannel\nWebRTC.prototype.sendDirectlyToAll = function (channel, message, payload) {\n    this.peers.forEach(function (peer) {\n        if (peer.enableDataChannels) {\n            peer.sendDirectly(channel, message, payload);\n        }\n    });\n};\n\nmodule.exports = WebRTC;\n\n},{\"./peer\":77,\"localmedia\":44,\"mockconsole\":46,\"util\":73,\"webrtcsupport\":74}]},{},[78])(78)\n});\n\n\n// WEBPACK FOOTER //\n// ./src/simplewebrtc.bundle.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}